<!doctype html>
<html class="">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
		<meta name="description" content="We’re on a journey to advance and democratize artificial intelligence through open source and open science." />
		<meta property="fb:app_id" content="1321688464574422" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@huggingface" />
		<meta name="twitter:image" content="https://cdn-thumbnails.huggingface.co/social-thumbnails/datasets/JeanKaddour/minipile.png" />
		<meta property="og:title" content="JeanKaddour/minipile · Datasets at Hugging Face" />
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://huggingface.co/datasets/JeanKaddour/minipile" />
		<meta property="og:image" content="https://cdn-thumbnails.huggingface.co/social-thumbnails/datasets/JeanKaddour/minipile.png" />

		<link rel="stylesheet" href="/front/build/kube-68d7aa0/style.css" />

		<link rel="preconnect" href="https://fonts.gstatic.com" />
		<link
			href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap"
			rel="stylesheet"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&display=swap"
			rel="stylesheet"
		/>

		<link
			rel="preload"
			href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css"
			as="style"
			onload="this.onload=null;this.rel='stylesheet'"
		/>
		<noscript>
			<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" />
		</noscript>

		<script>const guestTheme = document.cookie.match(/theme=(\w+)/)?.[1]; document.documentElement.classList.toggle('dark', guestTheme === 'dark' || ( (!guestTheme || guestTheme === 'system') && window.matchMedia('(prefers-color-scheme: dark)').matches));</script>
<link rel="canonical" href="https://huggingface.co/datasets/JeanKaddour/minipile"> <script type="application/ld+json">{
  "@context": {
    "@language": "en",
    "@vocab": "https:\/\/schema.org\/",
    "citeAs": "cr:citeAs",
    "column": "cr:column",
    "conformsTo": "dct:conformsTo",
    "cr": "http:\/\/mlcommons.org\/croissant\/",
    "data": {
      "@id": "cr:data",
      "@type": "@json"
    },
    "dataBiases": "cr:dataBiases",
    "dataCollection": "cr:dataCollection",
    "dataType": {
      "@id": "cr:dataType",
      "@type": "@vocab"
    },
    "dct": "http:\/\/purl.org\/dc\/terms\/",
    "extract": "cr:extract",
    "field": "cr:field",
    "fileProperty": "cr:fileProperty",
    "fileObject": "cr:fileObject",
    "fileSet": "cr:fileSet",
    "format": "cr:format",
    "includes": "cr:includes",
    "isLiveDataset": "cr:isLiveDataset",
    "jsonPath": "cr:jsonPath",
    "key": "cr:key",
    "md5": "cr:md5",
    "parentField": "cr:parentField",
    "path": "cr:path",
    "personalSensitiveInformation": "cr:personalSensitiveInformation",
    "recordSet": "cr:recordSet",
    "references": "cr:references",
    "regex": "cr:regex",
    "repeated": "cr:repeated",
    "replace": "cr:replace",
    "sc": "https:\/\/schema.org\/",
    "separator": "cr:separator",
    "source": "cr:source",
    "subField": "cr:subField",
    "transform": "cr:transform"
  },
  "@type": "sc:Dataset",
  "distribution": [
    {
      "@type": "cr:FileObject",
      "@id": "repo",
      "name": "repo",
      "description": "The Hugging Face git repository.",
      "contentUrl": "https:\/\/huggingface.co\/datasets\/JeanKaddour\/minipile\/tree\/refs%2Fconvert%2Fparquet",
      "encodingFormat": "git+https",
      "sha256": "https:\/\/github.com\/mlcommons\/croissant\/issues\/80"
    },
    {
      "@type": "cr:FileSet",
      "@id": "parquet-files-for-config-default",
      "name": "parquet-files-for-config-default",
      "description": "The underlying Parquet files as converted by Hugging Face (see: https:\/\/huggingface.co\/docs\/dataset-viewer\/parquet).",
      "containedIn": {
        "@id": "repo"
      },
      "encodingFormat": "application\/x-parquet",
      "includes": "default\/*\/*.parquet"
    }
  ],
  "recordSet": [
    {
      "@type": "cr:RecordSet",
      "dataType": "cr:Split",
      "key": {
        "@id": "default_splits\/split_name"
      },
      "@id": "default_splits",
      "name": "default_splits",
      "description": "Splits for the default config.",
      "field": [
        {
          "@type": "cr:Field",
          "@id": "default_splits\/split_name",
          "name": "split_name",
          "description": "The name of the split.",
          "dataType": "sc:Text"
        }
      ],
      "data": [
        {
          "default_splits\/split_name": "train"
        },
        {
          "default_splits\/split_name": "validation"
        },
        {
          "default_splits\/split_name": "test"
        }
      ]
    },
    {
      "@type": "cr:RecordSet",
      "@id": "default",
      "name": "default",
      "description": "JeanKaddour\/minipile - 'default' subset\n\nAdditional information:\n- 3 splits: train, validation, test",
      "field": [
        {
          "@type": "cr:Field",
          "@id": "default\/split",
          "name": "default\/split",
          "description": "Split to which the example belongs to.",
          "dataType": "sc:Text",
          "source": {
            "fileSet": {
              "@id": "parquet-files-for-config-default"
            },
            "extract": {
              "fileProperty": "fullpath"
            },
            "transform": {
              "regex": "default\/(?:partial-)?(train|validation|test)\/.+parquet$"
            }
          },
          "references": {
            "field": {
              "@id": "default_splits\/split_name"
            }
          }
        },
        {
          "@type": "cr:Field",
          "@id": "default\/text",
          "name": "default\/text",
          "description": "Column 'text' from the Hugging Face parquet file.",
          "dataType": "sc:Text",
          "source": {
            "fileSet": {
              "@id": "parquet-files-for-config-default"
            },
            "extract": {
              "column": "text"
            }
          }
        }
      ]
    }
  ],
  "conformsTo": "http:\/\/mlcommons.org\/croissant\/1.0",
  "name": "minipile",
  "description": "\n\t\n\t\t\n\t\n\t\n\t\tDataset Card for MiniPile\n\t\n\n\n\t\n\t\t\n\t\n\t\n\t\tDataset Description\n\t\n\nThe MiniPile Challenge for Data-Efficient Language Models\n\n\t\n\t\t\n\t\n\t\n\t\tDataset Summary\n\t\n\nMiniPile is a 6GB subset of the deduplicated The Pile corpus. To curate MiniPile, we perform a simple, three-step data filtering process: we (1) infer embeddings for all documents of the Pile, (2) cluster the embedding space using k-means, and (3) filter out low-quality clusters.\nThe primary motivation for curating MiniPile is that… See the full description on the dataset page: https:\/\/huggingface.co\/datasets\/JeanKaddour\/minipile.",
  "alternateName": [
    "JeanKaddour\/minipile",
    "MiniPile"
  ],
  "creator": {
    "@type": "Person",
    "name": "Jean Kaddour",
    "url": "https:\/\/huggingface.co\/JeanKaddour"
  },
  "keywords": [
    "text-generation",
    "fill-mask",
    "language-modeling",
    "masked-language-modeling",
    "no-annotation",
    "found",
    "monolingual",
    "original",
    "English",
    "other",
    "1M - 10M",
    "parquet",
    "Text",
    "Datasets",
    "Dask",
    "Croissant",
    "Polars",
    "arxiv:2304.08442",
    "arxiv:2201.07311",
    "🇺🇸 Region: US"
  ],
  "license": "https:\/\/choosealicense.com\/licenses\/other\/",
  "url": "https:\/\/huggingface.co\/datasets\/JeanKaddour\/minipile"
}</script> 

		<title>JeanKaddour/minipile · Datasets at Hugging Face</title>

		<script
			defer
			data-domain="huggingface.co"
			event-loggedIn="false"
			src="/js/script.pageview-props.js"
		></script>
		<script>
			window.plausible =
				window.plausible ||
				function () {
					(window.plausible.q = window.plausible.q || []).push(arguments);
				};
		</script>
		<script>
			window.hubConfig = {"features":{"signupDisabled":false},"sshGitUrl":"git@hf.co","moonHttpUrl":"https:\/\/huggingface.co","captchaApiKey":"bd5f2066-93dc-4bdd-a64b-a24646ca3859","captchaDisabledOnSignup":true,"datasetViewerPublicUrl":"https:\/\/datasets-server.huggingface.co","stripePublicKey":"pk_live_x2tdjFXBCvXo2FFmMybezpeM00J6gPCAAc","environment":"production","userAgent":"HuggingFace (production)","spacesIframeDomain":"hf.space","spacesApiUrl":"https:\/\/api.hf.space","docSearchKey":"ece5e02e57300e17d152c08056145326e90c4bff3dd07d7d1ae40cf1c8d39cb6","logoDev":{"apiUrl":"https:\/\/img.logo.dev\/","apiKey":"pk_UHS2HZOeRnaSOdDp7jbd5w"}};
		</script>
		<script type="text/javascript" src="https://de5282c3ca0c.edge.sdk.awswaf.com/de5282c3ca0c/526cf06acb0d/challenge.js" defer></script>
	</head>
	<body class="flex flex-col min-h-dvh bg-white dark:bg-gray-950 text-black DatasetPage">
		<div class="flex min-h-dvh flex-col"><div class="SVELTE_HYDRATER contents" data-target="SystemThemeMonitor" data-props="{&quot;isLoggedIn&quot;:false}"></div>

	<div class="SVELTE_HYDRATER contents" data-target="MainHeader" data-props="{&quot;classNames&quot;:&quot;&quot;,&quot;isWide&quot;:false,&quot;isZh&quot;:false,&quot;isPro&quot;:false}"><header class="border-b border-gray-100 "><div class="w-full px-4 container flex h-16 items-center"><div class="flex flex-1 items-center"><a class="mr-5 flex flex-none items-center lg:mr-6" href="/"><img alt="Hugging Face's logo" class="w-7 md:mr-2" src="/front/assets/huggingface_logo-noborder.svg">
				<span class="hidden whitespace-nowrap text-lg font-bold md:block">Hugging Face</span></a>
			<div class="relative flex-1 lg:max-w-sm mr-2 sm:mr-4 md:mr-3 xl:mr-6"><input autocomplete="off" class="w-full dark:bg-gray-950 pl-8 form-input-alt h-9 pr-3 focus:shadow-xl " name="" placeholder="Search models, datasets, users..."   spellcheck="false" type="text" value="">
	<svg class="absolute left-2.5 text-gray-400 top-1/2 transform -translate-y-1/2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M30 28.59L22.45 21A11 11 0 1 0 21 22.45L28.59 30zM5 14a9 9 0 1 1 9 9a9 9 0 0 1-9-9z" fill="currentColor"></path></svg>
	</div>
			<div class="flex flex-none items-center justify-center p-0.5 place-self-stretch lg:hidden"><button class="relative z-40 flex h-6 w-8 items-center justify-center" type="button"><svg width="1em" height="1em" viewBox="0 0 10 10" class="text-xl" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" preserveAspectRatio="xMidYMid meet" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.65039 2.9999C1.65039 2.8066 1.80709 2.6499 2.00039 2.6499H8.00039C8.19369 2.6499 8.35039 2.8066 8.35039 2.9999C8.35039 3.1932 8.19369 3.3499 8.00039 3.3499H2.00039C1.80709 3.3499 1.65039 3.1932 1.65039 2.9999ZM1.65039 4.9999C1.65039 4.8066 1.80709 4.6499 2.00039 4.6499H8.00039C8.19369 4.6499 8.35039 4.8066 8.35039 4.9999C8.35039 5.1932 8.19369 5.3499 8.00039 5.3499H2.00039C1.80709 5.3499 1.65039 5.1932 1.65039 4.9999ZM2.00039 6.6499C1.80709 6.6499 1.65039 6.8066 1.65039 6.9999C1.65039 7.1932 1.80709 7.3499 2.00039 7.3499H8.00039C8.19369 7.3499 8.35039 7.1932 8.35039 6.9999C8.35039 6.8066 8.19369 6.6499 8.00039 6.6499H2.00039Z"></path></svg>
		</button>

	</div></div>
		<nav aria-label="Main" class="ml-auto hidden lg:block"><ul class="flex items-center space-x-1.5 2xl:space-x-2"><li class="hover:text-indigo-700"><a class="group flex items-center px-2 py-0.5 dark:text-gray-300 dark:hover:text-gray-100" href="/models"><svg class="mr-1.5 text-gray-400 group-hover:text-indigo-500" style="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path class="uim-quaternary" d="M20.23 7.24L12 12L3.77 7.24a1.98 1.98 0 0 1 .7-.71L11 2.76c.62-.35 1.38-.35 2 0l6.53 3.77c.29.173.531.418.7.71z" opacity=".25" fill="currentColor"></path><path class="uim-tertiary" d="M12 12v9.5a2.09 2.09 0 0 1-.91-.21L4.5 17.48a2.003 2.003 0 0 1-1-1.73v-7.5a2.06 2.06 0 0 1 .27-1.01L12 12z" opacity=".5" fill="currentColor"></path><path class="uim-primary" d="M20.5 8.25v7.5a2.003 2.003 0 0 1-1 1.73l-6.62 3.82c-.275.13-.576.198-.88.2V12l8.23-4.76c.175.308.268.656.27 1.01z" fill="currentColor"></path></svg>
					Models</a>
			</li><li class="hover:text-red-700"><a class="group flex items-center px-2 py-0.5 dark:text-gray-300 dark:hover:text-gray-100" href="/datasets"><svg class="mr-1.5 text-gray-400 group-hover:text-red-500" style="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 25 25"><ellipse cx="12.5" cy="5" fill="currentColor" fill-opacity="0.25" rx="7.5" ry="2"></ellipse><path d="M12.5 15C16.6421 15 20 14.1046 20 13V20C20 21.1046 16.6421 22 12.5 22C8.35786 22 5 21.1046 5 20V13C5 14.1046 8.35786 15 12.5 15Z" fill="currentColor" opacity="0.5"></path><path d="M12.5 7C16.6421 7 20 6.10457 20 5V11.5C20 12.6046 16.6421 13.5 12.5 13.5C8.35786 13.5 5 12.6046 5 11.5V5C5 6.10457 8.35786 7 12.5 7Z" fill="currentColor" opacity="0.5"></path><path d="M5.23628 12C5.08204 12.1598 5 12.8273 5 13C5 14.1046 8.35786 15 12.5 15C16.6421 15 20 14.1046 20 13C20 12.8273 19.918 12.1598 19.7637 12C18.9311 12.8626 15.9947 13.5 12.5 13.5C9.0053 13.5 6.06886 12.8626 5.23628 12Z" fill="currentColor"></path></svg>
					Datasets</a>
			</li><li class="hover:text-blue-700"><a class="group flex items-center px-2 py-0.5 dark:text-gray-300 dark:hover:text-gray-100" href="/spaces"><svg class="mr-1.5 text-gray-400 group-hover:text-blue-500" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" viewBox="0 0 25 25"><path opacity=".5" d="M6.016 14.674v4.31h4.31v-4.31h-4.31ZM14.674 14.674v4.31h4.31v-4.31h-4.31ZM6.016 6.016v4.31h4.31v-4.31h-4.31Z" fill="currentColor"></path><path opacity=".75" fill-rule="evenodd" clip-rule="evenodd" d="M3 4.914C3 3.857 3.857 3 4.914 3h6.514c.884 0 1.628.6 1.848 1.414a5.171 5.171 0 0 1 7.31 7.31c.815.22 1.414.964 1.414 1.848v6.514A1.914 1.914 0 0 1 20.086 22H4.914A1.914 1.914 0 0 1 3 20.086V4.914Zm3.016 1.102v4.31h4.31v-4.31h-4.31Zm0 12.968v-4.31h4.31v4.31h-4.31Zm8.658 0v-4.31h4.31v4.31h-4.31Zm0-10.813a2.155 2.155 0 1 1 4.31 0 2.155 2.155 0 0 1-4.31 0Z" fill="currentColor"></path><path opacity=".25" d="M16.829 6.016a2.155 2.155 0 1 0 0 4.31 2.155 2.155 0 0 0 0-4.31Z" fill="currentColor"></path></svg>
					Spaces</a>
			</li><li class="hover:text-yellow-700 max-xl:hidden"><a class="group flex items-center px-2 py-0.5 dark:text-gray-300 dark:hover:text-gray-100" href="/posts"><svg class="mr-1.5 text-gray-400 group-hover:text-yellow-500 text-yellow-500!" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" viewBox="0 0 12 12" preserveAspectRatio="xMidYMid meet"><path fill="currentColor" fill-rule="evenodd" d="M3.73 2.4A4.25 4.25 0 1 1 6 10.26H2.17l-.13-.02a.43.43 0 0 1-.3-.43l.01-.06a.43.43 0 0 1 .12-.22l.84-.84A4.26 4.26 0 0 1 3.73 2.4Z" clip-rule="evenodd"></path></svg>
					Posts</a>
			</li><li class="hover:text-yellow-700"><a class="group flex items-center px-2 py-0.5 dark:text-gray-300 dark:hover:text-gray-100" href="/docs"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="mr-1.5 text-gray-400 group-hover:text-yellow-500" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><path d="m2.28 3.7-.3.16a.67.67 0 0 0-.34.58v8.73l.01.04.02.07.01.04.03.06.02.04.02.03.04.06.05.05.04.04.06.04.06.04.08.04.08.02h.05l.07.02h.11l.04-.01.07-.02.03-.01.07-.03.22-.12a5.33 5.33 0 0 1 5.15.1.67.67 0 0 0 .66 0 5.33 5.33 0 0 1 5.33 0 .67.67 0 0 0 1-.58V4.36a.67.67 0 0 0-.34-.5l-.3-.17v7.78a.63.63 0 0 1-.87.59 4.9 4.9 0 0 0-4.35.35l-.65.39a.29.29 0 0 1-.15.04.29.29 0 0 1-.16-.04l-.65-.4a4.9 4.9 0 0 0-4.34-.34.63.63 0 0 1-.87-.59V3.7Z" fill="currentColor" class="dark:opacity-40"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M8 3.1a5.99 5.99 0 0 0-5.3-.43.66.66 0 0 0-.42.62v8.18c0 .45.46.76.87.59a4.9 4.9 0 0 1 4.34.35l.65.39c.05.03.1.04.16.04.05 0 .1-.01.15-.04l.65-.4a4.9 4.9 0 0 1 4.35-.34.63.63 0 0 0 .86-.59V3.3a.67.67 0 0 0-.41-.62 5.99 5.99 0 0 0-5.3.43l-.3.17L8 3.1Zm.73 1.87a.43.43 0 1 0-.86 0v5.48a.43.43 0 0 0 .86 0V4.97Z" fill="currentColor" class="opacity-40 dark:opacity-100"></path><path d="M8.73 4.97a.43.43 0 1 0-.86 0v5.48a.43.43 0 1 0 .86 0V4.96Z" fill="currentColor" class="dark:opacity-40"></path></svg>
					Docs</a>
			</li><li class="hover:text-black dark:hover:text-white"><a class="group flex items-center px-2 py-0.5 dark:text-gray-300 dark:hover:text-gray-100" href="/enterprise"><svg class="mr-1.5 text-gray-400 group-hover:text-black dark:group-hover:text-white" xmlns="http://www.w3.org/2000/svg" fill="none" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 33 27"><path fill="currentColor" fill-rule="evenodd" d="M13.5.7a8.7 8.7 0 0 0-7.7 5.7L1 20.6c-1 3.1.9 5.7 4.1 5.7h15c3.3 0 6.8-2.6 7.8-5.7l4.6-14.2c1-3.1-.8-5.7-4-5.7h-15Zm1.1 5.7L9.8 20.3h9.8l1-3.1h-5.8l.8-2.5h4.8l1.1-3h-4.8l.8-2.3H23l1-3h-9.5Z" clip-rule="evenodd"></path></svg>
					Enterprise</a>
			</li>

		<li><a class="group flex items-center px-2 py-0.5 dark:text-gray-300 dark:hover:text-gray-100" href="/pricing">Pricing
			</a></li>

		<li><div class="relative group">
	<button class="px-2 py-0.5 hover:text-gray-500 dark:hover:text-gray-600 flex items-center " type="button">
		<svg class=" text-gray-500 w-5 group-hover:text-gray-400 dark:text-gray-300 dark:group-hover:text-gray-100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" viewBox="0 0 32 18" preserveAspectRatio="xMidYMid meet"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4504 3.30221C14.4504 2.836 14.8284 2.45807 15.2946 2.45807H28.4933C28.9595 2.45807 29.3374 2.836 29.3374 3.30221C29.3374 3.76842 28.9595 4.14635 28.4933 4.14635H15.2946C14.8284 4.14635 14.4504 3.76842 14.4504 3.30221Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4504 9.00002C14.4504 8.53382 14.8284 8.15588 15.2946 8.15588H28.4933C28.9595 8.15588 29.3374 8.53382 29.3374 9.00002C29.3374 9.46623 28.9595 9.84417 28.4933 9.84417H15.2946C14.8284 9.84417 14.4504 9.46623 14.4504 9.00002Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4504 14.6978C14.4504 14.2316 14.8284 13.8537 15.2946 13.8537H28.4933C28.9595 13.8537 29.3374 14.2316 29.3374 14.6978C29.3374 15.164 28.9595 15.542 28.4933 15.542H15.2946C14.8284 15.542 14.4504 15.164 14.4504 14.6978Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M1.94549 6.87377C2.27514 6.54411 2.80962 6.54411 3.13928 6.87377L6.23458 9.96907L9.32988 6.87377C9.65954 6.54411 10.194 6.54411 10.5237 6.87377C10.8533 7.20343 10.8533 7.73791 10.5237 8.06756L6.23458 12.3567L1.94549 8.06756C1.61583 7.73791 1.61583 7.20343 1.94549 6.87377Z" fill="currentColor"></path></svg>
			
		</button>
	
	
	</div></li>
		<li><hr class="h-5 w-0.5 border-none bg-gray-100 dark:bg-gray-800"></li>
		<li><a class="block cursor-pointer whitespace-nowrap px-2 py-0.5 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-100" href="/login">Log In
				</a></li>
			<li><a class="whitespace-nowrap rounded-full border border-transparent bg-gray-900 px-3 py-1 leading-none text-white hover:border-black hover:bg-white hover:text-black" href="/join">Sign Up
					</a></li></ul></nav></div></header></div>
	
	
	
	<div class="SVELTE_HYDRATER contents" data-target="SSOBanner" data-props="{}"></div>
	
	

	<main class="flex flex-1 flex-col">
	<div class="SVELTE_HYDRATER contents" data-target="DatasetHeader" data-props="{&quot;activeTab&quot;:&quot;datasetCard&quot;,&quot;author&quot;:{&quot;_id&quot;:&quot;6304061c0547362a22a76a17&quot;,&quot;avatarUrl&quot;:&quot;https://cdn-avatars.huggingface.co/v1/production/uploads/1661339692442-6304061c0547362a22a76a17.jpeg&quot;,&quot;fullname&quot;:&quot;Jean Kaddour&quot;,&quot;name&quot;:&quot;JeanKaddour&quot;,&quot;type&quot;:&quot;user&quot;,&quot;isPro&quot;:false,&quot;isHf&quot;:false,&quot;isHfAdmin&quot;:false,&quot;isMod&quot;:false,&quot;followerCount&quot;:5},&quot;canReadRepoSettings&quot;:false,&quot;dataset&quot;:{&quot;author&quot;:&quot;JeanKaddour&quot;,&quot;cardData&quot;:{&quot;dataset_info&quot;:{&quot;features&quot;:[{&quot;name&quot;:&quot;text&quot;,&quot;dtype&quot;:&quot;string&quot;}],&quot;splits&quot;:[{&quot;name&quot;:&quot;train&quot;,&quot;num_bytes&quot;:5906108510,&quot;num_examples&quot;:1000000},{&quot;name&quot;:&quot;validation&quot;,&quot;num_bytes&quot;:2779386,&quot;num_examples&quot;:500},{&quot;name&quot;:&quot;test&quot;,&quot;num_bytes&quot;:58558191,&quot;num_examples&quot;:10000}],&quot;download_size&quot;:3177432813,&quot;dataset_size&quot;:5967446087},&quot;annotations_creators&quot;:[&quot;no-annotation&quot;],&quot;language_creators&quot;:[&quot;found&quot;],&quot;language&quot;:[&quot;en&quot;],&quot;license&quot;:&quot;other&quot;,&quot;multilinguality&quot;:[&quot;monolingual&quot;],&quot;pretty_name&quot;:&quot;MiniPile&quot;,&quot;size_categories&quot;:[&quot;1M<n<10M&quot;],&quot;source_datasets&quot;:[&quot;original&quot;],&quot;task_categories&quot;:[&quot;text-generation&quot;,&quot;fill-mask&quot;],&quot;task_ids&quot;:[&quot;language-modeling&quot;,&quot;masked-language-modeling&quot;],&quot;paperswithcode_id&quot;:&quot;minipile&quot;},&quot;cardExists&quot;:true,&quot;createdAt&quot;:&quot;2023-04-09T20:32:58.000Z&quot;,&quot;description&quot;:&quot;\n\t\n\t\t\n\t\n\t\n\t\tDataset Card for MiniPile\n\t\n\n\n\t\n\t\t\n\t\n\t\n\t\tDataset Description\n\t\n\nThe MiniPile Challenge for Data-Efficient Language Models\n\n\t\n\t\t\n\t\n\t\n\t\tDataset Summary\n\t\n\nMiniPile is a 6GB subset of the deduplicated The Pile corpus. To curate MiniPile, we perform a simple, three-step data filtering process: we (1) infer embeddings for all documents of the Pile, (2) cluster the embedding space using k-means, and (3) filter out low-quality clusters.\nThe primary motivation for curating MiniPile is that… See the full description on the dataset page: https://huggingface.co/datasets/JeanKaddour/minipile.&quot;,&quot;downloads&quot;:2697,&quot;downloadsAllTime&quot;:236072,&quot;id&quot;:&quot;JeanKaddour/minipile&quot;,&quot;isLikedByUser&quot;:false,&quot;lastModified&quot;:&quot;2023-06-20T10:08:26.000Z&quot;,&quot;likes&quot;:120,&quot;paperswithcode_id&quot;:&quot;minipile&quot;,&quot;datasetsServerInfo&quot;:{&quot;viewer&quot;:&quot;viewer&quot;,&quot;numRows&quot;:1010500,&quot;libraries&quot;:[&quot;datasets&quot;,&quot;dask&quot;,&quot;mlcroissant&quot;,&quot;polars&quot;],&quot;formats&quot;:[&quot;parquet&quot;],&quot;modalities&quot;:[&quot;text&quot;]},&quot;discussionsDisabled&quot;:false,&quot;repoType&quot;:&quot;dataset&quot;,&quot;private&quot;:false,&quot;gated&quot;:false,&quot;tags&quot;:[&quot;task_categories:text-generation&quot;,&quot;task_categories:fill-mask&quot;,&quot;task_ids:language-modeling&quot;,&quot;task_ids:masked-language-modeling&quot;,&quot;annotations_creators:no-annotation&quot;,&quot;language_creators:found&quot;,&quot;multilinguality:monolingual&quot;,&quot;source_datasets:original&quot;,&quot;language:en&quot;,&quot;license:other&quot;,&quot;size_categories:1M<n<10M&quot;,&quot;format:parquet&quot;,&quot;modality:text&quot;,&quot;library:datasets&quot;,&quot;library:dask&quot;,&quot;library:mlcroissant&quot;,&quot;library:polars&quot;,&quot;arxiv:2304.08442&quot;,&quot;arxiv:2201.07311&quot;,&quot;region:us&quot;],&quot;tag_objs&quot;:[{&quot;id&quot;:&quot;task_categories:text-generation&quot;,&quot;label&quot;:&quot;text-generation&quot;,&quot;type&quot;:&quot;task_categories&quot;,&quot;subType&quot;:&quot;nlp&quot;},{&quot;id&quot;:&quot;task_categories:fill-mask&quot;,&quot;label&quot;:&quot;fill-mask&quot;,&quot;type&quot;:&quot;task_categories&quot;,&quot;subType&quot;:&quot;nlp&quot;},{&quot;id&quot;:&quot;task_ids:language-modeling&quot;,&quot;label&quot;:&quot;language-modeling&quot;,&quot;type&quot;:&quot;task_ids&quot;},{&quot;id&quot;:&quot;task_ids:masked-language-modeling&quot;,&quot;label&quot;:&quot;masked-language-modeling&quot;,&quot;type&quot;:&quot;task_ids&quot;},{&quot;id&quot;:&quot;annotations_creators:no-annotation&quot;,&quot;label&quot;:&quot;no-annotation&quot;,&quot;type&quot;:&quot;annotations_creators&quot;},{&quot;id&quot;:&quot;language_creators:found&quot;,&quot;label&quot;:&quot;found&quot;,&quot;type&quot;:&quot;language_creators&quot;},{&quot;id&quot;:&quot;multilinguality:monolingual&quot;,&quot;label&quot;:&quot;monolingual&quot;,&quot;type&quot;:&quot;multilinguality&quot;},{&quot;id&quot;:&quot;source_datasets:original&quot;,&quot;label&quot;:&quot;original&quot;,&quot;type&quot;:&quot;source_datasets&quot;},{&quot;id&quot;:&quot;language:en&quot;,&quot;label&quot;:&quot;English&quot;,&quot;type&quot;:&quot;language&quot;},{&quot;id&quot;:&quot;license:other&quot;,&quot;label&quot;:&quot;other&quot;,&quot;type&quot;:&quot;license&quot;},{&quot;id&quot;:&quot;size_categories:1M<n<10M&quot;,&quot;label&quot;:&quot;1M - 10M&quot;,&quot;type&quot;:&quot;size_categories&quot;},{&quot;id&quot;:&quot;format:parquet&quot;,&quot;label&quot;:&quot;parquet&quot;,&quot;type&quot;:&quot;format&quot;},{&quot;id&quot;:&quot;modality:text&quot;,&quot;label&quot;:&quot;Text&quot;,&quot;type&quot;:&quot;modality&quot;},{&quot;id&quot;:&quot;library:datasets&quot;,&quot;label&quot;:&quot;Datasets&quot;,&quot;type&quot;:&quot;library&quot;},{&quot;id&quot;:&quot;library:dask&quot;,&quot;label&quot;:&quot;Dask&quot;,&quot;type&quot;:&quot;library&quot;},{&quot;id&quot;:&quot;library:mlcroissant&quot;,&quot;label&quot;:&quot;Croissant&quot;,&quot;type&quot;:&quot;library&quot;},{&quot;id&quot;:&quot;library:polars&quot;,&quot;label&quot;:&quot;Polars&quot;,&quot;type&quot;:&quot;library&quot;},{&quot;id&quot;:&quot;arxiv:2304.08442&quot;,&quot;label&quot;:&quot;arxiv:2304.08442&quot;,&quot;type&quot;:&quot;arxiv&quot;,&quot;extra&quot;:{&quot;paperTitle&quot;:&quot;The MiniPile Challenge for Data-Efficient Language Models&quot;}},{&quot;id&quot;:&quot;arxiv:2201.07311&quot;,&quot;label&quot;:&quot;arxiv:2201.07311&quot;,&quot;type&quot;:&quot;arxiv&quot;,&quot;extra&quot;:{&quot;paperTitle&quot;:&quot;Datasheet for the Pile&quot;}},{&quot;type&quot;:&quot;region&quot;,&quot;label&quot;:&quot;🇺🇸 Region: US&quot;,&quot;id&quot;:&quot;region:us&quot;}],&quot;hasBlockedOids&quot;:false,&quot;region&quot;:&quot;us&quot;,&quot;xetEnabled&quot;:false},&quot;discussionsStats&quot;:{&quot;closed&quot;:1,&quot;open&quot;:2,&quot;total&quot;:3}}"><header class="bg-linear-to-t border-b border-gray-100 pt-6 sm:pt-9 from-gray-50-to-white via-white dark:via-gray-950"><div class="container relative "><h1 class="flex flex-wrap items-center max-md:leading-tight mb-3 text-lg max-sm:gap-y-1.5 md:text-xl"><a href="/datasets" class="group flex items-center"><svg class="sm:mr-1.5 -mr-1 text-gray-400" style="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 25 25"><ellipse cx="12.5" cy="5" fill="currentColor" fill-opacity="0.25" rx="7.5" ry="2"></ellipse><path d="M12.5 15C16.6421 15 20 14.1046 20 13V20C20 21.1046 16.6421 22 12.5 22C8.35786 22 5 21.1046 5 20V13C5 14.1046 8.35786 15 12.5 15Z" fill="currentColor" opacity="0.5"></path><path d="M12.5 7C16.6421 7 20 6.10457 20 5V11.5C20 12.6046 16.6421 13.5 12.5 13.5C8.35786 13.5 5 12.6046 5 11.5V5C5 6.10457 8.35786 7 12.5 7Z" fill="currentColor" opacity="0.5"></path><path d="M5.23628 12C5.08204 12.1598 5 12.8273 5 13C5 14.1046 8.35786 15 12.5 15C16.6421 15 20 14.1046 20 13C20 12.8273 19.918 12.1598 19.7637 12C18.9311 12.8626 15.9947 13.5 12.5 13.5C9.0053 13.5 6.06886 12.8626 5.23628 12Z" fill="currentColor"></path></svg>
					<span class="mr-2.5 font-semibold text-gray-400 group-hover:text-gray-500 max-sm:hidden">Datasets:</span></a>
				<hr class="mx-1.5 h-2 translate-y-px rounded-sm border-r dark:border-gray-600 sm:hidden">
			<div class="group flex flex-none items-center"><div class="relative mr-1 flex items-center">

			

<span class="inline-block "><span class="contents"><a href="/JeanKaddour" class="text-gray-400 hover:text-blue-600"><img alt="" class="w-3.5 h-3.5 rounded-full  flex-none" src="https://cdn-avatars.huggingface.co/v1/production/uploads/1661339692442-6304061c0547362a22a76a17.jpeg" crossorigin="anonymous"></a></span>
	</span></div>
		

<span class="inline-block "><span class="contents"><a href="/JeanKaddour" class="text-gray-400 hover:text-blue-600">JeanKaddour</a></span>
	</span>
		<div class="mx-0.5 text-gray-300">/</div></div>

<div class="max-w-full "><a class="break-words font-mono font-semibold hover:text-blue-600 " href="/datasets/JeanKaddour/minipile">minipile</a>
	<button class="relative text-sm mr-4 focus:outline-hidden inline-flex cursor-pointer items-center text-sm  mx-0.5   text-gray-600 " title="Copy dataset name to clipboard" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg>
	
	</button></div>
			<div class="inline-flex items-center overflow-hidden whitespace-nowrap rounded-md border bg-white text-sm leading-none text-gray-500  mr-2"><button class="relative flex items-center overflow-hidden from-red-50 to-transparent dark:from-red-900 px-1.5 py-1 hover:bg-linear-to-t focus:outline-hidden"  title="Like"><svg class="left-1.5 absolute" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" fill="currentColor"><path d="M22.45,6a5.47,5.47,0,0,1,3.91,1.64,5.7,5.7,0,0,1,0,8L16,26.13,5.64,15.64a5.7,5.7,0,0,1,0-8,5.48,5.48,0,0,1,7.82,0L16,10.24l2.53-2.58A5.44,5.44,0,0,1,22.45,6m0-2a7.47,7.47,0,0,0-5.34,2.24L16,7.36,14.89,6.24a7.49,7.49,0,0,0-10.68,0,7.72,7.72,0,0,0,0,10.82L16,29,27.79,17.06a7.72,7.72,0,0,0,0-10.82A7.49,7.49,0,0,0,22.45,4Z"></path></svg>

		
		<span class="ml-4 pl-0.5 ">like</span></button>
	<button class="focus:outline-hidden flex items-center border-l px-1.5 py-1 text-gray-400 hover:bg-gray-50 focus:bg-gray-100 dark:hover:bg-gray-900 dark:focus:bg-gray-800" title="See users who liked this repository">120</button></div>




			
			
	</h1>
		<div class="mb-3 flex flex-wrap md:mb-4"><div class="mr-1 flex flex-wrap items-center"><span class="mb-1 mr-1 p-1 text-sm leading-tight text-gray-400 md:mb-1.5">Tasks:
	</span>
	<a class="mb-1 mr-1 md:mb-1.5 md:mr-1.5 rounded-lg" href="/datasets?task_categories=task_categories%3Atext-generation"><div class="tag tag-white   "><div class="tag-ico -ml-2 tag-ico-indigo"><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 18 18"><path d="M16.2607 8.08202L14.468 6.28928C14.3063 6.12804 14.0873 6.03749 13.859 6.03749C13.6307 6.03749 13.4117 6.12804 13.25 6.28928L5.6375 13.904V16.9125H8.64607L16.2607 9.30002C16.422 9.13836 16.5125 8.91935 16.5125 8.69102C16.5125 8.4627 16.422 8.24369 16.2607 8.08202V8.08202ZM8.1953 15.825H6.725V14.3547L11.858 9.22118L13.3288 10.6915L8.1953 15.825ZM14.0982 9.92262L12.6279 8.45232L13.8606 7.21964L15.3309 8.68994L14.0982 9.92262Z"></path><path d="M6.18125 9.84373H7.26875V6.03748H8.9V4.94998H4.55V6.03748H6.18125V9.84373Z"></path><path d="M4.55 11.475H2.375V2.775H11.075V4.95H12.1625V2.775C12.1625 2.48658 12.0479 2.20997 11.844 2.00602C11.64 1.80208 11.3634 1.6875 11.075 1.6875H2.375C2.08658 1.6875 1.80997 1.80208 1.60602 2.00602C1.40207 2.20997 1.2875 2.48658 1.2875 2.775V11.475C1.2875 11.7634 1.40207 12.04 1.60602 12.244C1.80997 12.4479 2.08658 12.5625 2.375 12.5625H4.55V11.475Z"></path></svg></div>

	

	<span>Text Generation</span>
	

	</div></a><a class="mb-1 mr-1 md:mb-1.5 md:mr-1.5 rounded-lg" href="/datasets?task_categories=task_categories%3Afill-mask"><div class="tag tag-white   "><div class="tag-ico -ml-2 tag-ico-red"><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 18 19"><path d="M12.3625 13.85H10.1875V12.7625H12.3625V10.5875H13.45V12.7625C13.4497 13.0508 13.335 13.3272 13.1312 13.5311C12.9273 13.735 12.6508 13.8497 12.3625 13.85V13.85Z"></path><path d="M5.8375 8.41246H4.75V6.23746C4.75029 5.94913 4.86496 5.67269 5.06884 5.4688C5.27272 5.26492 5.54917 5.15025 5.8375 5.14996H8.0125V6.23746H5.8375V8.41246Z"></path><path d="M15.625 5.14998H13.45V2.97498C13.4497 2.68665 13.335 2.4102 13.1312 2.20632C12.9273 2.00244 12.6508 1.88777 12.3625 1.88748H2.575C2.28666 1.88777 2.01022 2.00244 1.80633 2.20632C1.60245 2.4102 1.48778 2.68665 1.4875 2.97498V12.7625C1.48778 13.0508 1.60245 13.3273 1.80633 13.5311C2.01022 13.735 2.28666 13.8497 2.575 13.85H4.75V16.025C4.75028 16.3133 4.86495 16.5898 5.06883 16.7936C5.27272 16.9975 5.54916 17.1122 5.8375 17.1125H15.625C15.9133 17.1122 16.1898 16.9975 16.3937 16.7936C16.5975 16.5898 16.7122 16.3133 16.7125 16.025V6.23748C16.7122 5.94915 16.5975 5.6727 16.3937 5.46882C16.1898 5.26494 15.9133 5.15027 15.625 5.14998V5.14998ZM15.625 16.025H5.8375V13.85H8.0125V12.7625H5.8375V10.5875H4.75V12.7625H2.575V2.97498H12.3625V5.14998H10.1875V6.23748H12.3625V8.41248H13.45V6.23748H15.625V16.025Z"></path></svg></div>

	

	<span>Fill-Mask</span>
	

	</div></a>

	</div><div class="mr-1 flex flex-wrap items-center"><span class="mb-1 mr-1 p-1 text-sm leading-tight text-gray-400 md:mb-1.5">Modalities:
	</span>
	<a class="mb-1 mr-1 md:mb-1.5 md:mr-1.5 rounded-lg" href="/datasets?modality=modality%3Atext"><div class="tag tag-white   ">
		<svg class="text-red-700 dark:text-red-600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.619 4.619C2.667 6.573 2.667 9.715 2.667 16s0 9.428 1.952 11.38C6.573 29.333 9.715 29.333 16 29.333s9.428 0 11.38-1.953c1.953-1.95 1.953-5.095 1.953-11.38s0-9.428-1.953-11.381C25.43 2.667 22.285 2.667 16 2.667s-9.428 0-11.381 1.952m8.65 3.714c-.573 0-1.109 0-1.546.066-.495.073-1.003.248-1.41.7-.392.436-.53.956-.59 1.452-.056.464-.056 1.04-.056 1.689V13a1 1 0 1 0 2 0v-.704c0-.724.001-1.176.041-1.505q.015-.15.061-.294a.2.2 0 0 1 .031-.061q0-.003.016-.01a.8.8 0 0 1 .203-.05c.272-.04.654-.043 1.314-.043H15v11.334h-2.333a1 1 0 1 0 0 2H20a1 1 0 0 0 0-2h-3V10.333h1.667c.66 0 1.042.003 1.314.043.123.019.18.04.203.05l.015.009a.2.2 0 0 1 .032.061c.018.05.042.14.061.295.04.329.041.781.041 1.506V13a1 1 0 1 0 2 0v-.76c0-.65 0-1.225-.056-1.69-.06-.495-.198-1.015-.59-1.453-.407-.45-.915-.625-1.41-.698-.437-.067-.973-.067-1.546-.066z" fill="currentColor"></path></svg>

	

	<span>Text</span>
	

	</div></a>

	</div><div class="mr-1 flex flex-wrap items-center"><span class="mb-1 mr-1 p-1 text-sm leading-tight text-gray-400 md:mb-1.5">Formats:
	</span>
	<a class="mb-1 mr-1 md:mb-1.5 md:mr-1.5 rounded-lg" href="/datasets?format=format%3Aparquet"><div class="tag tag-white   ">
		<svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 34 34"><path fill-rule="evenodd" clip-rule="evenodd" d="m17.97 18.44-3.98-2.3-7.1 3.78 3.98 2.3 7.1-3.78Zm15.1-1.4-3.99-2.3-16.22 8.63 3.98 2.3 16.22-8.63Zm-5.98-3.45-3.97-2.3-7.1 3.78 3.98 2.3 7.1-3.78Zm-9.94-5.74 3.98 2.3-11.16 5.93L6 13.78l11.16-5.93Zm-13.19 7 3.98 2.3-3.04 1.62-3.98-2.3 3.04-1.61Z" fill="currentColor"></path></svg>

	

	<span>parquet</span>
	

	</div></a>

	</div><div class="mr-1 flex flex-wrap items-center"><span class="mb-1 mr-1 p-1 text-sm leading-tight text-gray-400 md:mb-1.5">Sub-tasks:
	</span>
	<a class="mb-1 mr-1 md:mb-1.5 md:mr-1.5 rounded-lg" href="/datasets?task_ids=task_ids%3Alanguage-modeling"><div class="tag tag-white   ">

	

	<span>language-modeling</span>
	

	</div></a><a class="mb-1 mr-1 md:mb-1.5 md:mr-1.5 rounded-lg" href="/datasets?task_ids=task_ids%3Amasked-language-modeling"><div class="tag tag-white   ">

	

	<span>masked-language-modeling</span>
	

	</div></a>

	</div><div class="mr-1 flex flex-wrap items-center"><span class="mb-1 mr-1 p-1 text-sm leading-tight text-gray-400 md:mb-1.5">Languages:
	</span>
	<a class="mb-1 mr-1 md:mb-1.5 md:mr-1.5 rounded-lg" href="/datasets?language=language%3Aen"><div class="tag tag-white   ">
		<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="text-green-600/80" preserveAspectRatio="xMidYMid meet" width="1em" height="1em" viewBox="0 0 10 10"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.625 5C0.625 6.16032 1.08594 7.27312 1.90641 8.09359C2.72688 8.91406 3.83968 9.375 5 9.375C6.16032 9.375 7.27312 8.91406 8.09359 8.09359C8.91406 7.27312 9.375 6.16032 9.375 5C9.375 3.83968 8.91406 2.72688 8.09359 1.90641C7.27312 1.08594 6.16032 0.625 5 0.625C3.83968 0.625 2.72688 1.08594 1.90641 1.90641C1.08594 2.72688 0.625 3.83968 0.625 5ZM7.64365 7.48027C7.61734 7.50832 7.59054 7.53598 7.56326 7.56326C7.13828 7.98824 6.61864 8.2968 6.0539 8.46842C6.29802 8.11949 6.49498 7.64804 6.63475 7.09483C7.00845 7.18834 7.35014 7.3187 7.64365 7.48027ZM8.10076 6.87776C8.37677 6.42196 8.55005 5.90894 8.60556 5.37499H6.86808C6.85542 5.71597 6.82551 6.04557 6.77971 6.35841C7.25309 6.47355 7.68808 6.6414 8.062 6.85549C8.07497 6.86283 8.08789 6.87025 8.10076 6.87776ZM6.03795 6.22536C6.07708 5.95737 6.1044 5.67232 6.11705 5.37499H3.88295C3.89666 5.69742 3.92764 6.00542 3.9722 6.29287C4.37075 6.21726 4.79213 6.17749 5.224 6.17749C5.50054 6.17749 5.77294 6.19376 6.03795 6.22536ZM4.1261 7.02673C4.34894 7.84835 4.68681 8.375 5 8.375C5.32122 8.375 5.66839 7.82101 5.8908 6.963C5.67389 6.93928 5.45082 6.92699 5.224 6.92699C4.84316 6.92699 4.47332 6.96176 4.1261 7.02673ZM3.39783 7.21853C3.53498 7.71842 3.72038 8.14579 3.9461 8.46842C3.42141 8.30898 2.93566 8.03132 2.52857 7.65192C2.77253 7.48017 3.06711 7.33382 3.39783 7.21853ZM3.23916 6.48077C3.18263 6.13193 3.14625 5.76074 3.13192 5.37499H1.39444C1.4585 5.99112 1.67936 6.57938 2.03393 7.08403C2.3706 6.83531 2.78055 6.63162 3.23916 6.48077ZM1.39444 4.62499H3.13192C3.14615 4.24204 3.18211 3.87344 3.23794 3.52681C2.77814 3.37545 2.36731 3.17096 2.03024 2.92123C1.67783 3.42469 1.45828 4.011 1.39444 4.62499ZM2.5237 2.35262C2.76812 2.52552 3.06373 2.67281 3.39584 2.78875C3.53318 2.28573 3.71928 1.85578 3.9461 1.53158C3.41932 1.69166 2.93178 1.97089 2.5237 2.35262ZM3.97101 3.71489C3.92709 4.00012 3.89654 4.30547 3.88295 4.62499H6.11705C6.10453 4.33057 6.07761 4.04818 6.03909 3.78248C5.77372 3.81417 5.50093 3.83049 5.224 3.83049C4.79169 3.83049 4.3699 3.79065 3.97101 3.71489ZM5.8928 3.04476C5.67527 3.06863 5.45151 3.08099 5.224 3.08099C4.84241 3.08099 4.47186 3.04609 4.12405 2.98086C4.34686 2.1549 4.68584 1.625 5 1.625C5.32218 1.625 5.67048 2.18233 5.8928 3.04476ZM6.78083 3.6493C6.826 3.95984 6.85552 4.28682 6.86808 4.62499H8.60556C8.55029 4.09337 8.37827 3.58251 8.10436 3.1282C8.0903 3.1364 8.07618 3.14449 8.062 3.15249C7.68838 3.36641 7.25378 3.53417 6.78083 3.6493ZM7.64858 2.52499C7.35446 2.68754 7.0117 2.81868 6.63664 2.91268C6.49676 2.35623 6.29913 1.88209 6.0539 1.53158C6.61864 1.7032 7.13828 2.01176 7.56326 2.43674C7.59224 2.46572 7.62068 2.49514 7.64858 2.52499Z" fill="currentColor"></path></svg>

	

	<span>English</span>
	

	</div></a>

	</div><div class="mr-1 flex flex-wrap items-center"><span class="mb-1 mr-1 p-1 text-sm leading-tight text-gray-400 md:mb-1.5">Size:
	</span>
	<a class="mb-1 mr-1 md:mb-1.5 md:mr-1.5 rounded-lg" href="/datasets?size_categories=size_categories%3A1M%3Cn%3C10M"><div class="tag tag-white   ">

	

	<span>1M - 10M</span>
	

	</div></a>

	</div><div class="mr-1 flex flex-wrap items-center"><span class="mb-1 mr-1 p-1 text-sm leading-tight text-gray-400 md:mb-1.5">ArXiv:
	</span>
	

	<div class="relative inline-block ">
	<button class="group mr-1 mb-1 md:mr-1.5 md:mb-1.5  rounded-full rounded-br-none " type="button">
		<div class="tag tag-white rounded-full  relative rounded-br-none pr-2.5">
		<svg class="-mr-1 text-gray-400" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" viewBox="0 0 12 12" preserveAspectRatio="xMidYMid meet" fill="none"><path fill="currentColor" fill-rule="evenodd" d="M8.007 1.814a1.176 1.176 0 0 0-.732-.266H3.088c-.64 0-1.153.512-1.153 1.152v6.803c0 .64.513 1.152 1.153 1.152h5.54c.632 0 1.144-.511 1.144-1.152V3.816c0-.338-.137-.658-.412-.887L8.007 1.814Zm-1.875 1.81c0 .695.55 1.253 1.244 1.253h.983a.567.567 0 0 1 .553.585v4.041c0 .165-.119.302-.283.302h-5.55c-.156 0-.275-.137-.275-.302V2.7a.284.284 0 0 1 .284-.301h2.468a.574.574 0 0 1 .434.19.567.567 0 0 1 .142.395v.64Z" clip-rule="evenodd"></path><path fill="currentColor" fill-opacity=".2" fill-rule="evenodd" d="M6.132 3.624c0 .695.55 1.253 1.244 1.253h.97a.567.567 0 0 1 .566.585v4.041c0 .165-.119.302-.283.302h-5.55c-.156 0-.275-.137-.275-.302V2.7a.284.284 0 0 1 .284-.301h2.468a.567.567 0 0 1 .576.585v.64Z" clip-rule="evenodd"></path></svg>

	

	<span class="-mr-2 text-gray-400">arxiv:</span>
		<span>2304.08442</span>
	

	<div class="border-br-gray-200 absolute bottom-0.5 right-0.5 h-1 w-1 border-[3px] border-l-transparent border-t-transparent border-b-gray-200 border-r-gray-200 dark:border-b-gray-700 dark:border-r-gray-700"></div></div>
		
		</button>
	
	
	</div>

	<div class="relative inline-block ">
	<button class="group mr-1 mb-1 md:mr-1.5 md:mb-1.5  rounded-full rounded-br-none " type="button">
		<div class="tag tag-white rounded-full  relative rounded-br-none pr-2.5">
		<svg class="-mr-1 text-gray-400" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" viewBox="0 0 12 12" preserveAspectRatio="xMidYMid meet" fill="none"><path fill="currentColor" fill-rule="evenodd" d="M8.007 1.814a1.176 1.176 0 0 0-.732-.266H3.088c-.64 0-1.153.512-1.153 1.152v6.803c0 .64.513 1.152 1.153 1.152h5.54c.632 0 1.144-.511 1.144-1.152V3.816c0-.338-.137-.658-.412-.887L8.007 1.814Zm-1.875 1.81c0 .695.55 1.253 1.244 1.253h.983a.567.567 0 0 1 .553.585v4.041c0 .165-.119.302-.283.302h-5.55c-.156 0-.275-.137-.275-.302V2.7a.284.284 0 0 1 .284-.301h2.468a.574.574 0 0 1 .434.19.567.567 0 0 1 .142.395v.64Z" clip-rule="evenodd"></path><path fill="currentColor" fill-opacity=".2" fill-rule="evenodd" d="M6.132 3.624c0 .695.55 1.253 1.244 1.253h.97a.567.567 0 0 1 .566.585v4.041c0 .165-.119.302-.283.302h-5.55c-.156 0-.275-.137-.275-.302V2.7a.284.284 0 0 1 .284-.301h2.468a.567.567 0 0 1 .576.585v.64Z" clip-rule="evenodd"></path></svg>

	

	<span class="-mr-2 text-gray-400">arxiv:</span>
		<span>2201.07311</span>
	

	<div class="border-br-gray-200 absolute bottom-0.5 right-0.5 h-1 w-1 border-[3px] border-l-transparent border-t-transparent border-b-gray-200 border-r-gray-200 dark:border-b-gray-700 dark:border-r-gray-700"></div></div>
		
		</button>
	
	
	</div>

	</div><div class="mr-1 flex flex-wrap items-center"><span class="mb-1 mr-1 p-1 text-sm leading-tight text-gray-400 md:mb-1.5">Libraries:
	</span>
	<a class="mb-1 mr-1 md:mb-1.5 md:mr-1.5 rounded-lg" href="/datasets?library=library%3Adatasets"><div class="tag tag-white   "><svg class="text-black inline-block text-sm" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" preserveAspectRatio="xMidYMid meet" width="1em" height="1em" viewBox="0 0 95 88"><path fill="#fff" d="M94.25 70.08a8.28 8.28 0 0 1-.43 6.46 10.57 10.57 0 0 1-3 3.6 25.18 25.18 0 0 1-5.7 3.2 65.74 65.74 0 0 1-7.56 2.65 46.67 46.67 0 0 1-11.42 1.68c-5.42.05-10.09-1.23-13.4-4.5a40.4 40.4 0 0 1-10.14.03c-3.34 3.25-7.99 4.52-13.39 4.47a46.82 46.82 0 0 1-11.43-1.68 66.37 66.37 0 0 1-7.55-2.65c-2.28-.98-4.17-2-5.68-3.2a10.5 10.5 0 0 1-3.02-3.6c-.99-2-1.18-4.3-.42-6.46a8.54 8.54 0 0 1-.33-5.63c.25-.95.66-1.83 1.18-2.61a8.67 8.67 0 0 1 2.1-8.47 8.23 8.23 0 0 1 2.82-2.07 41.75 41.75 0 1 1 81.3-.12 8.27 8.27 0 0 1 3.11 2.19 8.7 8.7 0 0 1 2.1 8.47c.52.78.93 1.66 1.18 2.61a8.61 8.61 0 0 1-.32 5.63Z"></path><path fill="#FFD21E" d="M47.21 76.5a34.75 34.75 0 1 0 0-69.5 34.75 34.75 0 0 0 0 69.5Z"></path><path fill="#FF9D0B" d="M81.96 41.75a34.75 34.75 0 1 0-69.5 0 34.75 34.75 0 0 0 69.5 0Zm-73.5 0a38.75 38.75 0 1 1 77.5 0 38.75 38.75 0 0 1-77.5 0Z"></path><path fill="#3A3B45" d="M58.5 32.3c1.28.44 1.78 3.06 3.07 2.38a5 5 0 1 0-6.76-2.07c.61 1.15 2.55-.72 3.7-.32ZM34.95 32.3c-1.28.44-1.79 3.06-3.07 2.38a5 5 0 1 1 6.76-2.07c-.61 1.15-2.56-.72-3.7-.32Z"></path><path fill="#FF323D" d="M46.96 56.29c9.83 0 13-8.76 13-13.26 0-2.34-1.57-1.6-4.09-.36-2.33 1.15-5.46 2.74-8.9 2.74-7.19 0-13-6.88-13-2.38s3.16 13.26 13 13.26Z"></path><path fill="#3A3B45" fill-rule="evenodd" d="M39.43 54a8.7 8.7 0 0 1 5.3-4.49c.4-.12.81.57 1.24 1.28.4.68.82 1.37 1.24 1.37.45 0 .9-.68 1.33-1.35.45-.7.89-1.38 1.32-1.25a8.61 8.61 0 0 1 5 4.17c3.73-2.94 5.1-7.74 5.1-10.7 0-2.34-1.57-1.6-4.09-.36l-.14.07c-2.31 1.15-5.39 2.67-8.77 2.67s-6.45-1.52-8.77-2.67c-2.6-1.29-4.23-2.1-4.23.29 0 3.05 1.46 8.06 5.47 10.97Z" clip-rule="evenodd"></path><path fill="#FF9D0B" d="M70.71 37a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5ZM24.21 37a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5ZM17.52 48c-1.62 0-3.06.66-4.07 1.87a5.97 5.97 0 0 0-1.33 3.76 7.1 7.1 0 0 0-1.94-.3c-1.55 0-2.95.59-3.94 1.66a5.8 5.8 0 0 0-.8 7 5.3 5.3 0 0 0-1.79 2.82c-.24.9-.48 2.8.8 4.74a5.22 5.22 0 0 0-.37 5.02c1.02 2.32 3.57 4.14 8.52 6.1 3.07 1.22 5.89 2 5.91 2.01a44.33 44.33 0 0 0 10.93 1.6c5.86 0 10.05-1.8 12.46-5.34 3.88-5.69 3.33-10.9-1.7-15.92-2.77-2.78-4.62-6.87-5-7.77-.78-2.66-2.84-5.62-6.25-5.62a5.7 5.7 0 0 0-4.6 2.46c-1-1.26-1.98-2.25-2.86-2.82A7.4 7.4 0 0 0 17.52 48Zm0 4c.51 0 1.14.22 1.82.65 2.14 1.36 6.25 8.43 7.76 11.18.5.92 1.37 1.31 2.14 1.31 1.55 0 2.75-1.53.15-3.48-3.92-2.93-2.55-7.72-.68-8.01.08-.02.17-.02.24-.02 1.7 0 2.45 2.93 2.45 2.93s2.2 5.52 5.98 9.3c3.77 3.77 3.97 6.8 1.22 10.83-1.88 2.75-5.47 3.58-9.16 3.58-3.81 0-7.73-.9-9.92-1.46-.11-.03-13.45-3.8-11.76-7 .28-.54.75-.76 1.34-.76 2.38 0 6.7 3.54 8.57 3.54.41 0 .7-.17.83-.6.79-2.85-12.06-4.05-10.98-8.17.2-.73.71-1.02 1.44-1.02 3.14 0 10.2 5.53 11.68 5.53.11 0 .2-.03.24-.1.74-1.2.33-2.04-4.9-5.2-5.21-3.16-8.88-5.06-6.8-7.33.24-.26.58-.38 1-.38 3.17 0 10.66 6.82 10.66 6.82s2.02 2.1 3.25 2.1c.28 0 .52-.1.68-.38.86-1.46-8.06-8.22-8.56-11.01-.34-1.9.24-2.85 1.31-2.85Z"></path><path fill="#FFD21E" d="M38.6 76.69c2.75-4.04 2.55-7.07-1.22-10.84-3.78-3.77-5.98-9.3-5.98-9.3s-.82-3.2-2.69-2.9c-1.87.3-3.24 5.08.68 8.01 3.91 2.93-.78 4.92-2.29 2.17-1.5-2.75-5.62-9.82-7.76-11.18-2.13-1.35-3.63-.6-3.13 2.2.5 2.79 9.43 9.55 8.56 11-.87 1.47-3.93-1.71-3.93-1.71s-9.57-8.71-11.66-6.44c-2.08 2.27 1.59 4.17 6.8 7.33 5.23 3.16 5.64 4 4.9 5.2-.75 1.2-12.28-8.53-13.36-4.4-1.08 4.11 11.77 5.3 10.98 8.15-.8 2.85-9.06-5.38-10.74-2.18-1.7 3.21 11.65 6.98 11.76 7.01 4.3 1.12 15.25 3.49 19.08-2.12Z"></path><path fill="#FF9D0B" d="M77.4 48c1.62 0 3.07.66 4.07 1.87a5.97 5.97 0 0 1 1.33 3.76 7.1 7.1 0 0 1 1.95-.3c1.55 0 2.95.59 3.94 1.66a5.8 5.8 0 0 1 .8 7 5.3 5.3 0 0 1 1.78 2.82c.24.9.48 2.8-.8 4.74a5.22 5.22 0 0 1 .37 5.02c-1.02 2.32-3.57 4.14-8.51 6.1-3.08 1.22-5.9 2-5.92 2.01a44.33 44.33 0 0 1-10.93 1.6c-5.86 0-10.05-1.8-12.46-5.34-3.88-5.69-3.33-10.9 1.7-15.92 2.78-2.78 4.63-6.87 5.01-7.77.78-2.66 2.83-5.62 6.24-5.62a5.7 5.7 0 0 1 4.6 2.46c1-1.26 1.98-2.25 2.87-2.82A7.4 7.4 0 0 1 77.4 48Zm0 4c-.51 0-1.13.22-1.82.65-2.13 1.36-6.25 8.43-7.76 11.18a2.43 2.43 0 0 1-2.14 1.31c-1.54 0-2.75-1.53-.14-3.48 3.91-2.93 2.54-7.72.67-8.01a1.54 1.54 0 0 0-.24-.02c-1.7 0-2.45 2.93-2.45 2.93s-2.2 5.52-5.97 9.3c-3.78 3.77-3.98 6.8-1.22 10.83 1.87 2.75 5.47 3.58 9.15 3.58 3.82 0 7.73-.9 9.93-1.46.1-.03 13.45-3.8 11.76-7-.29-.54-.75-.76-1.34-.76-2.38 0-6.71 3.54-8.57 3.54-.42 0-.71-.17-.83-.6-.8-2.85 12.05-4.05 10.97-8.17-.19-.73-.7-1.02-1.44-1.02-3.14 0-10.2 5.53-11.68 5.53-.1 0-.19-.03-.23-.1-.74-1.2-.34-2.04 4.88-5.2 5.23-3.16 8.9-5.06 6.8-7.33-.23-.26-.57-.38-.98-.38-3.18 0-10.67 6.82-10.67 6.82s-2.02 2.1-3.24 2.1a.74.74 0 0 1-.68-.38c-.87-1.46 8.05-8.22 8.55-11.01.34-1.9-.24-2.85-1.31-2.85Z"></path><path fill="#FFD21E" d="M56.33 76.69c-2.75-4.04-2.56-7.07 1.22-10.84 3.77-3.77 5.97-9.3 5.97-9.3s.82-3.2 2.7-2.9c1.86.3 3.23 5.08-.68 8.01-3.92 2.93.78 4.92 2.28 2.17 1.51-2.75 5.63-9.82 7.76-11.18 2.13-1.35 3.64-.6 3.13 2.2-.5 2.79-9.42 9.55-8.55 11 .86 1.47 3.92-1.71 3.92-1.71s9.58-8.71 11.66-6.44c2.08 2.27-1.58 4.17-6.8 7.33-5.23 3.16-5.63 4-4.9 5.2.75 1.2 12.28-8.53 13.36-4.4 1.08 4.11-11.76 5.3-10.97 8.15.8 2.85 9.05-5.38 10.74-2.18 1.69 3.21-11.65 6.98-11.76 7.01-4.31 1.12-15.26 3.49-19.08-2.12Z"></path></svg>

	

	<span>Datasets</span>
	

	</div></a><a class="mb-1 mr-1 md:mb-1.5 md:mr-1.5 rounded-lg" href="/datasets?library=library%3Adask"><div class="tag tag-white   "><svg class="text-black inline-block text-sm" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 12 12"><path d="m3.368 3.694 2.965-1.71A.095.095 0 0 0 6.38 1.9V.875a.49.49 0 0 0-.183-.394.468.468 0 0 0-.523-.034L1.526 2.84a.471.471 0 0 0-.235.408l-.002 5.405c0 .151.062.302.183.394.157.118.358.13.524.035l.878-.507a.095.095 0 0 0 .048-.082V4.465a.89.89 0 0 1 .446-.771Z" fill="#FFC11E"></path><path d="M10.475 2.919a.47.47 0 0 0-.47 0L5.856 5.312a.473.473 0 0 0-.236.408l-.002 5.425c0 .17.088.323.236.408a.466.466 0 0 0 .471 0l4.147-2.393a.473.473 0 0 0 .236-.408l.002-5.425a.467.467 0 0 0-.236-.408Z" fill="#EF1161"></path><path d="m5.647 4.949 2.737-1.58a.095.095 0 0 0 .047-.082V2.093a.49.49 0 0 0-.183-.394.468.468 0 0 0-.523-.035l-1.135.655-3.013 1.738a.471.471 0 0 0-.236.408v4.083L3.34 9.87c0 .152.062.302.183.394.157.118.358.13.524.035l1.106-.639a.094.094 0 0 0 .047-.082l.001-3.859a.89.89 0 0 1 .446-.77Z" fill="#FC6E6B"></path></svg>

	

	<span>Dask</span>
	

	</div></a><div class="relative inline-block ">
	<button class="group mr-1 mb-1 md:mr-1.5 md:mb-1.5  rounded-lg rounded-br-none " type="button">
		<div class="tag tag-white   relative rounded-br-none pr-2.5"><svg class="text-black inline-block text-sm" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" fill="none" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M22.2812 12.2656L25.9532 15.7187C26.8932 16.6587 28.0913 17.3931 29.0313 16.4531C29.8594 15.7812 29.9332 14.1 29.9532 13.5C29.9532 11.5625 28.9219 8.375 27.25 6.71875C25.5604 5.04493 23.3782 3.91692 22.7032 3.78125L22.2812 12.2656Z" fill="#F5AB6A"></path><path d="M22.2812 12.2656L25.9532 15.7187C26.8932 16.6587 28.0913 17.3931 29.0313 16.4531C29.8594 15.7812 29.9332 14.1 29.9532 13.5C29.9532 11.5625 28.9219 8.375 27.25 6.71875C25.5604 5.04493 23.3782 3.91692 22.7032 3.78125L22.2812 12.2656Z" fill="url(#paint0_radial_18_31665)"></path><g filter="url(#filter0_f_18_31665)"><path d="M22.2849 12.1817L23.4375 13.2656L24.4375 4.70312C23.5121 4.1242 23.0198 3.96369 22.6563 3.89062L22.2849 12.1817Z" fill="url(#paint1_linear_18_31665)"></path></g><path d="M22.7969 3.05741L21.8437 2.65269C19.6421 1.96765 17.2344 1.81208 14.6719 2.23236C12.1094 2.65264 11.5156 3.2442 11.5156 3.2442C10.896 3.3674 10.8671 3.88898 11.1718 4.45363C13.0797 6.72576 15.176 13.4043 18.0469 14.2506C18.89 14.4662 21.3791 14.4776 22.2019 14.1593L22.3238 14.108C22.6692 13.9745 23.1672 13.2814 23.1875 12.9118L23.4219 4.03043C23.4523 3.59924 23.1484 3.25204 22.7969 3.05741Z" fill="url(#paint2_radial_18_31665)"></path><path d="M22.7969 3.05741L21.8437 2.65269C19.6421 1.96765 17.2344 1.81208 14.6719 2.23236C12.1094 2.65264 11.5156 3.2442 11.5156 3.2442C10.896 3.3674 10.8671 3.88898 11.1718 4.45363C13.0797 6.72576 15.176 13.4043 18.0469 14.2506C18.89 14.4662 21.3791 14.4776 22.2019 14.1593L22.3238 14.108C22.6692 13.9745 23.1672 13.2814 23.1875 12.9118L23.4219 4.03043C23.4523 3.59924 23.1484 3.25204 22.7969 3.05741Z" fill="url(#paint3_radial_18_31665)"></path><path d="M22.7969 3.05741L21.8437 2.65269C19.6421 1.96765 17.2344 1.81208 14.6719 2.23236C12.1094 2.65264 11.5156 3.2442 11.5156 3.2442C10.896 3.3674 10.8671 3.88898 11.1718 4.45363C13.0797 6.72576 15.176 13.4043 18.0469 14.2506C18.89 14.4662 21.3791 14.4776 22.2019 14.1593L22.3238 14.108C22.6692 13.9745 23.1672 13.2814 23.1875 12.9118L23.4219 4.03043C23.4523 3.59924 23.1484 3.25204 22.7969 3.05741Z" fill="url(#paint4_radial_18_31665)"></path><path d="M22.7969 3.05741L21.8437 2.65269C19.6421 1.96765 17.2344 1.81208 14.6719 2.23236C12.1094 2.65264 11.5156 3.2442 11.5156 3.2442C10.896 3.3674 10.8671 3.88898 11.1718 4.45363C13.0797 6.72576 15.176 13.4043 18.0469 14.2506C18.89 14.4662 21.3791 14.4776 22.2019 14.1593L22.3238 14.108C22.6692 13.9745 23.1672 13.2814 23.1875 12.9118L23.4219 4.03043C23.4523 3.59924 23.1484 3.25204 22.7969 3.05741Z" fill="url(#paint5_radial_18_31665)"></path><path d="M22.7969 3.05741L21.8437 2.65269C19.6421 1.96765 17.2344 1.81208 14.6719 2.23236C12.1094 2.65264 11.5156 3.2442 11.5156 3.2442C10.896 3.3674 10.8671 3.88898 11.1718 4.45363C13.0797 6.72576 15.176 13.4043 18.0469 14.2506C18.89 14.4662 21.3791 14.4776 22.2019 14.1593L22.3238 14.108C22.6692 13.9745 23.1672 13.2814 23.1875 12.9118L23.4219 4.03043C23.4523 3.59924 23.1484 3.25204 22.7969 3.05741Z" fill="url(#paint6_linear_18_31665)"></path><g filter="url(#filter1_f_18_31665)"><path d="M13.1016 2.72656C11.862 3.06924 11.5298 3.40016 11.5298 3.40016C10.9102 3.52335 10.936 4.11525 11.2408 4.6799C13.1487 6.95202 15.1361 13.2496 18.007 14.0958C18.2707 14.1633 18.6953 14.2107 19.1797 14.2344L13.1016 2.72656Z" fill="url(#paint7_linear_18_31665)"></path></g><path d="M12.2187 22.7187L15.7656 26.2031C16.7332 27.1171 17.3334 28.2487 16.4219 29.2188C15.7749 30.0687 14.2241 29.9933 13.625 30.0313C11.6883 30.0891 9.09014 29.5622 6.84373 27.5313C5.07737 25.9343 4.09321 23.688 3.93751 23.0156L12.2187 22.7187Z" fill="url(#paint8_radial_18_31665)"></path><path d="M12.2187 22.7187L15.7656 26.2031C16.7332 27.1171 17.3334 28.2487 16.4219 29.2188C15.7749 30.0687 14.2241 29.9933 13.625 30.0313C11.6883 30.0891 9.09014 29.5622 6.84373 27.5313C5.07737 25.9343 4.09321 23.688 3.93751 23.0156L12.2187 22.7187Z" fill="url(#paint9_radial_18_31665)"></path><g filter="url(#filter2_f_18_31665)"><path d="M12.0523 22.7916L13.2187 23.9375L4.81018 24.5721C4.4328 23.8671 4.20835 23.2768 4.14062 22.9844L12.0523 22.7916Z" fill="url(#paint10_linear_18_31665)"></path><path d="M12.0523 22.7916L13.2187 23.9375L4.81018 24.5721C4.4328 23.8671 4.20835 23.2768 4.14062 22.9844L12.0523 22.7916Z" fill="url(#paint11_radial_18_31665)"></path></g><path d="M2.99219 22.6484C2.07068 20.538 1.78913 17.4452 2.21096 15.0703C2.63279 12.6953 3.20759 11.951 3.20759 11.951C3.31231 11.3264 3.83281 11.2818 4.40626 11.5703C6.73409 13.4144 13.3119 15.2264 14.2432 18.0781C14.5947 19.3034 14.6279 21.3125 14.1641 22.5156C14.0409 22.8657 13.5 23.3516 13.0625 23.4141C12.625 23.4765 9.47656 23.3516 8.61719 23.3516C7.75781 23.3516 4.64844 23.6719 4.14062 23.6172C3.63281 23.5625 3.23437 23.2031 2.99219 22.6484Z" fill="#EC9F6A"></path><path d="M2.99219 22.6484C2.07068 20.538 1.78913 17.4452 2.21096 15.0703C2.63279 12.6953 3.20759 11.951 3.20759 11.951C3.31231 11.3264 3.83281 11.2818 4.40626 11.5703C6.73409 13.4144 13.3119 15.2264 14.2432 18.0781C14.5947 19.3034 14.6279 21.3125 14.1641 22.5156C14.0409 22.8657 13.5 23.3516 13.0625 23.4141C12.625 23.4765 9.47656 23.3516 8.61719 23.3516C7.75781 23.3516 4.64844 23.6719 4.14062 23.6172C3.63281 23.5625 3.23437 23.2031 2.99219 22.6484Z" fill="url(#paint12_radial_18_31665)"></path><path d="M2.99219 22.6484C2.07068 20.538 1.78913 17.4452 2.21096 15.0703C2.63279 12.6953 3.20759 11.951 3.20759 11.951C3.31231 11.3264 3.83281 11.2818 4.40626 11.5703C6.73409 13.4144 13.3119 15.2264 14.2432 18.0781C14.5947 19.3034 14.6279 21.3125 14.1641 22.5156C14.0409 22.8657 13.5 23.3516 13.0625 23.4141C12.625 23.4765 9.47656 23.3516 8.61719 23.3516C7.75781 23.3516 4.64844 23.6719 4.14062 23.6172C3.63281 23.5625 3.23437 23.2031 2.99219 22.6484Z" fill="url(#paint13_linear_18_31665)"></path><path d="M2.99219 22.6484C2.07068 20.538 1.78913 17.4452 2.21096 15.0703C2.63279 12.6953 3.20759 11.951 3.20759 11.951C3.31231 11.3264 3.83281 11.2818 4.40626 11.5703C6.73409 13.4144 13.3119 15.2264 14.2432 18.0781C14.5947 19.3034 14.6279 21.3125 14.1641 22.5156C14.0409 22.8657 13.5 23.3516 13.0625 23.4141C12.625 23.4765 9.47656 23.3516 8.61719 23.3516C7.75781 23.3516 4.64844 23.6719 4.14062 23.6172C3.63281 23.5625 3.23437 23.2031 2.99219 22.6484Z" fill="url(#paint14_radial_18_31665)"></path><path d="M2.99219 22.6484C2.07068 20.538 1.78913 17.4452 2.21096 15.0703C2.63279 12.6953 3.20759 11.951 3.20759 11.951C3.31231 11.3264 3.83281 11.2818 4.40626 11.5703C6.73409 13.4144 13.3119 15.2264 14.2432 18.0781C14.5947 19.3034 14.6279 21.3125 14.1641 22.5156C14.0409 22.8657 13.5 23.3516 13.0625 23.4141C12.625 23.4765 9.47656 23.3516 8.61719 23.3516C7.75781 23.3516 4.64844 23.6719 4.14062 23.6172C3.63281 23.5625 3.23437 23.2031 2.99219 22.6484Z" fill="url(#paint15_radial_18_31665)"></path><path d="M2.99219 22.6484C2.07068 20.538 1.78913 17.4452 2.21096 15.0703C2.63279 12.6953 3.20759 11.951 3.20759 11.951C3.31231 11.3264 3.83281 11.2818 4.40626 11.5703C6.73409 13.4144 13.3119 15.2264 14.2432 18.0781C14.5947 19.3034 14.6279 21.3125 14.1641 22.5156C14.0409 22.8657 13.5 23.3516 13.0625 23.4141C12.625 23.4765 9.47656 23.3516 8.61719 23.3516C7.75781 23.3516 4.64844 23.6719 4.14062 23.6172C3.63281 23.5625 3.23437 23.2031 2.99219 22.6484Z" fill="url(#paint16_radial_18_31665)"></path><g filter="url(#filter3_f_18_31665)"><path d="M2.70313 13.6719C3.04135 12.4711 3.36224 12.0555 3.36224 12.0555C3.46697 11.4309 3.98746 11.3864 4.56092 11.6749C6.88874 13.5189 13.0809 15.1104 14.0121 17.9622C14.1731 18.5231 14.2766 19.0394 14.3287 19.5128L2.70313 13.6719Z" fill="url(#paint17_linear_18_31665)"></path><path d="M2.70313 13.6719C3.04135 12.4711 3.36224 12.0555 3.36224 12.0555C3.46697 11.4309 3.98746 11.3864 4.56092 11.6749C6.88874 13.5189 13.0809 15.1104 14.0121 17.9622C14.1731 18.5231 14.2766 19.0394 14.3287 19.5128L2.70313 13.6719Z" fill="url(#paint18_linear_18_31665)"></path></g><path d="M9.83184 2.82184C6.62184 4.07184 4.07184 6.62184 2.82184 9.83184C2.48184 10.7118 2.82184 11.7018 3.62184 12.1918L14.0418 18.5418C14.6618 18.9218 15.4418 18.9218 16.0618 18.5418C17.0718 17.9218 17.9318 17.0718 18.5418 16.0618C18.9218 15.4418 18.9218 14.6618 18.5418 14.0418L12.1918 3.62184C11.7018 2.82184 10.7118 2.48184 9.83184 2.82184Z" fill="#D79453"></path><path d="M9.83184 2.82184C6.62184 4.07184 4.07184 6.62184 2.82184 9.83184C2.48184 10.7118 2.82184 11.7018 3.62184 12.1918L14.0418 18.5418C14.6618 18.9218 15.4418 18.9218 16.0618 18.5418C17.0718 17.9218 17.9318 17.0718 18.5418 16.0618C18.9218 15.4418 18.9218 14.6618 18.5418 14.0418L12.1918 3.62184C11.7018 2.82184 10.7118 2.48184 9.83184 2.82184Z" fill="url(#paint19_radial_18_31665)"></path><path d="M9.83184 2.82184C6.62184 4.07184 4.07184 6.62184 2.82184 9.83184C2.48184 10.7118 2.82184 11.7018 3.62184 12.1918L14.0418 18.5418C14.6618 18.9218 15.4418 18.9218 16.0618 18.5418C17.0718 17.9218 17.9318 17.0718 18.5418 16.0618C18.9218 15.4418 18.9218 14.6618 18.5418 14.0418L12.1918 3.62184C11.7018 2.82184 10.7118 2.48184 9.83184 2.82184Z" fill="url(#paint20_radial_18_31665)"></path><path d="M9.83184 2.82184C6.62184 4.07184 4.07184 6.62184 2.82184 9.83184C2.48184 10.7118 2.82184 11.7018 3.62184 12.1918L14.0418 18.5418C14.6618 18.9218 15.4418 18.9218 16.0618 18.5418C17.0718 17.9218 17.9318 17.0718 18.5418 16.0618C18.9218 15.4418 18.9218 14.6618 18.5418 14.0418L12.1918 3.62184C11.7018 2.82184 10.7118 2.48184 9.83184 2.82184Z" fill="url(#paint21_radial_18_31665)"></path><path d="M9.83184 2.82184C6.62184 4.07184 4.07184 6.62184 2.82184 9.83184C2.48184 10.7118 2.82184 11.7018 3.62184 12.1918L14.0418 18.5418C14.6618 18.9218 15.4418 18.9218 16.0618 18.5418C17.0718 17.9218 17.9318 17.0718 18.5418 16.0618C18.9218 15.4418 18.9218 14.6618 18.5418 14.0418L12.1918 3.62184C11.7018 2.82184 10.7118 2.48184 9.83184 2.82184Z" fill="url(#paint22_linear_18_31665)"></path><path d="M9.83184 2.82184C6.62184 4.07184 4.07184 6.62184 2.82184 9.83184C2.48184 10.7118 2.82184 11.7018 3.62184 12.1918L14.0418 18.5418C14.6618 18.9218 15.4418 18.9218 16.0618 18.5418C17.0718 17.9218 17.9318 17.0718 18.5418 16.0618C18.9218 15.4418 18.9218 14.6618 18.5418 14.0418L12.1918 3.62184C11.7018 2.82184 10.7118 2.48184 9.83184 2.82184Z" fill="url(#paint23_radial_18_31665)"></path><path d="M9.83184 2.82184C6.62184 4.07184 4.07184 6.62184 2.82184 9.83184C2.48184 10.7118 2.82184 11.7018 3.62184 12.1918L14.0418 18.5418C14.6618 18.9218 15.4418 18.9218 16.0618 18.5418C17.0718 17.9218 17.9318 17.0718 18.5418 16.0618C18.9218 15.4418 18.9218 14.6618 18.5418 14.0418L12.1918 3.62184C11.7018 2.82184 10.7118 2.48184 9.83184 2.82184Z" fill="url(#paint24_radial_18_31665)"></path><defs><filter id="filter0_f_18_31665" x="22.0349" y="3.64062" width="2.65265" height="9.875" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feGaussianBlur stdDeviation="0.125" result="effect1_foregroundBlur_18_31665"></feGaussianBlur></filter><filter id="filter1_f_18_31665" x="10.7815" y="2.47656" width="8.64819" height="12.0078" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feGaussianBlur stdDeviation="0.125" result="effect1_foregroundBlur_18_31665"></feGaussianBlur></filter><filter id="filter2_f_18_31665" x="3.89062" y="22.5416" width="9.57812" height="2.2804" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feGaussianBlur stdDeviation="0.125" result="effect1_foregroundBlur_18_31665"></feGaussianBlur></filter><filter id="filter3_f_18_31665" x="2.45312" y="11.2538" width="12.1255" height="8.50903" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feGaussianBlur stdDeviation="0.125" result="effect1_foregroundBlur_18_31665"></feGaussianBlur></filter><radialGradient id="paint0_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(22.8125 12.9375) rotate(42.7741) scale(12.5164 7.08839)"><stop offset="0.0937591" stop-color="#C05159"></stop><stop offset="0.553697" stop-color="#F6AC6A"></stop><stop offset="0.832916" stop-color="#FFD186"></stop><stop offset="0.916927" stop-color="#FFDC87"></stop></radialGradient><linearGradient id="paint1_linear_18_31665" x1="24.7344" y1="4.67187" x2="20.8594" y2="12.8906" gradientUnits="userSpaceOnUse"><stop stop-color="#EBD67C"></stop><stop offset="0.0655686" stop-color="#FFFFA6"></stop><stop offset="0.530552" stop-color="#F8C281"></stop><stop offset="0.937338" stop-color="#E99E6B"></stop></linearGradient><radialGradient id="paint2_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(22.9009 13.1847) rotate(-127.648) scale(14.3438 11.7966)"><stop stop-color="#FFBE66"></stop><stop offset="1" stop-color="#E2AE5B"></stop></radialGradient><radialGradient id="paint3_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(18 11.4375) rotate(53.9726) scale(11.9013 4.84018)"><stop stop-color="#D67C63"></stop><stop offset="1" stop-color="#D97D67" stop-opacity="0"></stop></radialGradient><radialGradient id="paint4_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(23 4.1875) rotate(45.7639) scale(3.31486 5.75622)"><stop stop-color="#FFE4A6"></stop><stop offset="0.711285" stop-color="#F8B76F"></stop><stop offset="1" stop-color="#F9B870" stop-opacity="0"></stop></radialGradient><radialGradient id="paint5_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(22.875 12.4375) rotate(88.9391) scale(3.37558 1.29066)"><stop stop-color="#FFBC67"></stop><stop offset="1" stop-color="#FFBC67" stop-opacity="0"></stop></radialGradient><linearGradient id="paint6_linear_18_31665" x1="20.375" y1="15.6875" x2="20.125" y2="12.7813" gradientUnits="userSpaceOnUse"><stop offset="0.461609" stop-color="#B45077"></stop><stop offset="0.855389" stop-color="#B75077" stop-opacity="0"></stop></linearGradient><linearGradient id="paint7_linear_18_31665" x1="12.9375" y1="2.57056" x2="18.5625" y2="14.3891" gradientUnits="userSpaceOnUse"><stop stop-color="#DDC173"></stop><stop offset="0.485173" stop-color="#D59F65"></stop><stop offset="1" stop-color="#E49966"></stop></linearGradient><radialGradient id="paint8_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(13.5625 23.5) rotate(109.113) scale(6.68078 10.2578)"><stop offset="0.165756" stop-color="#FFBF7E"></stop><stop offset="0.827674" stop-color="#DF8C6D"></stop><stop offset="1" stop-color="#B05A66"></stop></radialGradient><radialGradient id="paint9_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(15.1875 26) rotate(41.0652) scale(8.37243 2.03649)"><stop stop-color="#FFD483"></stop><stop offset="1" stop-color="#FFD688" stop-opacity="0"></stop></radialGradient><linearGradient id="paint10_linear_18_31665" x1="3.96063" y1="23.794" x2="13.3748" y2="23.5143" gradientUnits="userSpaceOnUse"><stop stop-color="#A8716F"></stop><stop offset="0.103615" stop-color="#B37173"></stop><stop offset="0.225484" stop-color="#DB9F84"></stop><stop offset="0.799889" stop-color="#F1BB8A"></stop><stop offset="1" stop-color="#FFD780"></stop></linearGradient><radialGradient id="paint11_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(11.4219 23.1719) rotate(-178.616) scale(3.23532 0.569081)"><stop offset="0.621498" stop-color="#AF5A3E"></stop><stop offset="1" stop-color="#B35445" stop-opacity="0"></stop></radialGradient><radialGradient id="paint12_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(13.625 19.125) rotate(-171.737) scale(15.2205 15.0767)"><stop offset="0.138435" stop-color="#FFB974"></stop><stop offset="0.403618" stop-color="#F2A56D"></stop><stop offset="0.925938" stop-color="#A16948"></stop></radialGradient><linearGradient id="paint13_linear_18_31665" x1="8.22184" y1="13.125" x2="6.81191" y2="15.4996" gradientUnits="userSpaceOnUse"><stop offset="0.610751" stop-color="#984847"></stop><stop offset="0.850075" stop-color="#9A4947" stop-opacity="0"></stop></linearGradient><radialGradient id="paint14_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(7.25 23.7461) scale(11.25 5.68361)"><stop stop-color="#C66364"></stop><stop offset="1" stop-color="#D4766B" stop-opacity="0"></stop></radialGradient><radialGradient id="paint15_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(7.875 23.5313) scale(10.0937 1.29657)"><stop stop-color="#B64B4B"></stop><stop offset="1" stop-color="#C56158" stop-opacity="0"></stop></radialGradient><radialGradient id="paint16_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(11.4375 19.875) rotate(-46.8882) scale(4.02385 7.51767)"><stop stop-color="#FFC083"></stop><stop offset="0.620218" stop-color="#FFBD7D" stop-opacity="0"></stop></radialGradient><linearGradient id="paint17_linear_18_31665" x1="2.8125" y1="13.0312" x2="14.5582" y2="18.9404" gradientUnits="userSpaceOnUse"><stop stop-color="#B89367"></stop><stop offset="1" stop-color="#C5835E"></stop></linearGradient><linearGradient id="paint18_linear_18_31665" x1="8.21875" y1="14.6406" x2="7.59349" y2="15.6717" gradientUnits="userSpaceOnUse"><stop offset="0.351552" stop-color="#A74746"></stop><stop offset="0.845198" stop-color="#A04346" stop-opacity="0"></stop></linearGradient><radialGradient id="paint19_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(15.5625 14.5625) rotate(140.244) scale(18.3733 13.7403)"><stop stop-color="#FDAE69"></stop><stop offset="0.729021" stop-color="#CE8C4F"></stop><stop offset="0.921546" stop-color="#AD7B45"></stop><stop offset="1" stop-color="#8B6B4A"></stop></radialGradient><radialGradient id="paint20_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(15.0625 7) rotate(65.3152) scale(11.0745 3.16547)"><stop offset="0.233237" stop-color="#FFD47C"></stop><stop offset="0.853648" stop-color="#FFD98B" stop-opacity="0"></stop></radialGradient><radialGradient id="paint21_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(15.3125 8.875) rotate(100.886) scale(6.6191 5.57808)"><stop offset="0.128419" stop-color="#FFD88C"></stop><stop offset="0.924134" stop-color="#FFBE7B" stop-opacity="0"></stop></radialGradient><linearGradient id="paint22_linear_18_31665" x1="7.25" y1="15.1875" x2="10.7588" y2="10.3142" gradientUnits="userSpaceOnUse"><stop offset="0.142353" stop-color="#C15F4D"></stop><stop offset="1" stop-color="#D58366" stop-opacity="0"></stop></linearGradient><radialGradient id="paint23_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(8.15625 15.7813) rotate(28.5422) scale(12.5574 1.96589)"><stop offset="0.149989" stop-color="#E4745D"></stop><stop offset="0.453292" stop-color="#C8604C"></stop><stop offset="0.632597" stop-color="#C0605F"></stop><stop offset="1" stop-color="#C0605F" stop-opacity="0"></stop></radialGradient><radialGradient id="paint24_radial_18_31665" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(1.40625 2.69067) rotate(46.0943) scale(22.3963)"><stop offset="0.935802" stop-color="#C17C61" stop-opacity="0"></stop><stop offset="0.982109" stop-color="#C17C61"></stop></radialGradient></defs></svg>

	

	<span>Croissant</span>
	

	<div class="border-br-gray-200 absolute bottom-0.5 right-0.5 h-1 w-1 border-[3px] border-l-transparent border-t-transparent border-b-gray-200 border-r-gray-200 dark:border-b-gray-700 dark:border-r-gray-700"></div></div>
		
		</button>
	
	
	</div>

	<button class="tag tag-ghost px-1! -ml-0.5 mb-1 md:mb-1.5" type="button">+ 1</button></div><div class="mr-1 flex flex-wrap items-center"><span class="mb-1 mr-1 p-1 text-sm leading-tight text-gray-400 md:mb-1.5">License:
	</span>
	<div class="relative inline-block ">
	<button class="group mr-1 mb-1 md:mr-1.5 md:mb-1.5  rounded-full rounded-br-none " type="button">
		<div class="tag tag-white rounded-full  relative rounded-br-none pr-2.5">
		<svg class="text-xs text-gray-900" width="1em" height="1em" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.46009 5.0945V6.88125C1.46009 7.25201 1.75937 7.55129 2.13012 7.55129C2.50087 7.55129 2.80016 7.25201 2.80016 6.88125V5.0945C2.80016 4.72375 2.50087 4.42446 2.13012 4.42446C1.75937 4.42446 1.46009 4.72375 1.46009 5.0945ZM4.14022 5.0945V6.88125C4.14022 7.25201 4.4395 7.55129 4.81026 7.55129C5.18101 7.55129 5.48029 7.25201 5.48029 6.88125V5.0945C5.48029 4.72375 5.18101 4.42446 4.81026 4.42446C4.4395 4.42446 4.14022 4.72375 4.14022 5.0945ZM1.23674 9.78473H8.38377C8.75452 9.78473 9.0538 9.48545 9.0538 9.1147C9.0538 8.74395 8.75452 8.44466 8.38377 8.44466H1.23674C0.865993 8.44466 0.566711 8.74395 0.566711 9.1147C0.566711 9.48545 0.865993 9.78473 1.23674 9.78473ZM6.82036 5.0945V6.88125C6.82036 7.25201 7.11964 7.55129 7.49039 7.55129C7.86114 7.55129 8.16042 7.25201 8.16042 6.88125V5.0945C8.16042 4.72375 7.86114 4.42446 7.49039 4.42446C7.11964 4.42446 6.82036 4.72375 6.82036 5.0945ZM4.39484 0.623142L0.865993 2.48137C0.682851 2.57517 0.566711 2.76725 0.566711 2.97273C0.566711 3.28094 0.816857 3.53109 1.12507 3.53109H8.49991C8.80365 3.53109 9.0538 3.28094 9.0538 2.97273C9.0538 2.76725 8.93766 2.57517 8.75452 2.48137L5.22568 0.623142C4.9666 0.484669 4.65391 0.484669 4.39484 0.623142V0.623142Z" fill="currentColor"></path></svg>

	

	<span>other</span>
	

	<div class="border-br-gray-200 absolute bottom-0.5 right-0.5 h-1 w-1 border-[3px] border-l-transparent border-t-transparent border-b-gray-200 border-r-gray-200 dark:border-b-gray-700 dark:border-r-gray-700"></div></div>
		
		</button>
	
	
	</div>

	</div></div>

		<div class="flex flex-col-reverse lg:flex-row lg:items-center lg:justify-between"><div class="-mb-px flex h-12 items-center overflow-x-auto overflow-y-hidden ">
	<a class="tab-alternate active" href="/datasets/JeanKaddour/minipile"><svg class="mr-1.5 text-gray-400 flex-none" style="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path class="uim-quaternary" d="M20.23 7.24L12 12L3.77 7.24a1.98 1.98 0 0 1 .7-.71L11 2.76c.62-.35 1.38-.35 2 0l6.53 3.77c.29.173.531.418.7.71z" opacity=".25" fill="currentColor"></path><path class="uim-tertiary" d="M12 12v9.5a2.09 2.09 0 0 1-.91-.21L4.5 17.48a2.003 2.003 0 0 1-1-1.73v-7.5a2.06 2.06 0 0 1 .27-1.01L12 12z" opacity=".5" fill="currentColor"></path><path class="uim-primary" d="M20.5 8.25v7.5a2.003 2.003 0 0 1-1 1.73l-6.62 3.82c-.275.13-.576.198-.88.2V12l8.23-4.76c.175.308.268.656.27 1.01z" fill="currentColor"></path></svg>
	Dataset card
	

	
		</a><a class="tab-alternate" href="/datasets/JeanKaddour/minipile/viewer/"><svg class="mr-1.5 text-gray-400 flex-none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 12 12"><path fill="currentColor" d="M2.5 2h7a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-7a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1Zm0 2v2h3V4h-3Zm4 0v2h3V4h-3Zm-4 3v2h3V7h-3Zm4 0v2h3V7h-3Z"></path></svg>
	Data Studio
	

	
		</a><a class="tab-alternate" href="/datasets/JeanKaddour/minipile/tree/main"><svg class="mr-1.5 text-gray-400 flex-none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path class="uim-tertiary" d="M21 19h-8a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2zm0-4h-8a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2zm0-8h-8a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2zm0 4h-8a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2z" opacity=".5" fill="currentColor"></path><path class="uim-primary" d="M9 19a1 1 0 0 1-1-1V6a1 1 0 0 1 2 0v12a1 1 0 0 1-1 1zm-6-4.333a1 1 0 0 1-.64-1.769L3.438 12l-1.078-.898a1 1 0 0 1 1.28-1.538l2 1.667a1 1 0 0 1 0 1.538l-2 1.667a.999.999 0 0 1-.64.231z" fill="currentColor"></path></svg>
	<span class="xl:hidden">Files</span>
		<span class="hidden xl:inline">Files and versions</span>
	

	
		</a><a class="tab-alternate" href="/datasets/JeanKaddour/minipile/discussions"><svg class="mr-1.5 text-gray-400 flex-none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M20.6081 3C21.7684 3 22.8053 3.49196 23.5284 4.38415C23.9756 4.93678 24.4428 5.82749 24.4808 7.16133C24.9674 7.01707 25.4353 6.93643 25.8725 6.93643C26.9833 6.93643 27.9865 7.37587 28.696 8.17411C29.6075 9.19872 30.0124 10.4579 29.8361 11.7177C29.7523 12.3177 29.5581 12.8555 29.2678 13.3534C29.8798 13.8646 30.3306 14.5763 30.5485 15.4322C30.719 16.1032 30.8939 17.5006 29.9808 18.9403C30.0389 19.0342 30.0934 19.1319 30.1442 19.2318C30.6932 20.3074 30.7283 21.5229 30.2439 22.6548C29.5093 24.3704 27.6841 25.7219 24.1397 27.1727C21.9347 28.0753 19.9174 28.6523 19.8994 28.6575C16.9842 29.4379 14.3477 29.8345 12.0653 29.8345C7.87017 29.8345 4.8668 28.508 3.13831 25.8921C0.356375 21.6797 0.754104 17.8269 4.35369 14.1131C6.34591 12.058 7.67023 9.02782 7.94613 8.36275C8.50224 6.39343 9.97271 4.20438 12.4172 4.20438H12.4179C12.6236 4.20438 12.8314 4.2214 13.0364 4.25468C14.107 4.42854 15.0428 5.06476 15.7115 6.02205C16.4331 5.09583 17.134 4.359 17.7682 3.94323C18.7242 3.31737 19.6794 3 20.6081 3ZM20.6081 5.95917C20.2427 5.95917 19.7963 6.1197 19.3039 6.44225C17.7754 7.44319 14.8258 12.6772 13.7458 14.7131C13.3839 15.3952 12.7655 15.6837 12.2086 15.6837C11.1036 15.6837 10.2408 14.5497 12.1076 13.1085C14.9146 10.9402 13.9299 7.39584 12.5898 7.1776C12.5311 7.16799 12.4731 7.16355 12.4172 7.16355C11.1989 7.16355 10.6615 9.33114 10.6615 9.33114C10.6615 9.33114 9.0863 13.4148 6.38031 16.206C3.67434 18.998 3.5346 21.2388 5.50675 24.2246C6.85185 26.2606 9.42666 26.8753 12.0653 26.8753C14.8021 26.8753 17.6077 26.2139 19.1799 25.793C19.2574 25.7723 28.8193 22.984 27.6081 20.6107C27.4046 20.212 27.0693 20.0522 26.6471 20.0522C24.9416 20.0522 21.8393 22.6726 20.5057 22.6726C20.2076 22.6726 19.9976 22.5416 19.9116 22.222C19.3433 20.1173 28.552 19.2325 27.7758 16.1839C27.639 15.6445 27.2677 15.4256 26.746 15.4263C24.4923 15.4263 19.4358 19.5181 18.3759 19.5181C18.2949 19.5181 18.2368 19.4937 18.2053 19.4419C17.6743 18.557 17.9653 17.9394 21.7082 15.6009C25.4511 13.2617 28.0783 11.8545 26.5841 10.1752C26.4121 9.98141 26.1684 9.8956 25.8725 9.8956C23.6001 9.89634 18.2311 14.9403 18.2311 14.9403C18.2311 14.9403 16.7821 16.496 15.9057 16.496C15.7043 16.496 15.533 16.4139 15.4169 16.2112C14.7956 15.1296 21.1879 10.1286 21.5484 8.06535C21.7928 6.66715 21.3771 5.95917 20.6081 5.95917Z" fill="#FF9D00"></path><path d="M5.50686 24.2246C3.53472 21.2387 3.67446 18.9979 6.38043 16.206C9.08641 13.4147 10.6615 9.33111 10.6615 9.33111C10.6615 9.33111 11.2499 6.95933 12.59 7.17757C13.93 7.39581 14.9139 10.9401 12.1069 13.1084C9.29997 15.276 12.6659 16.7489 13.7459 14.713C14.8258 12.6772 17.7747 7.44316 19.304 6.44221C20.8326 5.44128 21.9089 6.00204 21.5484 8.06532C21.188 10.1286 14.795 15.1295 15.4171 16.2118C16.0391 17.2934 18.2312 14.9402 18.2312 14.9402C18.2312 14.9402 25.0907 8.49588 26.5842 10.1752C28.0776 11.8545 25.4512 13.2616 21.7082 15.6008C17.9646 17.9393 17.6744 18.557 18.2054 19.4418C18.7372 20.3266 26.9998 13.1351 27.7759 16.1838C28.5513 19.2324 19.3434 20.1173 19.9117 22.2219C20.48 24.3274 26.3979 18.2382 27.6082 20.6107C28.8193 22.9839 19.2574 25.7722 19.18 25.7929C16.0914 26.62 8.24723 28.3726 5.50686 24.2246Z" fill="#FFD21E"></path></svg>
	Community
	<div class="ml-1.5 flex h-4 min-w-[1rem] items-center justify-center rounded px-1 text-xs leading-none shadow-sm bg-black text-white dark:bg-gray-800 dark:text-gray-200">3</div>

	
		</a></div>
	
			</div></div></header>
</div>
	
<div class="container relative flex flex-col md:grid md:space-y-0 w-full md:grid-cols-12 md:flex-1 md:grid-rows-full space-y-4 md:gap-6 ">
		<section class="pt-6 border-gray-100 md:col-span-8 pb-24 relative break-words copiable-code-container">
				<div class="SVELTE_HYDRATER contents" data-target="UnsafeBanner" data-props="{&quot;classNames&quot;:&quot;mb-4&quot;,&quot;repoId&quot;:&quot;JeanKaddour/minipile&quot;,&quot;repoType&quot;:&quot;dataset&quot;,&quot;minLevel&quot;:&quot;unsafe&quot;}"></div>
					<div class="SVELTE_HYDRATER contents" data-target="DatasetViewer" data-props="{&quot;data&quot;:{&quot;kind&quot;:&quot;DatasetAndSampleData&quot;,&quot;datasetInfo&quot;:[{&quot;isValid&quot;:true,&quot;href&quot;:&quot;&quot;,&quot;label&quot;:&quot;Size of downloaded dataset files:&quot;,&quot;value&quot;:&quot;3.18 GB&quot;},{&quot;isValid&quot;:true,&quot;href&quot;:&quot;/datasets/JeanKaddour/minipile/tree/refs%2Fconvert%2Fparquet/&quot;,&quot;label&quot;:&quot;Size of the auto-converted Parquet files:&quot;,&quot;value&quot;:&quot;3.18 GB&quot;},{&quot;isValid&quot;:true,&quot;href&quot;:&quot;&quot;,&quot;label&quot;:&quot;Number of rows:&quot;,&quot;value&quot;:&quot;1,010,500&quot;}],&quot;partial&quot;:false,&quot;configsData&quot;:{&quot;configInfos&quot;:[{&quot;name&quot;:&quot;default&quot;,&quot;status&quot;:&quot;ok&quot;,&quot;numRows&quot;:1010500}],&quot;selectedConfig&quot;:&quot;default&quot;,&quot;hasSelectedConfigParquet&quot;:true},&quot;splitsData&quot;:{&quot;splitInfos&quot;:[{&quot;name&quot;:&quot;train&quot;,&quot;numRows&quot;:1000000},{&quot;name&quot;:&quot;validation&quot;,&quot;numRows&quot;:500},{&quot;name&quot;:&quot;test&quot;,&quot;numRows&quot;:10000}],&quot;selectedSplit&quot;:&quot;train&quot;},&quot;sampleData&quot;:{&quot;dataset&quot;:&quot;JeanKaddour/minipile&quot;,&quot;config&quot;:&quot;default&quot;,&quot;split&quot;:&quot;train&quot;,&quot;capabilities&quot;:{&quot;rows&quot;:true,&quot;search&quot;:true,&quot;filter&quot;:true,&quot;statistics&quot;:true},&quot;navigation&quot;:{&quot;p&quot;:0},&quot;jwt&quot;:&quot;eyJhbGciOiJFZERTQSJ9.eyJyZWFkIjp0cnVlLCJwZXJtaXNzaW9ucyI6eyJyZXBvLmNvbnRlbnQucmVhZCI6dHJ1ZX0sImlhdCI6MTc0MjkyMzA4OSwic3ViIjoiL2RhdGFzZXRzL0plYW5LYWRkb3VyL21pbmlwaWxlIiwiZXhwIjoxNzQyOTI2Njg5LCJpc3MiOiJodHRwczovL2h1Z2dpbmdmYWNlLmNvIn0.jlgkWu33lEa8Gj2KL3YnZTN2BOVGRKzJAbRF-CE8Y5w9w6rYgg39xK9hpHPdGPf-oX4Mix8fqywVFOFACnrjDQ&quot;,&quot;sampleData&quot;:{&quot;columns&quot;:[{&quot;name&quot;:&quot;text&quot;,&quot;align&quot;:&quot;depends on text direction&quot;,&quot;type&quot;:&quot;string&quot;,&quot;statistics&quot;:{&quot;column_name&quot;:&quot;text&quot;,&quot;column_type&quot;:&quot;string_text&quot;,&quot;column_statistics&quot;:{&quot;nan_count&quot;:0,&quot;nan_proportion&quot;:0,&quot;min&quot;:8,&quot;max&quot;:5766478,&quot;mean&quot;:5868.15722,&quot;median&quot;:1986,&quot;std&quot;:24330.63362,&quot;histogram&quot;:{&quot;hist&quot;:[999766,186,31,5,4,2,2,1,1,2],&quot;bin_edges&quot;:[8,576656,1153304,1729952,2306600,2883248,3459896,4036544,4613192,5189840,5766478]}}}}],&quot;rows&quot;:[{&quot;rowIdx&quot;:0,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;HTC's Vive Pro headset is available to pre-order for $799\n\nWe've seen plenty of Beats-focused KIRFs in our time, some better than others. Few, however, play quite so directly on the name as OrigAudio's Beets. For $25, adopters get a set of headphones that bear little direct resemblance to Dr. Dre's audio gear of choice, but are no doubt bound to impress friends -- at least, up until they see a root vegetable logo instead of a lower-case B. Thankfully, there's more to it than just amusing and confusing peers. Every purchase will lead to a donation of canned beets (what else?) to the Second Harvest Food Bank of Orange County. For us, that's reason enough to hope that Beats doesn't put the kibosh on OrigAudio's effort. Besides, we could use some accompaniment for our BeetBox.&quot;}}},{&quot;rowIdx&quot;:1,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;Q:\n\nNullPointerException in getview of custom adapter\n\nI'm getting image from bitmap method and trying to populate the listview. But when i call the bitmap function inside getview the nullpointerException error occurs. please help me... \nhere is my view Activity class:\npublic class Viewactivity extends Activity{\n\n    TextView tv;\n    ImageView im;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.views);\n\n        ListView mListView = (ListView)findViewById(R.id.listView);\n        //array houlds all images\n        int Images[] = new int[]{\n            R.drawable.confidential,\n            ...     \n            };\n        //array holds all strings to be drawn in the image\n\n        CustomList adaptor = new CustomList(this , Images);\n        mListView.setAdapter(adaptor);\n\n    }\n\n    public Bitmap ProcessingBitmap(int image) {\n        // TODO Auto-generated method stub\n        Bitmap bm1 = null;\n        Bitmap newBitmap = null;\n\n        final String data =getIntent().getExtras().getString(\&quot;keys\&quot;);\n        bm1 = ((BitmapDrawable) Viewactivity.this.getResources()\n                .getDrawable(image)).getBitmap();\n        Config config = bm1.getConfig();\n        if(config == null){\n            config = Bitmap.Config.ARGB_8888;\n        }\n\n        newBitmap = Bitmap.createBitmap(bm1.getWidth(), bm1.getHeight(),config);\n        Canvas newCanvas = new Canvas(newBitmap);\n\n        newCanvas.drawBitmap(bm1, 0, 0, null);\n\n        if(data != null){\n            Paint paintText = new Paint(Paint.ANTI_ALIAS_FLAG);\n            paintText.setColor(Color.RED);\n            paintText.setTextSize(300);\n            // paintText.setTextAlign(Align.CENTER);\n            paintText.setStyle(Style.FILL);\n            paintText.setShadowLayer(10f, 10f, 10f, Color.BLACK);\n\n            Rect rectText = new Rect();\n            paintText.getTextBounds(data, 0, data.length(), rectText);\n            paintText.setTextScaleX(1.f);\n\n            newCanvas.drawText(data, \n              0, rectText.height(), paintText);\n\n            Toast.makeText(getApplicationContext(), \n              \&quot;drawText: \&quot; + data, Toast.LENGTH_LONG).show();\n\n        }else{\n            Toast.makeText(getApplicationContext(), \n              \&quot;caption empty!\&quot;, Toast.LENGTH_LONG).show();\n        }\n        return newBitmap;\n\n    }\n}\n\nthis is my adapter class:\npublic class CustomList extends BaseAdapter{\n\n    Viewactivity act;\n    int[] IMAGES;\n    LayoutInflater inflator;\n    Context sContext;\n    //private String[] TEXTS;\n\n    public CustomList(Context context, int[] images){\n        this.IMAGES = images;\n        //this.TEXTS = texts;\n        this.sContext = context;\n        inflator = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n    }\n\n    @Override\n    public int getCount() {\n        // TODO Auto-generated method stub\n        return IMAGES.length;\n    }\n\n    @Override\n    public Object getItem(int position) {\n        // TODO Auto-generated method stub\n        return position;\n    }\n\n    @Override\n    public long getItemId(int position) {\n        // TODO Auto-generated method stub\n        return position;\n    }\n\n    @Override\n    public View getView(int position, View convertView, ViewGroup parent) {\n        // TODO Auto-generated method stub\n        View v = inflator.inflate(R.layout.row_list, parent, false);\n        final ImageView imageView = (ImageView) v.findViewById(R.id.imageView);\n        imageView.setImageBitmap(act.ProcessingBitmap(IMAGES[position]));// line no:52\n        return imageView;\n    }\n}\n\nthis is my logcat:\n12-18 06:16:51.406: E/AndroidRuntime(1388): FATAL EXCEPTION: main\n12-18 06:16:51.406: E/AndroidRuntime(1388): Process: com.emple.example, PID: 1388\n12-18 06:16:51.406: E/AndroidRuntime(1388): java.lang.NullPointerException\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at com.emple.example.CustomList.getView(CustomList.java:52)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.AbsListView.obtainView(AbsListView.java:2263)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1263)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.ListView.onMeasure(ListView.java:1175)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.View.measure(View.java:16497)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.RelativeLayout.measureChild(RelativeLayout.java:689)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:473)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.View.measure(View.java:16497)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.View.measure(View.java:16497)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at com.android.internal.widget.ActionBarOverlayLayout.onMeasure(ActionBarOverlayLayout.java:327)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.View.measure(View.java:16497)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2291)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.View.measure(View.java:16497)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1916)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1113)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1295)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:5670)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:761)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.Choreographer.doCallbacks(Choreographer.java:574)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.Choreographer.doFrame(Choreographer.java:544)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:747)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.os.Handler.handleCallback(Handler.java:733)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.os.Handler.dispatchMessage(Handler.java:95)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.os.Looper.loop(Looper.java:136)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.app.ActivityThread.main(ActivityThread.java:5017)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at java.lang.reflect.Method.invokeNative(Native Method)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at java.lang.reflect.Method.invoke(Method.java:515)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)\n12-18 06:16:51.406: E/AndroidRuntime(1388):     at dalvik.system.NativeStart.main(Native Method)\n12-18 06:21:51.616: I/Process(1388): Sending signal. PID: 1388 SIG: 9\n\nA:\n\nYou haven't initialized your act variable. Init it in your adapter constructor.\nSomething like:\npublic CustomList(Viewactivitty act, int[] images){\n    this.act = act;\n    this.IMAGES = images;\n    //this.TEXTS = texts;\n    this.sContext = act;\n    inflator = (LayoutInflater)act.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n}\n\n&quot;}}},{&quot;rowIdx&quot;:2,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;Syringocystadenoma papilliferum of the cervix presenting as vulvar growth in an adolescent girl.\nSyringocystadenoma papilliferum (SCP) is a rare, benign, adnexal tumour of apocrine or eccrine differentiation. It is commonly located on head and neck region. We report the case of an 18-year-old woman who presented with a vulvar lobulated growth that was found to arise from the posterior lip of cervix. Histopathological examination revealed the diagnosis of SCP. To our knowledge, SCP arising from the cervix has never been reported previously in the literature, thus we believe this to be the first case of SCP arising from the posterior lip of the cervix.&quot;}}},{&quot;rowIdx&quot;:3,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;The basic goal of the effective altruism movement is to create efficient philanthropic change by backing programs and innovations that are cost-effective so that each dollar given impacts as many people as possible. The underlying tenet is that donor dollars are a limited resource, but dollars are just one of the limiting factors. There’s still another major resource that needs to be accounted for: research time.\n\nThere’s a learning curve for calculation-driven cause groups (and donors) to figure out what world-plaguing problems really are the most pressing, what solutions seem the most promising or neglected, and what else might need to be done. The problem is there hasn’t been a single resource for accessing all this information in one place.\n\nTo change that, Rethink Priorities, an initiative of the effective altruism awareness and engagement building nonprofit Rethink Charity, has launched Priority Wiki, a publicly editable Wikipedia-like online encyclopedia for cause prioritization wonks. It collects and categorizes vetted research around pressing charitable causes and potential interventions.\n\n“This is a big problem because thousands of hours are going into this kind of research, and you don’t want people to forget it exists, or maybe try to duplicate efforts, or just not even remember it,” says Peter Hurford, who codeveloped the wiki alongside colleague Marcus Davis. “We’re trying to capture all relevant research under a wide variety of global issues so that everyone can have a go-to spot to get up to speed.”\n\nTo do that, Wiki is organized into six broad types of causes. That includes “Existential/Catastrophic Future Risks,” “Improving Research,” “Decisions and Values,” “Improving Policy,” “Developing World Health and Economic Development,” “Developed World Health and Economic Development,” and “Specific Scientific Research.” Each entry is then comprised of related topics. Under the catastrophe heading, for instance, there’s biosecurity, nuclear security, climate change, and geomagnetic storms.\n\nAs the developers explain in an open letter about their efforts, the wiki is currently populated with a collection of research by effective altruism research organizations including Open Philanthropy, GiveWell, 80,000 Hours, and Animal Charity Evaluators. Many of these are formatted in what’s commonly referred to as a “shallow review,” or high-level overview of each issue, and various important statistics and findings. “That gives you a lot of opportunities to dive into the problem and make a more structured way than dumping someone a 60-item reading list,” says Hurford.\n\nContributors are already revising the content and sharing data about things the originators hadn’t considered. Two recent additions include information about psychedelics and drug reform, and how to prevent or reduce aging-related diseases to extend our natural lifespan.&quot;}}},{&quot;rowIdx&quot;:4,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;Essays\n\nPhilosophers who think everyday morality is objective should examine the evidence, argues Joshua Knobe.\n\nImagine two people discussing a question in mathematics. One of them says “7,497 is a prime number,” while the other says, “7,497 is not a prime number.” In a case like this one, we would probably conclude that there can only be a single right answer. We might have a lot of respect for both participants in the conversation, we might agree that they are both very reasonable and conscientious, but all the same, one of them has got to be wrong. The question under discussion here, we might say, is perfectly objective.\n\nBut now suppose we switch to a different topic. Two people are talking about food. One of them says “Don’t even think about eating caterpillars! They are totally disgusting and not tasty at all,” while the other says “Caterpillars are a special delicacy – one of the tastiest, most delectable foods a person can ever have occasion to eat.” In this second case, we might have a very different reaction. We might think that there isn’t any single right answer. Maybe caterpillars are just tasty for some people but not for others. This latter question, we might think, should be understood as relative.\n\nNow that we’ve got at least a basic sense for these two categories, we can turn to a more controversial case. Suppose that the two people are talking about morality. One of them says “That action is deeply morally wrong,” while the other is speaking about the very same action and says “That action is completely fine – not the slightest thing to worry about.” In a case like this, one might wonder what reaction would be most appropriate. Should we say that there is a single right answer and anyone who says the opposite must be mistaken, or should we say that different answers could be right for different people? In other words, should we say that morality is something objective or something relative?\n\nThis is a tricky question, and it can be difficult to see how one might even begin to address it. Faced with an issue like this one, where exactly should we look for evidence?\n\nThough philosophers have pursued numerous approaches here, one of the most important and influential is to begin with certain facts about people’s ordinary moral practices. The idea is that we can start out with facts about people’s usual ways of thinking or talking and use these facts to get some insight into questions about the true nature of morality.\n\nThinkers who take this approach usually start out with the assumption that ordinary thought and talk about morality has an objectivist character. For example, the philosopher Michael Smith claims that\n\nwe seem to think moral questions have correct answers; that the correct answers are made correct by objective moral facts; that moral facts are wholly determined by circumstances and that, by engaging in moral conversation and argument, we can discover what these objective moral facts determined by the circumstances are.\n\nAnd Frank Jackson writes:\n\nI take it that it is part of current folk morality that convergence will or would occur. We have some kind of commitment to the idea that moral disagreements can be resolved by sufficient critical reflection – which is why we bother to engage in moral debate. To that extent, some sort of objectivism is part of current folk morality.\n\nThen, once one has in hand this claim about people’s ordinary understanding, the aim is to use it as part of a complex argument for a broader philosophical conclusion. It is here that philosophical work on these issues really shines, with rigorous attention to conceptual distinctions and some truly ingenious arguments, objections and replies. There is just one snag. The trouble is that no real evidence is ever offered for the original assumption that ordinary moral thought and talk has this objective character. Instead, philosophers tend simply to assert that people’s ordinary practice is objectivist and then begin arguing from there.\n\nIf we really want to go after these issues in a rigorous way, it seems that we should adopt a different approach. The first step is to engage in systematic empirical research to figure out how the ordinary practice actually works. Then, once we have the relevant data in hand, we can begin looking more deeply into the philosophical implications – secure in the knowledge that we are not just engaging in a philosophical fiction but rather looking into the philosophical implications of people’s actual practices.\n\nJust in the past few years, experimental philosophers have been gathering a wealth of new data on these issues, and we now have at least the first glimmerings of a real empirical research program here. But a funny thing happened when people started taking these questions into the lab. Again and again, when researchers took up these questions experimentally, they did not end up confirming the traditional view. They did not find that people overwhelmingly favoured objectivism. Instead, the results consistently point to a more complex picture. There seems to be a striking degree of conflict even in the intuitions of ordinary folks, with some people under some circumstances offering objectivist answers, while other people under other circumstances offer more relativist views. And that is not all. The experimental results seem to be giving us an ever deeper understanding of why it is that people are drawn in these different directions, what it is that makes some people move toward objectivism and others toward more relativist views.\n\nFor a nice example from recent research, consider a study by Adam Feltz and Edward Cokely. They were interested in the relationship between belief in moral relativism and the personality trait openness to experience. Accordingly, they conducted a study in which they measured both openness to experience and belief in moral relativism. To get at people’s degree of openness to experience, they used a standard measure designed by researchers in personality psychology. To get at people’s agreement with moral relativism, they told participants about two characters – John and Fred – who held opposite opinions about whether some given act was morally bad. Participants were then asked whether one of these two characters had to be wrong (the objectivist answer) or whether it could be that neither of them was wrong (the relativist answer). What they found was a quite surprising result. It just wasn’t the case that participants overwhelmingly favoured the objectivist answer. Instead, people’s answers were correlated with their personality traits. The higher a participant was in openness to experience, the more likely that participant was to give a relativist answer.\n\nGeoffrey Goodwin and John Darley pursued a similar approach, this time looking at the relationship between people’s belief in moral relativism and their tendency to approach questions by considering a whole variety of possibilities. They proceeded by giving participants mathematical puzzles that could only be solved by looking at multiple different possibilities. Thus, participants who considered all these possibilities would tend to get these problems right, whereas those who failed to consider all the possibilities would tend to get the problems wrong. Now comes the surprising result: those participants who got these problems right were significantly more inclined to offer relativist answers than were those participants who got the problems wrong.\n\nTaking a slightly different approach, Shaun Nichols and Tricia Folds-Bennett looked at how people’s moral conceptions develop as they grow older. Research in developmental psychology has shown that as children grow up, they develop different understandings of the physical world, of numbers, of other people’s minds. So what about morality? Do people have a different understanding of morality when they are twenty years old than they do when they are only four years old? What the results revealed was a systematic developmental difference. Young children show a strong preference for objectivism, but as they grow older, they become more inclined to adopt relativist views. In other words, there appears to be a developmental shift toward increasing relativism as children mature. (In an exciting new twist on this approach, James Beebe and David Sackris have shown that this pattern eventually reverses, with middle-aged people showing less inclination toward relativism than college students do.)\n\nSo there we have it. People are more inclined to be relativists when they score highly in openness to experience, when they have an especially good ability to consider multiple possibilities, when they have matured past childhood (but not when they get to be middle-aged). Looking at these various effects, my collaborators and I thought that it might be possible to offer a single unifying account that explained them all. Specifically, our thought was that people might be drawn to relativism to the extent that they open their minds to alternative perspectives. There could be all sorts of different factors that lead people to open their minds in this way (personality traits, cognitive dispositions, age), but regardless of the instigating factor, researchers seemed always to be finding the same basic effect. The more people have a capacity to truly engage with other perspectives, the more they seem to turn toward moral relativism.\n\nTo really put this hypothesis to the test, Hagop Sarkissian, Jennifer Wright, John Park, David Tien and I teamed up to run a series of new studies. Our aim was to actually manipulate the degree to which people considered alternative perspectives. That is, we wanted to randomly assign people to different conditions in which they would end up thinking in different ways, so that we could then examine the impact of these different conditions on their intuitions about moral relativism.\n\nParticipants in one condition got more or less the same sort of question used in earlier studies. They were asked to imagine that someone in the United States commits an act of infanticide. Then they were told to suppose that one person from their own college thought that this act was morally bad, while another thought that it was morally permissible. The question then was whether they would agree or disagree with the following statement:\n\nSince your classmate and Sam have different judgments about this case, at least one of them must be wrong.\n\nParticipants in the other conditions received questions aimed at moving their thinking in a different direction. Those who had been assigned to the “other culture” condition were told to imagine an Amazonian tribe, the Mamilons, which had a very different way of life from our own. They were given a brief description of this tribe’s rituals, values and modes of thought. Then they were told to imagine that one of their classmates thought that the act of infanticide was morally bad, while someone from this Amazonian tribe thought that the act was morally permissible. These participants were then asked whether they agreed or disagreed with the corresponding statement:\n\nSince your classmate and the Mamilon have different judgments about this case, at least one of them must be wrong.\n\nFinally, participants in the “extraterrestrial” condition were told about a culture that was just about as different from our own as can possibly be conceived. They were asked to imagine a race of extraterrestrial beings, the Pentars, who have no interest in friendship, love or happiness. Instead, the Pentars’ only goal is to maximise the total number of equilateral pentagons in the universe, and they move through space doing everything in their power to achieve this goal. (If a Pentar becomes too old to work, she is immediately killed and transformed into a pentagon herself.) As you might guess, these participants were then told to imagine a Pentar who thinks that the act of infanticide is morally permissible. Then came the usual statement:\n\nSince your classmate and the Pentar have different judgments about this case, at least one of them must be wrong.\n\nThe results of the study showed a systematic difference between conditions. In particular, as we moved toward more distant cultures, we found a steady shift toward more relativist answers – with people in the first condition tending to agree with the statement that at least one of them had to be wrong, people in the second being pretty evenly split between the two answers, and people in the third tending to reject the statement quite decisively.\n\nNote that all participants in the study are considering judgments about the very same act. There is just a single person, living in the United States, who is performing an act of infanticide, and participants are being asked to consider different judgments one might make about that very same act. Yet, when participants are asked to consider individuals who come at the issue from wildly different perspectives, they end up concluding that these individuals could have opposite opinions without either of them being in any way wrong. This result seems strongly to suggest that people can be drawn under certain circumstances to a form of moral relativism.\n\nBut now we face a new question. If we learn that people’s ordinary practice is not an objectivist one – that it actually varies depending on the degree to which people take other perspectives into account – how can we then use this information to address the deeper philosophical issues about the true nature of morality?\n\nThe answer here is in one way very complex and in another very simple. It is complex in that one can answer such questions only by making use of very sophisticated and subtle philosophical methods. Yet, at the same time, it is simple in that such methods have already been developed and are being continually refined and elaborated within the literature in analytic philosophy. The trick now is just to take these methods and apply them to working out the implications of an ordinary practice that actually exists.\n\nShare This\n\n\n\n\n\nJoshua Knobe is an associate professor at Yale University, affiliated both with the Program in Cognitive Science and the Department of Philosophy.&quot;}}},{&quot;rowIdx&quot;:5,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;Getting the DID number from a CallCentric SIP trunk for FreePBX\n\nI’ve got a few DDI numbers from CallCentric all around the world (UK, US, Australia) and couldn’t figure our how to setup an ‘Inbound Route’ in FreePBX that used the number that had been dialled to route the call.\n\nIt turns out that you need to extract the number from the ‘SIP header’ information and there’s no setting in FreePBX to do this so it means hacking at the Asterisk config files just a little.\n\nThere are a few methods for doing this but these instructions should work for FreePBX/Asterisk –\n\nWhen setting up your ‘SIP trunk’ in FreePBX under ‘PEER DETAILS’ you want to put the line –\n\n“context=custom-get-did-from-sip”\n\nthen you need to edit the file /etc/asterisk/extensions_custom.conf and add the following lines –&quot;}}},{&quot;rowIdx&quot;:6,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;Introduction\n============\n\nBlood-borne pathogens first encounter the adaptive immune system in the marginal zone region of the spleen where the convergence of innate and adaptive immune mechanisms insures an early and effective response to pathogen antigens ([@bib1], [@bib2]). Both thymic-independent and -dependent responses are elicited in response to infection ([@bib1], [@bib3]). The thymic-independent response involves the targeting and activation of marginal zone B cells (MZBs)[\\*](#fn1){ref-type=\&quot;fn\&quot;}through their interaction with the repetitive antigenic determinants of pathogens with complement and B cell antigen receptors ([@bib4], [@bib5]). In contrast, the thymic-dependent Ab response is driven by the interaction and reciprocal stimulation of APCs, T lymphocytes, and B cells. The organization of the splenic white pulp nodule into discrete zones enriched for either B cells, T cells, or APCs provide a spatial microenvironment that facilitates an efficient interaction of pathogens with the various cellular populations required for insuring an efficient immune response ([@bib6]--[@bib8]). Antigen presentation and stimulation of T and B cells ultimately results in the formation of germinal centers, high affinity neutralizing Abs, and memory cells. Recent reports have begun to define the cellular components and molecular signals that are necessary to establish the marginal zone. B cell intrinsic pathways have been described involving specific chemokines and their receptors, molecules involved in B cell activation, as well as adhesion molecules and their ligands ([@bib9], [@bib10]). Apart from the MZB, the other predominant cell of the marginal zone is the marginal zone macrophage (MZMO), which is distinct from the metallophilic macrophage, defined by the marker MOMA-1, located at the border of the marginal and follicular zone ([@bib11]). The MZMO is defined by its location, interspersed in several layers within the marginal zone, and by its expression of the markers MARCO and ER-TR9 ([@bib12], [@bib13]). The former molecule is a scavenger receptor belonging structurally to the class A receptor family whereas the latter is identical to the C-type lectin SIGN-RI ([@bib14]--[@bib17]). MARCO has been shown to bind a range of microbial Ags including *Staphylococcus aureus* and *Escherichia coli* whereas SIGN-RI is the predominant receptor for uptake of polysaccharide dextran by MZMOs. Even though both MZBs and MZMOs are implicated in both thymus-dependent and -independent immune responses, the exact roles of the two cell types in initiation of the response to blood-borne pathogens is not known. We now define a unique role for the MZMO in regulation of MZB retention and activation and show that movement of this subset of macrophages to the red pulp of the spleen involves signaling via SH2-containing inositol-5-phosphatase 1 (SHIP) and Bruton\\'s tyrosine kinase (Btk). In addition, we show a direct interaction between MZMOs and MZBs via the MARCO receptor on MZMOs and a ligand on MZBs.\n\nMaterials and Methods\n=====================\n\nMice.\n-----\n\nC57BL/6 mice obtained from The Jackson Laboratory were used as WT mice and controls unless otherwise stated. Founders of SHIP-deficient mice were provided by G. Krystal (Terry Fox Laboratory, BC Cancer Agency, Vancouver, Canada; reference [@bib18]) and Btk-deficient mice were purchased from The Jackson Laboratory. Op/op mice were provided by J. Pollard (Albert Einstein College of Medicine, New York, NY) and LysMCre transgenic mice ([@bib19]) were provided by I. Forster (Technical University of Munich, Germany). Abs and bacteria was injected i.v. in the tail vein and all experiments involving mice were performed in accordance with National Institutes of Health (NIH) guidelines. All mice were maintained under specific pathogen-free conditions at The Rockefeller University.\n\nAntibodies and Reagents.\n------------------------\n\nFor histological examination 6-μM frozen sections were stained, and for FACS^®^ analysis erythrocyte-depleted spleen cells were used. Macrophages were detected using MOMA-1, MARCO Abs from Serotec, and ER-TR9 from Accurate Chemical &amp; Scientific Corp. Abs to CD1d, B220, CD19, CD21/CD35 (CRI/II), CD23, MAC-1, anti--rat alkaline phosphatase, and anti--rabbit horseradish peroxidase were from BD Biosciences. Secondary Abs for immunohistochemistry, anti-biotin, anti-FITC F(ab′) horseradish peroxidase, or alkaline phosphatase were from DakoCytomation and rabbit anti--SHIP used for Western blot was from Upstate Biotechnology. Vector Blue Alkaline Phosphatase Substrate from Vector Laboratories and DAB peroxidase substrate from Sigma-Aldrich were used for development of immunohistochemistry stains. Soluble MARCO receptor was provided by T. Pikkarainen (The Karolinska Institute, Stockholm, Sweden; reference [@bib20]) and was biotinylated using the EZ-Link™ kit from Pierce Chemical Co. The biotinylated soluble MARCO was detected using Streptavidin-CyChrome™ from BD Biosciences. *S. aureus* fluorescent bioparticles were purchased from Molecular Probes, Inc. and MACS anti-FITC and anti-biotin beads were from Miltenyi Biotec. Cl~2~MDP (or clodronate) and PBS liposomes were provided by Roche Diagnostics.\n\nConditional Targeting of SHIP.\n------------------------------\n\nFloxed SHIP mice were created by insertion of loxP sites flanking the 10th and 11th exons (see [Fig. 2](#fig2){ref-type=\&quot;fig\&quot;} a) of the SHIP gene. The targeting vector was introduced into embryonic stem (ES) cells by electroporation and clones were selected with neomycin and ganciclovir and verified by Southern blot and PCR. Properly integrated ES clones were transiently transfected with a Cre-expressing plasmid. Clones were subsequently selected for a conditional floxed allele (SHIP^flox^) or null allele (SHIP^null^) using Southern blot and PCR. Appropriate ES clones were then injected into blastocysts to generate chimeric mice. The chimeric mice were then bred with C57BL/6 mice to achieve germline transmission. These mice were subsequently crossed with mice expressing Cre in the myeloid compartment (LysMcre; reference [@bib19]) to generate Cre^+^/null/flox mice. Mice were screened for respective genotype by PCR and SHIP protein expression using Western blot ([@bib21]) on equal numbers of spleen cells purified by MACS (Miltenyi Biotec) sorting according to protocol from the manufacturer. Relative expression of SHIP in macrophage and B cell populations (comparing wt/null with flox/null/cre) were estimated using Alpha imager software from Alpha Innotech Corp.\n\nResults and Discussion\n======================\n\nMice deficient in the inhibitory signaling molecule SHIP display pleiotropic defects in macrophages, NK cells, and lymphocytes ([@bib18], [@bib22]). A prominent feature of these mice is their splenomegaly resulting from dysregulation of myeloid proliferation. As seen in [Fig. 1](#fig1){ref-type=\&quot;fig\&quot;} Figure 1.SHIP-deficient mice lack MZBs and MZMOs are displaced to the red pulp. (a) FACS^®^ profiles of single cell suspensions from the spleen of SHIP-heterozygous (SHIP^+/−^) and -deficient (SHIP^−/−^) mice. MZBs were measured as the CD19^+^, CRI^high^, and CD23^low^ population. The numbers shown represent percent of CD19^+^ cells for the depicted gates as an average of five mice. Numbers for the follicular B cells are shown for comparison. (b) Representative immunohistochemical analysis of above listed mice. At least four serial sections from each mouse were stained for MOMA-1^+^ (blue, top) metallophilic macrophages or MARCO^+^ MZMOs (blue, bottom). Sections were also stained for B220 (brown) to show the positioning of the follicle. ×10. , SHIP-deficient mice also display a specific defect in the organization of the splenic follicle with the loss of MZBs measured as the CD21^high^/CD23^low^ population in FACS^®^ and in sections as the B220^+^ cells localizing peripherally to the MOMA-1^+^ cells ([Fig. 1](#fig1){ref-type=\&quot;fig\&quot;}, a and b). In the SHIP-deficient mice the MARCO^+^ MZMO cells are no longer organized within the marginal zone and adjacent to the MOMA-1 macrophages but are redistributed to the red pulp, whereas MOMA-1^+^ metallophils remain unaffected ([Fig. 1](#fig1){ref-type=\&quot;fig\&quot;} b). Because SHIP is expressed in most hematopoietic cells, including lymphoid and myeloid subsets, we determined if this marginal zone phenotype in SHIP-deficient mice was the result of primary macrophage dysregulation. A conditional disruption of SHIP was generated in which macrophages displayed an approximate \\>90% reduction in SHIP expression whereas B cell expression was reduced by \\<10% ([Fig. 2](#fig2){ref-type=\&quot;fig\&quot;} Figure 2.Conditional targeting of SHIP in macrophages results in MZMO displacement and reduced numbers of MZBs. (a) A targeting construct covering exons 10 to 13 of SHIP, from EcoRI (E) to HindIII (H), was made. Boxes represent exons and triangles represent loxP sites flanking exons 10 to 11 and a neomycin resistance gene (neo). Properly integrated ES cell clones were transiently transfected with Cre recombinase to create conditional floxed (SHIP^flox^) or null (SHIP^null^) clones. These cells were subsequently used to create floxed (flox) and null mice, which were crossed to mice expressing Cre from a macrophage-specific lysosomal promoter (cre). (b) Western blot analysis of MAC1^+^ and CD19^+^ spleen cells (SPC) from WT, WT/null, null/null, LysM floxed (flox/null/cre), and relative spleen size of 6-wk-old WT/null and flox/null/cre SHIP mice. (c) FACS^®^ and histological profiles of single cell suspensions from the spleen of the conditionally targeted SHIP KO mice. MZBs were measured as the CD19^+^, CRI^high^, and CD23^low^ population. The numbers shown represent percent of CD19^+^ cells for the depicted gates as an average of five mice and the numbers for the follicular B cells are shown for comparison. For representative immunohistochemical analysis, at least four serial sections were stained for MOMA-1^+^ (blue, top) metallophilic macrophages or MARCO^+^ MZMOs (blue, bottom). Sections were also stained for B220 (brown) to show the positioning of the follicle. Refer to [Fig. 1](#fig1){ref-type=\&quot;fig\&quot;} for SHIP^+/−^ and SHIP^−/−^ profiles. ×10. , a and b). This is consistent with the expression patterns of Cre recombinase, driven by the lysosyme promoter used ([@bib19]). The mice developed a splenomegaly at ∼5 wk of age ([Fig. 2](#fig2){ref-type=\&quot;fig\&quot;} b), similar to that of complete SHIP deletion, thus implicating a primary macrophage defect as the cause for splenomegaly in SHIP^−/−^ mice ([@bib18]). In addition, the mice displayed essentially the same marginal zone phenotype with significantly reduced MZBs as defined by flow cytometry and reorganization of the MZMOs as observed by histological staining ([Fig. 2](#fig2){ref-type=\&quot;fig\&quot;} c). To confirm that the SHIP phenotype is B cell nonautonomous and that SHIP-deficient B cells can give rise to MZB populations when WT MZMOs are available, we produced BM chimeras using SHIP-deficient BM combined with WT BM and injected these cells into irradiated WT recipients. In the resulting chimeric mice the SHIP-deficient and WT BMs contributed equally to the MZB population (unpublished data).\n\nIn B cell lines it has been shown that SHIP functions as a negative regulator of cellular activation by regulating the association of the positive signaling kinase Btk with the membrane, thus raising the threshold required for stimulation ([@bib23]). It does so by hydrolyzing PIP~3~, the substrate for Btk association with the membrane, thereby reducing the ability of Btk to become membrane associated and activated ([@bib24]). Because both SHIP and Btk are expressed in macrophages and a link between these molecules had been suggested, we reasoned that the myeloid proliferation and MZMO phenotype leading to the loss of MZBs might be the result of inappropriate activation of Btk in macrophages of SHIP-deficient animals ([@bib25], [@bib26]). Disruption of Btk in macrophages may thus be sufficient to restore normal signaling thresholds in SHIP-deficient mice. Combining the SHIP deficiency with a Btk deficiency resulted in the restoration of both the normal marginal zone structure ([Fig. 3](#fig3){ref-type=\&quot;fig\&quot;} Figure 3.SHIP and Btk interact in myeloid proliferation and activation. (a) FACS^®^ and histological profiles of single cell suspensions from the spleen of SHIP and Btk double KO mice (SHIP^−/−^/Btk^−^). MZBs were measured as the CD19^+^, CRI^high^, and CD23^low^ population. The numbers shown represent percent of CD19^+^ cells for the depicted gates as an average of four mice and the numbers for the follicular B cells are shown for comparison. For representative immunohistochemical analysis, at least four serial sections from were stained for MOMA-1^+^ (blue, top) metallophilic macrophages or MARCO^+^ MZMOs (blue, bottom). Sections were also stained for B220 (brown) to show the positioning of the follicle. ×10. (b) Relative spleen size of 5-wk-old heterozygous KO or double KO mice. a) and spleen size ([Fig. 3](#fig3){ref-type=\&quot;fig\&quot;} b) indicating that Btk is an important target of SHIP in myeloid cells in vivo. Similarly, Btk deficiency counteracted the over responsiveness of myeloid progenitors to GM-CSF and M-CSF in SHIP-deficient mice (unpublished data). Both the dysregulation of myeloid proliferation and follicular architecture likely result from enhanced signaling through the Btk pathway in myeloid cells. Reversion of the MZB and myeloid phenotypes in SHIP^−/−^ mice by deletion of Btk suggests that Btk is the dominant Tec family member regulated by SHIP in these cells. The observation that other members of the family are expressed in macrophages and have been shown to be able to substitute for Btk both in vivo and in KO mice indicates a surprising degree of specificity to the SHIP inhibitory pathway ([@bib27]--[@bib29]).\n\nThese results suggested that MZMOs might be critical to the organization of the white pulp nodule and localization of MZBs in this structure. To test this directly we exploited the observation that MZMOs can be ablated by their preferential ingestion of macrophage-depleting liposomes ([@bib30]). At a low concentration of these liposomes we could see preferential depletion of MARCO^+^ MZMOs as opposed to the adjacent MOMA-1 macrophages ([Fig. 4](#fig4){ref-type=\&quot;fig\&quot;}) Figure 4.MARCO^+^ MZMOs are required for retention of MZBs. Representative immunohistochemical analysis and FACS^®^ profiles of spleens from at least four WT mice treated with liposomes or untreated op/op mice. WT mice were injected i.v. with 100 μl PBS containing liposomes or with liposomes containing clodronate at a 1:24 dilution where MZMOs were preferentially depleted. 48 h later serial spleen sections were stained for MOMA-1^+^ (blue, top) metallophilic macrophages or MARCO^+^ (blue, middle) MZMOs. The sections were also stained for B220 (brown) to see the positioning of these populations in relation to the B cell follicle. ×10. Spleen cells were analyzed by FACS^®^ analysis for detection of MZBs as measured by the CD19^+^, CRI^high^, and CD23^low^ population. Numbers shown are the average percent-positive cells of four mice. Similar profiles are shown for untreated *op/op* mice (right). Data shown are representative of three independent experiments. . Other phagocytic cells in the spleen, such as red pulp macrophages and dendritic cells were largely unaffected by this treatment (not depicted). When MZMOs were depleted in this fashion, we observe a specific reduction in the MZBs by both flow cytometry and histological staining. In contrast, MOMA-1 macrophages are specifically absent in the CSF-1--deficient strain *op/op* but these mice retain MARCO^+^/ER-TR9^−^ MZMOs ([@bib31], [@bib32]). The absence of the MOMA-1^+^ cells and the ER-TR9 marker did not result in reduction in MZBs, but rather, an expansion of these cells is observed, indicating that the macrophage population that is required for MZB retention are the MARCO^+^ MZMOs.\n\nThe identity of the retention signal expressed by MARCO^+^ MZMO cells was next determined by investigating the role of specific surface receptors on the MZMO in maintaining the marginal zone structure. The MARCO receptor, in addition to binding to bacteria ([@bib33]), contains an SRCR domain that has been implicated in binding to CD19^+^ lymphocytes ([@bib34], [@bib35]). To determine if MARCO itself is capable of binding to MZBs, we expressed the extracellular domains of MARCO as a soluble molecule ([@bib20]) and used it to stain splenic populations ([Fig. 5](#fig5){ref-type=\&quot;fig\&quot;}) Figure 5.Soluble MARCO receptor (sMARCO) binds preferentially to MZBs. Representative FACS^®^ analysis of spleen cells from WT mice stained with CRI, CD23, and biotinylated sMARCO. Binding of sMARCO to different spleen cell populations was based on gates set on the CRI versus CD23 stain. red, MZBs; blue, follicular B cells; black, non-B cells. The histogram (bottom) shows the mean fluorescence index (MFI) and SD (*n* = 5) for the different populations as well as the avidin (Av) control and block using the MARCO-specific ED31 Ab. Data shown are representative of three independent experiments. . Three populations of cells were distinguished by flow cytometry when stained with CD21 and CD23. Maximal binding to soluble MARCO was observed for the MZBs (CD21^hi^ CD23^low^), whereas the follicular B cells (CD21^low^ CD23^hi^) displayed reduced binding. None of the other splenic populations (T cells, macrophages, or dendritic cells) were capable of binding to soluble MARCO. This binding was specific for the MARCO SRCR domain, as determined by the ability of a monoclonal Ab to this domain (ED31; reference [@bib33]) to block the binding of soluble MARCO to MZBs. When the MARCO-specific Ab was injected i.v. to WT mice it resulted in disruption of the marginal zone structure in which MZBs, identified by CD1d staining, were found in the follicular region whereas MZMOs, identified by ER-TR9 staining, were retained in the marginal zone ([Fig. 6](#fig6){ref-type=\&quot;fig\&quot;}) Figure 6.In vivo disruption of MARCO and MZB interactions leads to MZB migration to the follicle. WT mice were given 100 μg control rat IgG or anti-MARCO (ED31) IgG i.v. 3 h later the mice were killed and the spleens were stained for macrophage and B cell populations. Representative stains of serial sections from at least four different mice are shown. MZMOs were detected with anti-MARCO (blue, top) or ER-TR9 (blue, middle) antibodies whereas metallophilic macrophages were stained with MOMA-1 (brown, bottom). B220^+^ B cells (brown) were stained for positioning of the follicle and MZBs as the CD1^high^ (blue, bottom) population. ×10. Part of the spleen was used for flow cytometric analysis to determine the CD19^+^, CRI^high^, and CD23^low^ populations. Numbers shown are the average of four mice. The percent of CD19^+^ cells for either MZBs or follicular B cells is shown for comparison. Data shown are representative of two independent experiments. . These results suggest that a direct interaction between MZMO and MZBs is mediated by MARCO--MZB binding, through a MARCO ligand expressed on these B cells, and provides a mechanism for the retention of MZBs by MARCO-expressing MZMO cells. Perturbation of this interaction either by disruption of adhesion and/or induction of macrophage activation by MARCO cross-linking results in the appearance of cells expressing a MZB surface phenotype in the follicular zone.\n\nTo address the relevance of the MARCO^+^ MZMO and its retention of MZBs to its contribution to the development of an immune response to pathogens, we injected mice i.v. with rhodamine-conjugated *S. aureus*, which is a known ligand for the MARCO receptor ([@bib12]). Within 30 min of injection bacteria were visualized exclusively bound to the MZMO cells, a role consistent with the phagocytic property of these scavenger receptor--expressing cells ([Fig. 7](#fig7){ref-type=\&quot;fig\&quot;}) Figure 7.*S. aureus* induce MZMO movement and displacement of MZBs. WT mice were injected i.v. with 250 μg heat-killed and rhodamine-conjugated *S. aureus* in PBS. 0.5 or 18 h later the mice were killed and the spleens were sectioned and stained. Representative stains from at least four mice are shown. MARCO^+^ MZMOs (left) are stained blue and B220^+^ B cells are stained brown. The middle shows the same stains as in the left, merged with the fluorescent stain of *S. aureus.* The right shows stains for the CD1^high^ MZB population (blue) and MOMA-1^+^ metallophilic macrophages (brown). ×10. The data shown are representative of two independent experiments. . 18 h after injection the microbes and the MZMO were found to have comigrated into the red pulp and cells with a MZB phenotype (CD1d^high^) were mostly found in the follicular region. These results are consistent with a model in which interaction of *S. aureus* with MARCO on MZMOs results in their migration into the red pulp and the concomitant migration of MZBs into the follicular region as has been reported for LPS and *E. coli* ([@bib8], [@bib9]). The deletion of the inhibitory signaling molecule SHIP results in a similar MZMO migration response, suggesting that MZMO activation can trigger migration into the red pulp. We presume that the likely explanation for the migration seen in response to *S. aureus* ingestion is the activation of MZMOs by their encounter with these bacteria as has been described ([@bib36], [@bib37]). A similar result was observed for *E. coli* suggesting a more general migratory response by MZMO cells to microbial challenge (unpublished data). The migratory response of the MZMO, carrying Ag to the red pulp, could simply be a method of clearance of particulate Ags or alternatively MZMOs could function as Ag transporters/presenters and supporters of plasmablast formation shown to take place in the red pulp ([Fig. 8](#fig8){ref-type=\&quot;fig\&quot;} Figure 8.Proposed model for interactions between MZMO and MZB and the response of these cells to blood-borne pathogens. In the marginal zone (MZ), MZBs interact with the MZMO via the MARCO receptor (a) and with stromal elements via the ICAM/VCAM and their respective ligands LFA-1 and α4β1 (b). Upon phagocytosis of particulate Ags, the MARCO^+^ MZMOs migrate to the red pulp (c) and the majority of the MZBs migrate to the follicle where they interact with cells such as dendritic and follicular dendritic (d, DC and FDC). In the early response to T cell--independent Ags, the MZB also has the capacity to migrate to the red pulp to take part in plasma cell formation (e), where a possible interaction with MZMOs and MZBs may take place. ; references [@bib38]--[@bib40]). This has previously been reported to be a function of dendritic cells in the T/B cell border of the follicle and by macrophages supporting B1 B cells in the peritoneum ([@bib10]). Interestingly, Kang et al. ([@bib14]) recently showed that phagosomes in MZMOs, after uptake of dextran polysaccarides via SIGN-RI did not stain positive for the endosomal markers LAMP-1 and transferrin. This suggests that Ags taken up by MZMOs may not necessarily take the route of normal phagosome maturation ([@bib41]) resulting in destruction or Ag presentation and thus could provide a mechanism to transport intact Ag to the red pulp by MZMOs.\n\nThese results suggest that the interaction of MZMO cells with MZBs is required to maintain the marginal zone structure and that this association is perturbed upon MZMO binding and activation by microbial pathogens. It is likely that the MZBs migrate into the follicular zone in response to CXCL13 ([@bib9]) in the absence of retention signals from the MARCO^+^ MZMO. This pathway is likely to be independent of the integrin pathway involving stromal VCAM/ICAM and B cell LFA-1/α4β1 because disruption of that pathway with antibodies to LFA-1 and α4β1 results in the release of MZBs to the blood stream ([@bib9]), not their migration into the follicle, in contrast to the results presented here ([Fig. 8](#fig8){ref-type=\&quot;fig\&quot;}). In addition, we see no effect on the localization of MZMO cells using antibodies to the stromal integrins, nor do we observe effects on their ligand expression when MZMO cells are triggered to migrate (unpublished data). These pathways are thus likely to serve different functions in the organization of the marginal zone, with the MZMO pathway specific for the antimicrobial response, leading to internalization of the organism and trafficking of B cells into the follicular zone to propagate the immune responses. MZBs have the capacity to bind polysaccharide Ags through complement-mediated pathways and transport these to the follicular area of the spleen ([@bib6], [@bib8], [@bib42]). The events we have described appear to be another mechanism for delivery of MZBs and Ag to the T cell--rich follicular region. MZBs have mostly been implicated in the response to T cell--independent Ags, however, they are also capable of presenting Ags ([@bib43]) and may thus be important both for the T cell--dependent and --independent phase of the earliest defense against a pathogen.\n\nWe would like to thank members of the Ravetch and Steinman labs at The Rockefeller University, especially Pierre Bruhns, Patrick Smith, Maggi Pack, Chae Gyu Park, and Sayori Yamazaki for technical assistance and comments on the manuscript. We also thank Dr. Jeffrey Pollard for op/op mice and Dr. Timo Pikkarainen for reagents and helpful comments.\n\nThis work was supported by the Swedish Cancer Society and the NIH.\n\n*Abbreviations used in this paper:* Btk, Bruton\\'s tyrosine kinase; ES, embryonic stem; MZB, marginal zone B cell; MZMO, marginal zone macrophage; SHIP, SH2-containing inositol-5-phosphatase 1.\n&quot;}}},{&quot;rowIdx&quot;:7,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;Q:\n\nHow can I Check the current value which is already passed or not in an array in nested foreach in php\n\nMy array \n$key1=>\nArray\n(\n    [0] => 1\n    [1] => 2\n    [2] => 7\n    [3] => 11\n    [4] => 12\n    [5] => 17\n    [6] => 18\n)\n\n$_POST['name']=>\nArray\n(\n    [0] => General\n    [1] => General\n    [2] => Outdoors\n    [3] => Dining\n    [4] => Kitchen\n\n)\n\nHere is my code,\n       foreach ($key1 as $key => $value) {\n        // echo $value;\n              foreach ($_POST['name'] as $key => $value1) {\n                    //echo $value;\n                    $subQueryCond .=' AND '.$value1.' LIKE  ' .$value ;\n                         }\n        }\n\nWhile my Ajax calls this nested loop occurs..\nInside this I wrote a query..\nIf one value is passed.\nThe query is in the format of  AND 'General' LIKE 1.  \nAnd if another value is passed in the $key1 it pass the query two times. \nIt's like How many arrays are given that much time that query was passed..\nSo,here I would like to restrict the $value if it already came..\nif two values were given,it pass the query in the following manner\nAND General LIKE  1 \n\nAND Outdoors LIKE  1 \n\nAND General LIKE  7 \n\nAND Outdoors LIKE  7\n\nAnd my desired query must be in the form of\nAND General LIKE  1 \n\nAND General LIKE  7 \n\nAND Outdoors LIKE  7\n\ncan someone help me..\n\nA:\n\nThis will work for you... \n<?php \n\n$subQueryCond= '';\nforeach ($key1 as $key => $value)\n{\n  foreach ($_POST['name'] as $key => $value1) \n  {\n     $subQueryCond['AND '.$value1.' LIKE  ' .$value] = ' AND '.$value1.' LIKE  ' .$value ;\n  }\n}\necho \&quot;<pre>\&quot;; print_r($subQueryCond);\n$query =  implode('',$subQueryCond) ;\nprint_r($query);\n\n?>\n\njust make an array with unique keys to value, then use implode() function to make query string...\n\n&quot;}}},{&quot;rowIdx&quot;:8,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;Safety of union home care aides in Washington State.\nA rate-based understanding of home care aides' adverse occupational outcomes related to their work location and care tasks is lacking. Within a 30-month, dynamic cohort of 43 394 home care aides in Washington State, injury rates were calculated by aides' demographic and work characteristics. Injury narratives and focus groups provided contextual detail. Injury rates were higher for home care aides categorized as female, white, 50 to <65 years old, less experienced, with a primary language of English, and working through an agency (versus individual providers). In addition to direct occupational hazards, variability in workload, income, and supervisory/social support is of concern. Policies should address the roles and training of home care aides, consumers, and managers/supervisors. Home care aides' improved access to often-existing resources to identify, manage, and eliminate occupational hazards is called for to prevent injuries and address concerns related to the vulnerability of this needed workforce.&quot;}}},{&quot;rowIdx&quot;:9,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;{-# LANGUAGE FlexibleContexts #-}\n{-# LANGUAGE OverloadedStrings #-}\n{-# LANGUAGE Safe #-}\n{-# LANGUAGE Strict #-}\n{-# LANGUAGE TupleSections #-}\n{-# LANGUAGE TypeFamilies #-}\n\n-- |\n--\n-- This module implements a transformation from source to core\n-- Futhark.\nmodule Futhark.Internalise (internaliseProg) where\n\nimport Control.Monad.Reader\nimport Data.Bitraversable\nimport Data.List (find, intercalate, intersperse, nub, transpose)\nimport qualified Data.List.NonEmpty as NE\nimport qualified Data.Map.Strict as M\nimport qualified Data.Set as S\nimport Futhark.IR.SOACS as I hiding (stmPattern)\nimport Futhark.Internalise.AccurateSizes\nimport Futhark.Internalise.Bindings\nimport Futhark.Internalise.Defunctionalise as Defunctionalise\nimport Futhark.Internalise.Defunctorise as Defunctorise\nimport Futhark.Internalise.Lambdas\nimport Futhark.Internalise.Monad as I\nimport Futhark.Internalise.Monomorphise as Monomorphise\nimport Futhark.Internalise.TypesValues\nimport Futhark.Transform.Rename as I\nimport Futhark.Util (splitAt3)\nimport Language.Futhark as E hiding (TypeArg)\nimport Language.Futhark.Semantic (Imports)\n\n-- | Convert a program in source Futhark to a program in the Futhark\n-- core language.\ninternaliseProg ::\n  MonadFreshNames m =>\n  Bool ->\n  Imports ->\n  m (I.Prog SOACS)\ninternaliseProg always_safe prog = do\n  prog_decs <- Defunctorise.transformProg prog\n  prog_decs' <- Monomorphise.transformProg prog_decs\n  prog_decs'' <- Defunctionalise.transformProg prog_decs'\n  (consts, funs) <-\n    runInternaliseM always_safe (internaliseValBinds prog_decs'')\n  I.renameProg $ I.Prog consts funs\n\ninternaliseAttr :: E.AttrInfo -> Attr\ninternaliseAttr (E.AttrAtom v) = I.AttrAtom v\ninternaliseAttr (E.AttrComp f attrs) = I.AttrComp f $ map internaliseAttr attrs\n\ninternaliseAttrs :: [E.AttrInfo] -> Attrs\ninternaliseAttrs = mconcat . map (oneAttr . internaliseAttr)\n\ninternaliseValBinds :: [E.ValBind] -> InternaliseM ()\ninternaliseValBinds = mapM_ internaliseValBind\n\ninternaliseFunName :: VName -> [E.Pattern] -> InternaliseM Name\ninternaliseFunName ofname [] = return $ nameFromString $ pretty ofname ++ \&quot;f\&quot;\ninternaliseFunName ofname _ = do\n  info <- lookupFunction' ofname\n  -- In some rare cases involving local functions, the same function\n  -- name may be re-used in multiple places.  We check whether the\n  -- function name has already been used, and generate a new one if\n  -- so.\n  case info of\n    Just _ -> nameFromString . pretty <$> newNameFromString (baseString ofname)\n    Nothing -> return $ nameFromString $ pretty ofname\n\ninternaliseValBind :: E.ValBind -> InternaliseM ()\ninternaliseValBind fb@(E.ValBind entry fname retdecl (Info (rettype, _)) tparams params body _ attrs loc) = do\n  localConstsScope $\n    bindingParams tparams params $ \\shapeparams params' -> do\n      let shapenames = map I.paramName shapeparams\n          normal_params = shapenames ++ map I.paramName (concat params')\n          normal_param_names = namesFromList normal_params\n\n      fname' <- internaliseFunName fname params\n\n      msg <- case retdecl of\n        Just dt ->\n          errorMsg\n            . (\&quot;Function return value does not match shape of type \&quot; :)\n            <$> typeExpForError dt\n        Nothing -> return $ errorMsg [\&quot;Function return value does not match shape of declared return type.\&quot;]\n\n      ((rettype', body_res), body_stms) <- collectStms $ do\n        body_res <- internaliseExp \&quot;res\&quot; body\n        rettype_bad <- internaliseReturnType rettype\n        let rettype' = zeroExts rettype_bad\n        return (rettype', body_res)\n      body' <-\n        ensureResultExtShape msg loc (map I.fromDecl rettype') $\n          mkBody body_stms body_res\n\n      constants <- allConsts\n      let free_in_fun =\n            freeIn body'\n              `namesSubtract` normal_param_names\n              `namesSubtract` constants\n\n      used_free_params <- forM (namesToList free_in_fun) $ \\v -> do\n        v_t <- lookupType v\n        return $ Param v $ toDecl v_t Nonunique\n\n      let free_shape_params =\n            map (`Param` I.Prim int32) $\n              concatMap (I.shapeVars . I.arrayShape . I.paramType) used_free_params\n          free_params = nub $ free_shape_params ++ used_free_params\n          all_params = free_params ++ shapeparams ++ concat params'\n\n      let fd =\n            I.FunDef\n              Nothing\n              (internaliseAttrs attrs)\n              fname'\n              rettype'\n              all_params\n              body'\n\n      if null params'\n        then bindConstant fname fd\n        else\n          bindFunction\n            fname\n            fd\n            ( fname',\n              map I.paramName free_params,\n              shapenames,\n              map declTypeOf $ concat params',\n              all_params,\n              applyRetType rettype' all_params\n            )\n\n  case entry of\n    Just (Info entry') -> generateEntryPoint entry' fb\n    Nothing -> return ()\n  where\n    zeroExts ts = generaliseExtTypes ts ts\n\nallDimsFreshInType :: MonadFreshNames m => E.PatternType -> m E.PatternType\nallDimsFreshInType = bitraverse onDim pure\n  where\n    onDim (E.NamedDim v) =\n      E.NamedDim . E.qualName <$> newVName (baseString $ E.qualLeaf v)\n    onDim _ =\n      E.NamedDim . E.qualName <$> newVName \&quot;size\&quot;\n\n-- | Replace all named dimensions with a fresh name, and remove all\n-- constant dimensions.  The point is to remove the constraints, but\n-- keep the names around.  We use this for constructing the entry\n-- point parameters.\nallDimsFreshInPat :: MonadFreshNames m => E.Pattern -> m E.Pattern\nallDimsFreshInPat (PatternAscription p _ _) =\n  allDimsFreshInPat p\nallDimsFreshInPat (PatternParens p _) =\n  allDimsFreshInPat p\nallDimsFreshInPat (Id v (Info t) loc) =\n  Id v <$> (Info <$> allDimsFreshInType t) <*> pure loc\nallDimsFreshInPat (TuplePattern ps loc) =\n  TuplePattern <$> mapM allDimsFreshInPat ps <*> pure loc\nallDimsFreshInPat (RecordPattern ps loc) =\n  RecordPattern <$> mapM (traverse allDimsFreshInPat) ps <*> pure loc\nallDimsFreshInPat (Wildcard (Info t) loc) =\n  Wildcard <$> (Info <$> allDimsFreshInType t) <*> pure loc\nallDimsFreshInPat (PatternLit e (Info t) loc) =\n  PatternLit e <$> (Info <$> allDimsFreshInType t) <*> pure loc\nallDimsFreshInPat (PatternConstr c (Info t) pats loc) =\n  PatternConstr c <$> (Info <$> allDimsFreshInType t)\n    <*> mapM allDimsFreshInPat pats\n    <*> pure loc\n\ngenerateEntryPoint :: E.EntryPoint -> E.ValBind -> InternaliseM ()\ngenerateEntryPoint (E.EntryPoint e_paramts e_rettype) vb = localConstsScope $ do\n  let (E.ValBind _ ofname _ (Info (rettype, _)) _ params _ _ attrs loc) = vb\n  -- We replace all shape annotations, so there should be no constant\n  -- parameters here.\n  params_fresh <- mapM allDimsFreshInPat params\n  let tparams =\n        map (`E.TypeParamDim` mempty) $\n          S.toList $\n            mconcat $ map E.patternDimNames params_fresh\n  bindingParams tparams params_fresh $ \\shapeparams params' -> do\n    entry_rettype <- internaliseEntryReturnType $ anySizes rettype\n    let entry' = entryPoint (zip e_paramts params') (e_rettype, entry_rettype)\n        args = map (I.Var . I.paramName) $ concat params'\n\n    entry_body <- insertStmsM $ do\n      -- Special case the (rare) situation where the entry point is\n      -- not a function.\n      maybe_const <- lookupConst ofname\n      vals <- case maybe_const of\n        Just ses ->\n          return ses\n        Nothing ->\n          fst <$> funcall \&quot;entry_result\&quot; (E.qualName ofname) args loc\n      ctx <-\n        extractShapeContext (concat entry_rettype)\n          <$> mapM (fmap I.arrayDims . subExpType) vals\n      resultBodyM (ctx ++ vals)\n\n    addFunDef $\n      I.FunDef\n        (Just entry')\n        (internaliseAttrs attrs)\n        (baseName ofname)\n        (concat entry_rettype)\n        (shapeparams ++ concat params')\n        entry_body\n\nentryPoint ::\n  [(E.EntryType, [I.FParam])] ->\n  ( E.EntryType,\n    [[I.TypeBase ExtShape Uniqueness]]\n  ) ->\n  I.EntryPoint\nentryPoint params (eret, crets) =\n  ( concatMap (entryPointType . preParam) params,\n    case ( isTupleRecord $ entryType eret,\n           entryAscribed eret\n         ) of\n      (Just ts, Just (E.TETuple e_ts _)) ->\n        concatMap entryPointType $\n          zip (zipWith E.EntryType ts (map Just e_ts)) crets\n      (Just ts, Nothing) ->\n        concatMap entryPointType $\n          zip (map (`E.EntryType` Nothing) ts) crets\n      _ ->\n        entryPointType (eret, concat crets)\n  )\n  where\n    preParam (e_t, ps) = (e_t, staticShapes $ map I.paramDeclType ps)\n\n    entryPointType (t, ts)\n      | E.Scalar (E.Prim E.Unsigned {}) <- E.entryType t =\n        [I.TypeUnsigned]\n      | E.Array _ _ (E.Prim E.Unsigned {}) _ <- E.entryType t =\n        [I.TypeUnsigned]\n      | E.Scalar E.Prim {} <- E.entryType t =\n        [I.TypeDirect]\n      | E.Array _ _ E.Prim {} _ <- E.entryType t =\n        [I.TypeDirect]\n      | otherwise =\n        [I.TypeOpaque desc $ length ts]\n      where\n        desc = maybe (pretty t') typeExpOpaqueName $ E.entryAscribed t\n        t' = noSizes (E.entryType t) `E.setUniqueness` Nonunique\n    typeExpOpaqueName (TEApply te TypeArgExpDim {} _) =\n      typeExpOpaqueName te\n    typeExpOpaqueName (TEArray te _ _) =\n      let (d, te') = withoutDims te\n       in \&quot;arr_\&quot; ++ typeExpOpaqueName te'\n            ++ \&quot;_\&quot;\n            ++ show (1 + d)\n            ++ \&quot;d\&quot;\n    typeExpOpaqueName te = pretty te\n\n    withoutDims (TEArray te _ _) =\n      let (d, te') = withoutDims te\n       in (d + 1, te')\n    withoutDims te = (0 :: Int, te)\n\ninternaliseIdent :: E.Ident -> InternaliseM I.VName\ninternaliseIdent (E.Ident name (Info tp) loc) =\n  case tp of\n    E.Scalar E.Prim {} -> return name\n    _ ->\n      error $\n        \&quot;Futhark.Internalise.internaliseIdent: asked to internalise non-prim-typed ident '\&quot;\n          ++ pretty name\n          ++ \&quot; of type \&quot;\n          ++ pretty tp\n          ++ \&quot; at \&quot;\n          ++ locStr loc\n          ++ \&quot;.\&quot;\n\ninternaliseBody :: E.Exp -> InternaliseM Body\ninternaliseBody e = insertStmsM $ resultBody <$> internaliseExp \&quot;res\&quot; e\n\nbodyFromStms ::\n  InternaliseM (Result, a) ->\n  InternaliseM (Body, a)\nbodyFromStms m = do\n  ((res, a), stms) <- collectStms m\n  (,a) <$> mkBodyM stms res\n\ninternaliseExp :: String -> E.Exp -> InternaliseM [I.SubExp]\ninternaliseExp desc (E.Parens e _) =\n  internaliseExp desc e\ninternaliseExp desc (E.QualParens _ e _) =\n  internaliseExp desc e\ninternaliseExp desc (E.StringLit vs _) =\n  fmap pure $\n    letSubExp desc $\n      I.BasicOp $ I.ArrayLit (map constant vs) $ I.Prim int8\ninternaliseExp _ (E.Var (E.QualName _ name) (Info t) loc) = do\n  subst <- lookupSubst name\n  case subst of\n    Just substs -> return substs\n    Nothing -> do\n      -- If this identifier is the name of a constant, we have to turn it\n      -- into a call to the corresponding function.\n      is_const <- lookupConst name\n      case is_const of\n        Just ses -> return ses\n        Nothing -> (: []) . I.Var <$> internaliseIdent (E.Ident name (Info t) loc)\ninternaliseExp desc (E.Index e idxs (Info ret, Info retext) loc) = do\n  vs <- internaliseExpToVars \&quot;indexed\&quot; e\n  dims <- case vs of\n    [] -> return [] -- Will this happen?\n    v : _ -> I.arrayDims <$> lookupType v\n  (idxs', cs) <- internaliseSlice loc dims idxs\n  let index v = do\n        v_t <- lookupType v\n        return $ I.BasicOp $ I.Index v $ fullSlice v_t idxs'\n  ses <- certifying cs $ letSubExps desc =<< mapM index vs\n  bindExtSizes (E.toStruct ret) retext ses\n  return ses\n\n-- XXX: we map empty records and tuples to bools, because otherwise\n-- arrays of unit will lose their sizes.\ninternaliseExp _ (E.TupLit [] _) =\n  return [constant True]\ninternaliseExp _ (E.RecordLit [] _) =\n  return [constant True]\ninternaliseExp desc (E.TupLit es _) = concat <$> mapM (internaliseExp desc) es\ninternaliseExp desc (E.RecordLit orig_fields _) =\n  concatMap snd . sortFields . M.unions <$> mapM internaliseField orig_fields\n  where\n    internaliseField (E.RecordFieldExplicit name e _) =\n      M.singleton name <$> internaliseExp desc e\n    internaliseField (E.RecordFieldImplicit name t loc) =\n      internaliseField $\n        E.RecordFieldExplicit\n          (baseName name)\n          (E.Var (E.qualName name) t loc)\n          loc\ninternaliseExp desc (E.ArrayLit es (Info arr_t) loc)\n  -- If this is a multidimensional array literal of primitives, we\n  -- treat it specially by flattening it out followed by a reshape.\n  -- This cuts down on the amount of statements that are produced, and\n  -- thus allows us to efficiently handle huge array literals - a\n  -- corner case, but an important one.\n  | Just ((eshape, e') : es') <- mapM isArrayLiteral es,\n    not $ null eshape,\n    all ((eshape ==) . fst) es',\n    Just basetype <- E.peelArray (length eshape) arr_t = do\n    let flat_lit = E.ArrayLit (e' ++ concatMap snd es') (Info basetype) loc\n        new_shape = length es : eshape\n    flat_arrs <- internaliseExpToVars \&quot;flat_literal\&quot; flat_lit\n    forM flat_arrs $ \\flat_arr -> do\n      flat_arr_t <- lookupType flat_arr\n      let new_shape' =\n            reshapeOuter\n              (map (DimNew . intConst Int32 . toInteger) new_shape)\n              1\n              $ I.arrayShape flat_arr_t\n      letSubExp desc $ I.BasicOp $ I.Reshape new_shape' flat_arr\n  | otherwise = do\n    es' <- mapM (internaliseExp \&quot;arr_elem\&quot;) es\n    arr_t_ext <- internaliseReturnType (E.toStruct arr_t)\n\n    rowtypes <-\n      case mapM (fmap rowType . hasStaticShape . I.fromDecl) arr_t_ext of\n        Just ts -> pure ts\n        Nothing ->\n          -- XXX: the monomorphiser may create single-element array\n          -- literals with an unknown row type.  In those cases we\n          -- need to look at the types of the actual elements.\n          -- Fixing this in the monomorphiser is a lot more tricky\n          -- than just working around it here.\n          case es' of\n            [] -> error $ \&quot;internaliseExp ArrayLit: existential type: \&quot; ++ pretty arr_t\n            e' : _ -> mapM subExpType e'\n\n    let arraylit ks rt = do\n          ks' <-\n            mapM\n              ( ensureShape\n                  \&quot;shape of element differs from shape of first element\&quot;\n                  loc\n                  rt\n                  \&quot;elem_reshaped\&quot;\n              )\n              ks\n          return $ I.BasicOp $ I.ArrayLit ks' rt\n\n    letSubExps desc\n      =<< if null es'\n        then mapM (arraylit []) rowtypes\n        else zipWithM arraylit (transpose es') rowtypes\n  where\n    isArrayLiteral :: E.Exp -> Maybe ([Int], [E.Exp])\n    isArrayLiteral (E.ArrayLit inner_es _ _) = do\n      (eshape, e) : inner_es' <- mapM isArrayLiteral inner_es\n      guard $ all ((eshape ==) . fst) inner_es'\n      return (length inner_es : eshape, e ++ concatMap snd inner_es')\n    isArrayLiteral e =\n      Just ([], [e])\ninternaliseExp desc (E.Range start maybe_second end (Info ret, Info retext) loc) = do\n  start' <- internaliseExp1 \&quot;range_start\&quot; start\n  end' <- internaliseExp1 \&quot;range_end\&quot; $ case end of\n    DownToExclusive e -> e\n    ToInclusive e -> e\n    UpToExclusive e -> e\n  maybe_second' <-\n    traverse (internaliseExp1 \&quot;range_second\&quot;) maybe_second\n\n  -- Construct an error message in case the range is invalid.\n  let conv = case E.typeOf start of\n        E.Scalar (E.Prim (E.Unsigned _)) -> asIntS Int32\n        _ -> asIntS Int32\n  start'_i32 <- conv start'\n  end'_i32 <- conv end'\n  maybe_second'_i32 <- traverse conv maybe_second'\n  let errmsg =\n        errorMsg $\n          [\&quot;Range \&quot;]\n            ++ [ErrorInt32 start'_i32]\n            ++ ( case maybe_second'_i32 of\n                   Nothing -> []\n                   Just second_i32 -> [\&quot;..\&quot;, ErrorInt32 second_i32]\n               )\n            ++ ( case end of\n                   DownToExclusive {} -> [\&quot;..>\&quot;]\n                   ToInclusive {} -> [\&quot;...\&quot;]\n                   UpToExclusive {} -> [\&quot;..<\&quot;]\n               )\n            ++ [ErrorInt32 end'_i32, \&quot; is invalid.\&quot;]\n\n  (it, le_op, lt_op) <-\n    case E.typeOf start of\n      E.Scalar (E.Prim (E.Signed it)) -> return (it, CmpSle it, CmpSlt it)\n      E.Scalar (E.Prim (E.Unsigned it)) -> return (it, CmpUle it, CmpUlt it)\n      start_t -> error $ \&quot;Start value in range has type \&quot; ++ pretty start_t\n\n  let one = intConst it 1\n      negone = intConst it (-1)\n      default_step = case end of\n        DownToExclusive {} -> negone\n        ToInclusive {} -> one\n        UpToExclusive {} -> one\n\n  (step, step_zero) <- case maybe_second' of\n    Just second' -> do\n      subtracted_step <-\n        letSubExp \&quot;subtracted_step\&quot; $\n          I.BasicOp $ I.BinOp (I.Sub it I.OverflowWrap) second' start'\n      step_zero <- letSubExp \&quot;step_zero\&quot; $ I.BasicOp $ I.CmpOp (I.CmpEq $ IntType it) start' second'\n      return (subtracted_step, step_zero)\n    Nothing ->\n      return (default_step, constant False)\n\n  step_sign <- letSubExp \&quot;s_sign\&quot; $ BasicOp $ I.UnOp (I.SSignum it) step\n  step_sign_i32 <- asIntS Int32 step_sign\n\n  bounds_invalid_downwards <-\n    letSubExp \&quot;bounds_invalid_downwards\&quot; $\n      I.BasicOp $ I.CmpOp le_op start' end'\n  bounds_invalid_upwards <-\n    letSubExp \&quot;bounds_invalid_upwards\&quot; $\n      I.BasicOp $ I.CmpOp lt_op end' start'\n\n  (distance, step_wrong_dir, bounds_invalid) <- case end of\n    DownToExclusive {} -> do\n      step_wrong_dir <-\n        letSubExp \&quot;step_wrong_dir\&quot; $\n          I.BasicOp $ I.CmpOp (I.CmpEq $ IntType it) step_sign one\n      distance <-\n        letSubExp \&quot;distance\&quot; $\n          I.BasicOp $ I.BinOp (Sub it I.OverflowWrap) start' end'\n      distance_i32 <- asIntS Int32 distance\n      return (distance_i32, step_wrong_dir, bounds_invalid_downwards)\n    UpToExclusive {} -> do\n      step_wrong_dir <-\n        letSubExp \&quot;step_wrong_dir\&quot; $\n          I.BasicOp $ I.CmpOp (I.CmpEq $ IntType it) step_sign negone\n      distance <- letSubExp \&quot;distance\&quot; $ I.BasicOp $ I.BinOp (Sub it I.OverflowWrap) end' start'\n      distance_i32 <- asIntS Int32 distance\n      return (distance_i32, step_wrong_dir, bounds_invalid_upwards)\n    ToInclusive {} -> do\n      downwards <-\n        letSubExp \&quot;downwards\&quot; $\n          I.BasicOp $ I.CmpOp (I.CmpEq $ IntType it) step_sign negone\n      distance_downwards_exclusive <-\n        letSubExp \&quot;distance_downwards_exclusive\&quot; $\n          I.BasicOp $ I.BinOp (Sub it I.OverflowWrap) start' end'\n      distance_upwards_exclusive <-\n        letSubExp \&quot;distance_upwards_exclusive\&quot; $\n          I.BasicOp $ I.BinOp (Sub it I.OverflowWrap) end' start'\n\n      bounds_invalid <-\n        letSubExp \&quot;bounds_invalid\&quot; $\n          I.If\n            downwards\n            (resultBody [bounds_invalid_downwards])\n            (resultBody [bounds_invalid_upwards])\n            $ ifCommon [I.Prim I.Bool]\n      distance_exclusive <-\n        letSubExp \&quot;distance_exclusive\&quot; $\n          I.If\n            downwards\n            (resultBody [distance_downwards_exclusive])\n            (resultBody [distance_upwards_exclusive])\n            $ ifCommon [I.Prim $ IntType it]\n      distance_exclusive_i32 <- asIntS Int32 distance_exclusive\n      distance <-\n        letSubExp \&quot;distance\&quot; $\n          I.BasicOp $\n            I.BinOp\n              (Add Int32 I.OverflowWrap)\n              distance_exclusive_i32\n              (intConst Int32 1)\n      return (distance, constant False, bounds_invalid)\n\n  step_invalid <-\n    letSubExp \&quot;step_invalid\&quot; $\n      I.BasicOp $ I.BinOp I.LogOr step_wrong_dir step_zero\n\n  invalid <-\n    letSubExp \&quot;range_invalid\&quot; $\n      I.BasicOp $ I.BinOp I.LogOr step_invalid bounds_invalid\n  valid <- letSubExp \&quot;valid\&quot; $ I.BasicOp $ I.UnOp I.Not invalid\n  cs <- assert \&quot;range_valid_c\&quot; valid errmsg loc\n\n  step_i32 <- asIntS Int32 step\n  pos_step <-\n    letSubExp \&quot;pos_step\&quot; $\n      I.BasicOp $ I.BinOp (Mul Int32 I.OverflowWrap) step_i32 step_sign_i32\n\n  num_elems <-\n    certifying cs $\n      letSubExp \&quot;num_elems\&quot; $\n        I.BasicOp $ I.BinOp (SDivUp Int32 I.Unsafe) distance pos_step\n\n  se <- letSubExp desc (I.BasicOp $ I.Iota num_elems start' step it)\n  bindExtSizes (E.toStruct ret) retext [se]\n  return [se]\ninternaliseExp desc (E.Ascript e _ _) =\n  internaliseExp desc e\ninternaliseExp desc (E.Coerce e (TypeDecl dt (Info et)) (Info ret, Info retext) loc) = do\n  ses <- internaliseExp desc e\n  ts <- internaliseReturnType et\n  dt' <- typeExpForError dt\n  bindExtSizes (E.toStruct ret) retext ses\n  forM (zip ses ts) $ \\(e', t') -> do\n    dims <- arrayDims <$> subExpType e'\n    let parts =\n          [\&quot;Value of (core language) shape (\&quot;]\n            ++ intersperse \&quot;, \&quot; (map ErrorInt32 dims)\n            ++ [\&quot;) cannot match shape of type `\&quot;]\n            ++ dt'\n            ++ [\&quot;`.\&quot;]\n    ensureExtShape (errorMsg parts) loc (I.fromDecl t') desc e'\ninternaliseExp desc (E.Negate e _) = do\n  e' <- internaliseExp1 \&quot;negate_arg\&quot; e\n  et <- subExpType e'\n  case et of\n    I.Prim (I.IntType t) ->\n      letTupExp' desc $ I.BasicOp $ I.BinOp (I.Sub t I.OverflowWrap) (I.intConst t 0) e'\n    I.Prim (I.FloatType t) ->\n      letTupExp' desc $ I.BasicOp $ I.BinOp (I.FSub t) (I.floatConst t 0) e'\n    _ -> error \&quot;Futhark.Internalise.internaliseExp: non-numeric type in Negate\&quot;\ninternaliseExp desc e@E.Apply {} = do\n  (qfname, args, ret, retext) <- findFuncall e\n  -- Argument evaluation is outermost-in so that any existential sizes\n  -- created by function applications can be brought into scope.\n  let fname = nameFromString $ pretty $ baseName $ qualLeaf qfname\n      loc = srclocOf e\n      arg_desc = nameToString fname ++ \&quot;_arg\&quot;\n\n  -- Some functions are magical (overloaded) and we handle that here.\n  ses <-\n    case () of\n      -- Overloaded functions never take array arguments (except\n      -- equality, but those cannot be existential), so we can safely\n      -- ignore the existential dimensions.\n      ()\n        | Just internalise <- isOverloadedFunction qfname (map fst args) loc ->\n          internalise desc\n        | Just (rettype, _) <- M.lookup fname I.builtInFunctions -> do\n          let tag ses = [(se, I.Observe) | se <- ses]\n          args' <- reverse <$> mapM (internaliseArg arg_desc) (reverse args)\n          let args'' = concatMap tag args'\n          letTupExp' desc $\n            I.Apply\n              fname\n              args''\n              [I.Prim rettype]\n              (Safe, loc, [])\n        | otherwise -> do\n          args' <- concat . reverse <$> mapM (internaliseArg arg_desc) (reverse args)\n          fst <$> funcall desc qfname args' loc\n\n  bindExtSizes ret retext ses\n  return ses\ninternaliseExp desc (E.LetPat pat e body (Info ret, Info retext) _) = do\n  ses <- internalisePat desc pat e body (internaliseExp desc)\n  bindExtSizes (E.toStruct ret) retext ses\n  return ses\ninternaliseExp desc (E.LetFun ofname (tparams, params, retdecl, Info rettype, body) letbody _ loc) = do\n  internaliseValBind $\n    E.ValBind Nothing ofname retdecl (Info (rettype, [])) tparams params body Nothing mempty loc\n  internaliseExp desc letbody\ninternaliseExp desc (E.DoLoop sparams mergepat mergeexp form loopbody (Info (ret, retext)) loc) = do\n  ses <- internaliseExp \&quot;loop_init\&quot; mergeexp\n  ((loopbody', (form', shapepat, mergepat', mergeinit')), initstms) <-\n    collectStms $ handleForm ses form\n\n  addStms initstms\n  mergeinit_ts' <- mapM subExpType mergeinit'\n\n  ctxinit <- argShapes (map I.paramName shapepat) mergepat' mergeinit_ts'\n\n  let ctxmerge = zip shapepat ctxinit\n      valmerge = zip mergepat' mergeinit'\n      dropCond = case form of\n        E.While {} -> drop 1\n        _ -> id\n\n  -- Ensure that the result of the loop matches the shapes of the\n  -- merge parameters.  XXX: Ideally they should already match (by\n  -- the source language type rules), but some of our\n  -- transformations (esp. defunctionalisation) strips out some size\n  -- information.  For a type-correct source program, these reshapes\n  -- should simplify away.\n  let merge = ctxmerge ++ valmerge\n      merge_ts = map (I.paramType . fst) merge\n  loopbody'' <-\n    localScope (scopeOfFParams $ map fst merge) $\n      inScopeOf form' $\n        insertStmsM $\n          resultBodyM\n            =<< ensureArgShapes\n              \&quot;shape of loop result does not match shapes in loop parameter\&quot;\n              loc\n              (map (I.paramName . fst) ctxmerge)\n              merge_ts\n            =<< bodyBind loopbody'\n\n  attrs <- asks envAttrs\n  loop_res <-\n    map I.Var . dropCond\n      <$> attributing\n        attrs\n        (letTupExp desc (I.DoLoop ctxmerge valmerge form' loopbody''))\n  bindExtSizes (E.toStruct ret) retext loop_res\n  return loop_res\n  where\n    sparams' = map (`TypeParamDim` mempty) sparams\n\n    forLoop mergepat' shapepat mergeinit form' =\n      bodyFromStms $\n        inScopeOf form' $ do\n          ses <- internaliseExp \&quot;loopres\&quot; loopbody\n          sets <- mapM subExpType ses\n          shapeargs <- argShapes (map I.paramName shapepat) mergepat' sets\n          return\n            ( shapeargs ++ ses,\n              ( form',\n                shapepat,\n                mergepat',\n                mergeinit\n              )\n            )\n\n    handleForm mergeinit (E.ForIn x arr) = do\n      arr' <- internaliseExpToVars \&quot;for_in_arr\&quot; arr\n      arr_ts <- mapM lookupType arr'\n      let w = arraysSize 0 arr_ts\n\n      i <- newVName \&quot;i\&quot;\n\n      bindingLoopParams sparams' mergepat $\n        \\shapepat mergepat' ->\n          bindingLambdaParams [x] (map rowType arr_ts) $ \\x_params -> do\n            let loopvars = zip x_params arr'\n            forLoop mergepat' shapepat mergeinit $\n              I.ForLoop i Int32 w loopvars\n    handleForm mergeinit (E.For i num_iterations) = do\n      num_iterations' <- internaliseExp1 \&quot;upper_bound\&quot; num_iterations\n      i' <- internaliseIdent i\n      num_iterations_t <- I.subExpType num_iterations'\n      it <- case num_iterations_t of\n        I.Prim (IntType it) -> return it\n        _ -> error \&quot;internaliseExp DoLoop: invalid type\&quot;\n\n      bindingLoopParams sparams' mergepat $\n        \\shapepat mergepat' ->\n          forLoop mergepat' shapepat mergeinit $\n            I.ForLoop i' it num_iterations' []\n    handleForm mergeinit (E.While cond) =\n      bindingLoopParams sparams' mergepat $ \\shapepat mergepat' -> do\n        mergeinit_ts <- mapM subExpType mergeinit\n        -- We need to insert 'cond' twice - once for the initial\n        -- condition (do we enter the loop at all?), and once with the\n        -- result values of the loop (do we continue into the next\n        -- iteration?).  This is safe, as the type rules for the\n        -- external language guarantees that 'cond' does not consume\n        -- anything.\n        shapeinit <- argShapes (map I.paramName shapepat) mergepat' mergeinit_ts\n\n        (loop_initial_cond, init_loop_cond_bnds) <- collectStms $ do\n          forM_ (zip shapepat shapeinit) $ \\(p, se) ->\n            letBindNames [paramName p] $ BasicOp $ SubExp se\n          forM_ (zip mergepat' mergeinit) $ \\(p, se) ->\n            unless (se == I.Var (paramName p)) $\n              letBindNames [paramName p] $\n                BasicOp $\n                  case se of\n                    I.Var v\n                      | not $ primType $ paramType p ->\n                        Reshape (map DimCoercion $ arrayDims $ paramType p) v\n                    _ -> SubExp se\n          internaliseExp1 \&quot;loop_cond\&quot; cond\n\n        addStms init_loop_cond_bnds\n\n        bodyFromStms $ do\n          ses <- internaliseExp \&quot;loopres\&quot; loopbody\n          sets <- mapM subExpType ses\n          loop_while <- newParam \&quot;loop_while\&quot; $ I.Prim I.Bool\n          shapeargs <- argShapes (map I.paramName shapepat) mergepat' sets\n\n          -- Careful not to clobber anything.\n          loop_end_cond_body <- renameBody <=< insertStmsM $ do\n            forM_ (zip shapepat shapeargs) $ \\(p, se) ->\n              unless (se == I.Var (paramName p)) $\n                letBindNames [paramName p] $ BasicOp $ SubExp se\n            forM_ (zip mergepat' ses) $ \\(p, se) ->\n              unless (se == I.Var (paramName p)) $\n                letBindNames [paramName p] $\n                  BasicOp $\n                    case se of\n                      I.Var v\n                        | not $ primType $ paramType p ->\n                          Reshape (map DimCoercion $ arrayDims $ paramType p) v\n                      _ -> SubExp se\n            resultBody <$> internaliseExp \&quot;loop_cond\&quot; cond\n          loop_end_cond <- bodyBind loop_end_cond_body\n\n          return\n            ( shapeargs ++ loop_end_cond ++ ses,\n              ( I.WhileLoop $ I.paramName loop_while,\n                shapepat,\n                loop_while : mergepat',\n                loop_initial_cond : mergeinit\n              )\n            )\ninternaliseExp desc (E.LetWith name src idxs ve body t loc) = do\n  let pat = E.Id (E.identName name) (E.identType name) loc\n      src_t = E.fromStruct <$> E.identType src\n      e = E.Update (E.Var (E.qualName $ E.identName src) src_t loc) idxs ve loc\n  internaliseExp desc $ E.LetPat pat e body (t, Info []) loc\ninternaliseExp desc (E.Update src slice ve loc) = do\n  ves <- internaliseExp \&quot;lw_val\&quot; ve\n  srcs <- internaliseExpToVars \&quot;src\&quot; src\n  dims <- case srcs of\n    [] -> return [] -- Will this happen?\n    v : _ -> I.arrayDims <$> lookupType v\n  (idxs', cs) <- internaliseSlice loc dims slice\n\n  let comb sname ve' = do\n        sname_t <- lookupType sname\n        let full_slice = fullSlice sname_t idxs'\n            rowtype = sname_t `setArrayDims` sliceDims full_slice\n        ve'' <-\n          ensureShape\n            \&quot;shape of value does not match shape of source array\&quot;\n            loc\n            rowtype\n            \&quot;lw_val_correct_shape\&quot;\n            ve'\n        letInPlace desc sname full_slice $ BasicOp $ SubExp ve''\n  certifying cs $ map I.Var <$> zipWithM comb srcs ves\ninternaliseExp desc (E.RecordUpdate src fields ve _ _) = do\n  src' <- internaliseExp desc src\n  ve' <- internaliseExp desc ve\n  replace (E.typeOf src `setAliases` ()) fields ve' src'\n  where\n    replace (E.Scalar (E.Record m)) (f : fs) ve' src'\n      | Just t <- M.lookup f m = do\n        i <-\n          fmap sum $\n            mapM (internalisedTypeSize . snd) $\n              takeWhile ((/= f) . fst) $ sortFields m\n        k <- internalisedTypeSize t\n        let (bef, to_update, aft) = splitAt3 i k src'\n        src'' <- replace t fs ve' to_update\n        return $ bef ++ src'' ++ aft\n    replace _ _ ve' _ = return ve'\ninternaliseExp desc (E.Attr attr e _) =\n  local f $ internaliseExp desc e\n  where\n    attrs = oneAttr $ internaliseAttr attr\n    f env\n      | \&quot;unsafe\&quot; `inAttrs` attrs,\n        not $ envSafe env =\n        env {envDoBoundsChecks = False}\n      | otherwise =\n        env {envAttrs = envAttrs env <> attrs}\ninternaliseExp desc (E.Assert e1 e2 (Info check) loc) = do\n  e1' <- internaliseExp1 \&quot;assert_cond\&quot; e1\n  c <- assert \&quot;assert_c\&quot; e1' (errorMsg [ErrorString $ \&quot;Assertion is false: \&quot; <> check]) loc\n  -- Make sure there are some bindings to certify.\n  certifying c $ mapM rebind =<< internaliseExp desc e2\n  where\n    rebind v = do\n      v' <- newVName \&quot;assert_res\&quot;\n      letBindNames [v'] $ I.BasicOp $ I.SubExp v\n      return $ I.Var v'\ninternaliseExp _ (E.Constr c es (Info (E.Scalar (E.Sum fs))) _) = do\n  (ts, constr_map) <- internaliseSumType $ M.map (map E.toStruct) fs\n  es' <- concat <$> mapM (internaliseExp \&quot;payload\&quot;) es\n\n  let noExt _ = return $ intConst Int32 0\n  ts' <- instantiateShapes noExt $ map fromDecl ts\n\n  case M.lookup c constr_map of\n    Just (i, js) ->\n      (intConst Int8 (toInteger i) :) <$> clauses 0 ts' (zip js es')\n    Nothing ->\n      error \&quot;internaliseExp Constr: missing constructor\&quot;\n  where\n    clauses j (t : ts) js_to_es\n      | Just e <- j `lookup` js_to_es =\n        (e :) <$> clauses (j + 1) ts js_to_es\n      | otherwise = do\n        blank <- letSubExp \&quot;zero\&quot; =<< eBlank t\n        (blank :) <$> clauses (j + 1) ts js_to_es\n    clauses _ [] _ =\n      return []\ninternaliseExp _ (E.Constr _ _ (Info t) loc) =\n  error $ \&quot;internaliseExp: constructor with type \&quot; ++ pretty t ++ \&quot; at \&quot; ++ locStr loc\ninternaliseExp desc (E.Match e cs (Info ret, Info retext) _) = do\n  ses <- internaliseExp (desc ++ \&quot;_scrutinee\&quot;) e\n  res <-\n    case NE.uncons cs of\n      (CasePat pCase eCase _, Nothing) -> do\n        (_, pertinent) <- generateCond pCase ses\n        internalisePat' pCase pertinent eCase (internaliseExp desc)\n      (c, Just cs') -> do\n        let CasePat pLast eLast _ = NE.last cs'\n        bFalse <- do\n          (_, pertinent) <- generateCond pLast ses\n          eLast' <- internalisePat' pLast pertinent eLast internaliseBody\n          foldM (\\bf c' -> eBody $ return $ generateCaseIf ses c' bf) eLast' $\n            reverse $ NE.init cs'\n        letTupExp' desc =<< generateCaseIf ses c bFalse\n  bindExtSizes (E.toStruct ret) retext res\n  return res\n\n-- The \&quot;interesting\&quot; cases are over, now it's mostly boilerplate.\n\ninternaliseExp _ (E.Literal v _) =\n  return [I.Constant $ internalisePrimValue v]\ninternaliseExp _ (E.IntLit v (Info t) _) =\n  case t of\n    E.Scalar (E.Prim (E.Signed it)) ->\n      return [I.Constant $ I.IntValue $ intValue it v]\n    E.Scalar (E.Prim (E.Unsigned it)) ->\n      return [I.Constant $ I.IntValue $ intValue it v]\n    E.Scalar (E.Prim (E.FloatType ft)) ->\n      return [I.Constant $ I.FloatValue $ floatValue ft v]\n    _ -> error $ \&quot;internaliseExp: nonsensical type for integer literal: \&quot; ++ pretty t\ninternaliseExp _ (E.FloatLit v (Info t) _) =\n  case t of\n    E.Scalar (E.Prim (E.FloatType ft)) ->\n      return [I.Constant $ I.FloatValue $ floatValue ft v]\n    _ -> error $ \&quot;internaliseExp: nonsensical type for float literal: \&quot; ++ pretty t\ninternaliseExp desc (E.If ce te fe (Info ret, Info retext) _) = do\n  ses <-\n    letTupExp' desc\n      =<< eIf\n        (BasicOp . SubExp <$> internaliseExp1 \&quot;cond\&quot; ce)\n        (internaliseBody te)\n        (internaliseBody fe)\n  bindExtSizes (E.toStruct ret) retext ses\n  return ses\n\n-- Builtin operators are handled specially because they are\n-- overloaded.\ninternaliseExp desc (E.BinOp (op, _) _ (xe, _) (ye, _) _ _ loc)\n  | Just internalise <- isOverloadedFunction op [xe, ye] loc =\n    internalise desc\n-- User-defined operators are just the same as a function call.\ninternaliseExp\n  desc\n  ( E.BinOp\n      (op, oploc)\n      (Info t)\n      (xarg, Info (xt, xext))\n      (yarg, Info (yt, yext))\n      _\n      (Info retext)\n      loc\n    ) =\n    internaliseExp desc $\n      E.Apply\n        ( E.Apply\n            (E.Var op (Info t) oploc)\n            xarg\n            (Info (E.diet xt, xext))\n            (Info $ foldFunType [E.fromStruct yt] t, Info [])\n            loc\n        )\n        yarg\n        (Info (E.diet yt, yext))\n        (Info t, Info retext)\n        loc\ninternaliseExp desc (E.Project k e (Info rt) _) = do\n  n <- internalisedTypeSize $ rt `setAliases` ()\n  i' <- fmap sum $\n    mapM internalisedTypeSize $\n      case E.typeOf e `setAliases` () of\n        E.Scalar (Record fs) ->\n          map snd $ takeWhile ((/= k) . fst) $ sortFields fs\n        t -> [t]\n  take n . drop i' <$> internaliseExp desc e\ninternaliseExp _ e@E.Lambda {} =\n  error $ \&quot;internaliseExp: Unexpected lambda at \&quot; ++ locStr (srclocOf e)\ninternaliseExp _ e@E.OpSection {} =\n  error $ \&quot;internaliseExp: Unexpected operator section at \&quot; ++ locStr (srclocOf e)\ninternaliseExp _ e@E.OpSectionLeft {} =\n  error $ \&quot;internaliseExp: Unexpected left operator section at \&quot; ++ locStr (srclocOf e)\ninternaliseExp _ e@E.OpSectionRight {} =\n  error $ \&quot;internaliseExp: Unexpected right operator section at \&quot; ++ locStr (srclocOf e)\ninternaliseExp _ e@E.ProjectSection {} =\n  error $ \&quot;internaliseExp: Unexpected projection section at \&quot; ++ locStr (srclocOf e)\ninternaliseExp _ e@E.IndexSection {} =\n  error $ \&quot;internaliseExp: Unexpected index section at \&quot; ++ locStr (srclocOf e)\n\ninternaliseArg :: String -> (E.Exp, Maybe VName) -> InternaliseM [SubExp]\ninternaliseArg desc (arg, argdim) = do\n  arg' <- internaliseExp desc arg\n  case (arg', argdim) of\n    ([se], Just d) -> letBindNames [d] $ BasicOp $ SubExp se\n    _ -> return ()\n  return arg'\n\ngenerateCond :: E.Pattern -> [I.SubExp] -> InternaliseM (I.SubExp, [I.SubExp])\ngenerateCond orig_p orig_ses = do\n  (cmps, pertinent, _) <- compares orig_p orig_ses\n  cmp <- letSubExp \&quot;matches\&quot; =<< eAll cmps\n  return (cmp, pertinent)\n  where\n    -- Literals are always primitive values.\n    compares (E.PatternLit e _ _) (se : ses) = do\n      e' <- internaliseExp1 \&quot;constant\&quot; e\n      t' <- elemType <$> subExpType se\n      cmp <- letSubExp \&quot;match_lit\&quot; $ I.BasicOp $ I.CmpOp (I.CmpEq t') e' se\n      return ([cmp], [se], ses)\n    compares (E.PatternConstr c (Info (E.Scalar (E.Sum fs))) pats _) (se : ses) = do\n      (payload_ts, m) <- internaliseSumType $ M.map (map toStruct) fs\n      case M.lookup c m of\n        Just (i, payload_is) -> do\n          let i' = intConst Int8 $ toInteger i\n          let (payload_ses, ses') = splitAt (length payload_ts) ses\n          cmp <- letSubExp \&quot;match_constr\&quot; $ I.BasicOp $ I.CmpOp (I.CmpEq int8) i' se\n          (cmps, pertinent, _) <- comparesMany pats $ map (payload_ses !!) payload_is\n          return (cmp : cmps, pertinent, ses')\n        Nothing ->\n          error \&quot;generateCond: missing constructor\&quot;\n    compares (E.PatternConstr _ (Info t) _ _) _ =\n      error $ \&quot;generateCond: PatternConstr has nonsensical type: \&quot; ++ pretty t\n    compares (E.Id _ t loc) ses =\n      compares (E.Wildcard t loc) ses\n    compares (E.Wildcard (Info t) _) ses = do\n      n <- internalisedTypeSize $ E.toStruct t\n      let (id_ses, rest_ses) = splitAt n ses\n      return ([], id_ses, rest_ses)\n    compares (E.PatternParens pat _) ses =\n      compares pat ses\n    compares (E.TuplePattern pats _) ses =\n      comparesMany pats ses\n    compares (E.RecordPattern fs _) ses =\n      comparesMany (map snd $ E.sortFields $ M.fromList fs) ses\n    compares (E.PatternAscription pat _ _) ses =\n      compares pat ses\n    compares pat [] =\n      error $ \&quot;generateCond: No values left for pattern \&quot; ++ pretty pat\n\n    comparesMany [] ses = return ([], [], ses)\n    comparesMany (pat : pats) ses = do\n      (cmps1, pertinent1, ses') <- compares pat ses\n      (cmps2, pertinent2, ses'') <- comparesMany pats ses'\n      return\n        ( cmps1 <> cmps2,\n          pertinent1 <> pertinent2,\n          ses''\n        )\n\ngenerateCaseIf :: [I.SubExp] -> Case -> I.Body -> InternaliseM I.Exp\ngenerateCaseIf ses (CasePat p eCase _) bFail = do\n  (cond, pertinent) <- generateCond p ses\n  eCase' <- internalisePat' p pertinent eCase internaliseBody\n  eIf (eSubExp cond) (return eCase') (return bFail)\n\ninternalisePat ::\n  String ->\n  E.Pattern ->\n  E.Exp ->\n  E.Exp ->\n  (E.Exp -> InternaliseM a) ->\n  InternaliseM a\ninternalisePat desc p e body m = do\n  ses <- internaliseExp desc' e\n  internalisePat' p ses body m\n  where\n    desc' = case S.toList $ E.patternIdents p of\n      [v] -> baseString $ E.identName v\n      _ -> desc\n\ninternalisePat' ::\n  E.Pattern ->\n  [I.SubExp] ->\n  E.Exp ->\n  (E.Exp -> InternaliseM a) ->\n  InternaliseM a\ninternalisePat' p ses body m = do\n  ses_ts <- mapM subExpType ses\n  stmPattern p ses_ts $ \\pat_names -> do\n    forM_ (zip pat_names ses) $ \\(v, se) ->\n      letBindNames [v] $ I.BasicOp $ I.SubExp se\n    m body\n\ninternaliseSlice ::\n  SrcLoc ->\n  [SubExp] ->\n  [E.DimIndex] ->\n  InternaliseM ([I.DimIndex SubExp], Certificates)\ninternaliseSlice loc dims idxs = do\n  (idxs', oks, parts) <- unzip3 <$> zipWithM internaliseDimIndex dims idxs\n  ok <- letSubExp \&quot;index_ok\&quot; =<< eAll oks\n  let msg =\n        errorMsg $\n          [\&quot;Index [\&quot;] ++ intercalate [\&quot;, \&quot;] parts\n            ++ [\&quot;] out of bounds for array of shape [\&quot;]\n            ++ intersperse \&quot;][\&quot; (map ErrorInt32 $ take (length idxs) dims)\n            ++ [\&quot;].\&quot;]\n  c <- assert \&quot;index_certs\&quot; ok msg loc\n  return (idxs', c)\n\ninternaliseDimIndex ::\n  SubExp ->\n  E.DimIndex ->\n  InternaliseM (I.DimIndex SubExp, SubExp, [ErrorMsgPart SubExp])\ninternaliseDimIndex w (E.DimFix i) = do\n  (i', _) <- internaliseDimExp \&quot;i\&quot; i\n  let lowerBound =\n        I.BasicOp $\n          I.CmpOp (I.CmpSle I.Int32) (I.constant (0 :: I.Int32)) i'\n      upperBound =\n        I.BasicOp $\n          I.CmpOp (I.CmpSlt I.Int32) i' w\n  ok <- letSubExp \&quot;bounds_check\&quot; =<< eBinOp I.LogAnd (pure lowerBound) (pure upperBound)\n  return (I.DimFix i', ok, [ErrorInt32 i'])\n\n-- Special-case an important common case that otherwise leads to horrible code.\ninternaliseDimIndex\n  w\n  ( E.DimSlice\n      Nothing\n      Nothing\n      (Just (E.Negate (E.IntLit 1 _ _) _))\n    ) = do\n    w_minus_1 <-\n      letSubExp \&quot;w_minus_1\&quot; $\n        BasicOp $ I.BinOp (Sub Int32 I.OverflowWrap) w one\n    return\n      ( I.DimSlice w_minus_1 w $ intConst Int32 (-1),\n        constant True,\n        mempty\n      )\n    where\n      one = constant (1 :: Int32)\ninternaliseDimIndex w (E.DimSlice i j s) = do\n  s' <- maybe (return one) (fmap fst . internaliseDimExp \&quot;s\&quot;) s\n  s_sign <- letSubExp \&quot;s_sign\&quot; $ BasicOp $ I.UnOp (I.SSignum Int32) s'\n  backwards <- letSubExp \&quot;backwards\&quot; $ I.BasicOp $ I.CmpOp (I.CmpEq int32) s_sign negone\n  w_minus_1 <- letSubExp \&quot;w_minus_1\&quot; $ BasicOp $ I.BinOp (Sub Int32 I.OverflowWrap) w one\n  let i_def =\n        letSubExp \&quot;i_def\&quot; $\n          I.If\n            backwards\n            (resultBody [w_minus_1])\n            (resultBody [zero])\n            $ ifCommon [I.Prim int32]\n      j_def =\n        letSubExp \&quot;j_def\&quot; $\n          I.If\n            backwards\n            (resultBody [negone])\n            (resultBody [w])\n            $ ifCommon [I.Prim int32]\n  i' <- maybe i_def (fmap fst . internaliseDimExp \&quot;i\&quot;) i\n  j' <- maybe j_def (fmap fst . internaliseDimExp \&quot;j\&quot;) j\n  j_m_i <- letSubExp \&quot;j_m_i\&quot; $ BasicOp $ I.BinOp (Sub Int32 I.OverflowWrap) j' i'\n  -- Something like a division-rounding-up, but accomodating negative\n  -- operands.\n  let divRounding x y =\n        eBinOp\n          (SQuot Int32 Unsafe)\n          ( eBinOp\n              (Add Int32 I.OverflowWrap)\n              x\n              (eBinOp (Sub Int32 I.OverflowWrap) y (eSignum $ toExp s'))\n          )\n          y\n  n <- letSubExp \&quot;n\&quot; =<< divRounding (toExp j_m_i) (toExp s')\n\n  -- Bounds checks depend on whether we are slicing forwards or\n  -- backwards.  If forwards, we must check '0 <= i &amp;&amp; i <= j'.  If\n  -- backwards, '-1 <= j &amp;&amp; j <= i'.  In both cases, we check '0 <=\n  -- i+n*s &amp;&amp; i+(n-1)*s < w'.  We only check if the slice is nonempty.\n  empty_slice <- letSubExp \&quot;empty_slice\&quot; $ I.BasicOp $ I.CmpOp (CmpEq int32) n zero\n\n  m <- letSubExp \&quot;m\&quot; $ I.BasicOp $ I.BinOp (Sub Int32 I.OverflowWrap) n one\n  m_t_s <- letSubExp \&quot;m_t_s\&quot; $ I.BasicOp $ I.BinOp (Mul Int32 I.OverflowWrap) m s'\n  i_p_m_t_s <- letSubExp \&quot;i_p_m_t_s\&quot; $ I.BasicOp $ I.BinOp (Add Int32 I.OverflowWrap) i' m_t_s\n  zero_leq_i_p_m_t_s <-\n    letSubExp \&quot;zero_leq_i_p_m_t_s\&quot; $\n      I.BasicOp $ I.CmpOp (I.CmpSle Int32) zero i_p_m_t_s\n  i_p_m_t_s_leq_w <-\n    letSubExp \&quot;i_p_m_t_s_leq_w\&quot; $\n      I.BasicOp $ I.CmpOp (I.CmpSle Int32) i_p_m_t_s w\n  i_p_m_t_s_lth_w <-\n    letSubExp \&quot;i_p_m_t_s_leq_w\&quot; $\n      I.BasicOp $ I.CmpOp (I.CmpSlt Int32) i_p_m_t_s w\n\n  zero_lte_i <- letSubExp \&quot;zero_lte_i\&quot; $ I.BasicOp $ I.CmpOp (I.CmpSle Int32) zero i'\n  i_lte_j <- letSubExp \&quot;i_lte_j\&quot; $ I.BasicOp $ I.CmpOp (I.CmpSle Int32) i' j'\n  forwards_ok <-\n    letSubExp \&quot;forwards_ok\&quot;\n      =<< eAll [zero_lte_i, zero_lte_i, i_lte_j, zero_leq_i_p_m_t_s, i_p_m_t_s_lth_w]\n\n  negone_lte_j <- letSubExp \&quot;negone_lte_j\&quot; $ I.BasicOp $ I.CmpOp (I.CmpSle Int32) negone j'\n  j_lte_i <- letSubExp \&quot;j_lte_i\&quot; $ I.BasicOp $ I.CmpOp (I.CmpSle Int32) j' i'\n  backwards_ok <-\n    letSubExp \&quot;backwards_ok\&quot;\n      =<< eAll\n        [negone_lte_j, negone_lte_j, j_lte_i, zero_leq_i_p_m_t_s, i_p_m_t_s_leq_w]\n\n  slice_ok <-\n    letSubExp \&quot;slice_ok\&quot; $\n      I.If\n        backwards\n        (resultBody [backwards_ok])\n        (resultBody [forwards_ok])\n        $ ifCommon [I.Prim I.Bool]\n  ok_or_empty <-\n    letSubExp \&quot;ok_or_empty\&quot; $\n      I.BasicOp $ I.BinOp I.LogOr empty_slice slice_ok\n\n  let parts = case (i, j, s) of\n        (_, _, Just {}) ->\n          [ maybe \&quot;\&quot; (const $ ErrorInt32 i') i,\n            \&quot;:\&quot;,\n            maybe \&quot;\&quot; (const $ ErrorInt32 j') j,\n            \&quot;:\&quot;,\n            ErrorInt32 s'\n          ]\n        (_, Just {}, _) ->\n          [ maybe \&quot;\&quot; (const $ ErrorInt32 i') i,\n            \&quot;:\&quot;,\n            ErrorInt32 j'\n          ]\n            ++ maybe mempty (const [\&quot;:\&quot;, ErrorInt32 s']) s\n        (_, Nothing, Nothing) ->\n          [ErrorInt32 i', \&quot;:\&quot;]\n  return (I.DimSlice i' n s', ok_or_empty, parts)\n  where\n    zero = constant (0 :: Int32)\n    negone = constant (-1 :: Int32)\n    one = constant (1 :: Int32)\n\ninternaliseScanOrReduce ::\n  String ->\n  String ->\n  (SubExp -> I.Lambda -> [SubExp] -> [VName] -> InternaliseM (SOAC SOACS)) ->\n  (E.Exp, E.Exp, E.Exp, SrcLoc) ->\n  InternaliseM [SubExp]\ninternaliseScanOrReduce desc what f (lam, ne, arr, loc) = do\n  arrs <- internaliseExpToVars (what ++ \&quot;_arr\&quot;) arr\n  nes <- internaliseExp (what ++ \&quot;_ne\&quot;) ne\n  nes' <- forM (zip nes arrs) $ \\(ne', arr') -> do\n    rowtype <- I.stripArray 1 <$> lookupType arr'\n    ensureShape\n      \&quot;Row shape of input array does not match shape of neutral element\&quot;\n      loc\n      rowtype\n      (what ++ \&quot;_ne_right_shape\&quot;)\n      ne'\n  nests <- mapM I.subExpType nes'\n  arrts <- mapM lookupType arrs\n  lam' <- internaliseFoldLambda internaliseLambda lam nests arrts\n  w <- arraysSize 0 <$> mapM lookupType arrs\n  letTupExp' desc . I.Op =<< f w lam' nes' arrs\n\ninternaliseHist ::\n  String ->\n  E.Exp ->\n  E.Exp ->\n  E.Exp ->\n  E.Exp ->\n  E.Exp ->\n  E.Exp ->\n  SrcLoc ->\n  InternaliseM [SubExp]\ninternaliseHist desc rf hist op ne buckets img loc = do\n  rf' <- internaliseExp1 \&quot;hist_rf\&quot; rf\n  ne' <- internaliseExp \&quot;hist_ne\&quot; ne\n  hist' <- internaliseExpToVars \&quot;hist_hist\&quot; hist\n  buckets' <-\n    letExp \&quot;hist_buckets\&quot; . BasicOp . SubExp\n      =<< internaliseExp1 \&quot;hist_buckets\&quot; buckets\n  img' <- internaliseExpToVars \&quot;hist_img\&quot; img\n\n  -- reshape neutral element to have same size as the destination array\n  ne_shp <- forM (zip ne' hist') $ \\(n, h) -> do\n    rowtype <- I.stripArray 1 <$> lookupType h\n    ensureShape\n      \&quot;Row shape of destination array does not match shape of neutral element\&quot;\n      loc\n      rowtype\n      \&quot;hist_ne_right_shape\&quot;\n      n\n  ne_ts <- mapM I.subExpType ne_shp\n  his_ts <- mapM lookupType hist'\n  op' <- internaliseFoldLambda internaliseLambda op ne_ts his_ts\n\n  -- reshape return type of bucket function to have same size as neutral element\n  -- (modulo the index)\n  bucket_param <- newParam \&quot;bucket_p\&quot; $ I.Prim int32\n  img_params <- mapM (newParam \&quot;img_p\&quot; . rowType) =<< mapM lookupType img'\n  let params = bucket_param : img_params\n      rettype = I.Prim int32 : ne_ts\n      body = mkBody mempty $ map (I.Var . paramName) params\n  body' <-\n    localScope (scopeOfLParams params) $\n      ensureResultShape\n        \&quot;Row shape of value array does not match row shape of hist target\&quot;\n        (srclocOf img)\n        rettype\n        body\n\n  -- get sizes of histogram and image arrays\n  w_hist <- arraysSize 0 <$> mapM lookupType hist'\n  w_img <- arraysSize 0 <$> mapM lookupType img'\n\n  -- Generate an assertion and reshapes to ensure that buckets' and\n  -- img' are the same size.\n  b_shape <- I.arrayShape <$> lookupType buckets'\n  let b_w = shapeSize 0 b_shape\n  cmp <- letSubExp \&quot;bucket_cmp\&quot; $ I.BasicOp $ I.CmpOp (I.CmpEq I.int32) b_w w_img\n  c <-\n    assert\n      \&quot;bucket_cert\&quot;\n      cmp\n      \&quot;length of index and value array does not match\&quot;\n      loc\n  buckets'' <-\n    certifying c $\n      letExp (baseString buckets') $\n        I.BasicOp $ I.Reshape (reshapeOuter [DimCoercion w_img] 1 b_shape) buckets'\n\n  letTupExp' desc $\n    I.Op $\n      I.Hist w_img [HistOp w_hist rf' hist' ne_shp op'] (I.Lambda params body' rettype) $ buckets'' : img'\n\ninternaliseStreamMap ::\n  String ->\n  StreamOrd ->\n  E.Exp ->\n  E.Exp ->\n  InternaliseM [SubExp]\ninternaliseStreamMap desc o lam arr = do\n  arrs <- internaliseExpToVars \&quot;stream_input\&quot; arr\n  lam' <- internaliseStreamMapLambda internaliseLambda lam $ map I.Var arrs\n  w <- arraysSize 0 <$> mapM lookupType arrs\n  let form = I.Parallel o Commutative (I.Lambda [] (mkBody mempty []) []) []\n  letTupExp' desc $ I.Op $ I.Stream w form lam' arrs\n\ninternaliseStreamRed ::\n  String ->\n  StreamOrd ->\n  Commutativity ->\n  E.Exp ->\n  E.Exp ->\n  E.Exp ->\n  InternaliseM [SubExp]\ninternaliseStreamRed desc o comm lam0 lam arr = do\n  arrs <- internaliseExpToVars \&quot;stream_input\&quot; arr\n  rowts <- mapM (fmap I.rowType . lookupType) arrs\n  (lam_params, lam_body) <-\n    internaliseStreamLambda internaliseLambda lam rowts\n  let (chunk_param, _, lam_val_params) =\n        partitionChunkedFoldParameters 0 lam_params\n\n  -- Synthesize neutral elements by applying the fold function\n  -- to an empty chunk.\n  letBindNames [I.paramName chunk_param] $\n    I.BasicOp $ I.SubExp $ constant (0 :: Int32)\n  forM_ lam_val_params $ \\p ->\n    letBindNames [I.paramName p] $\n      I.BasicOp $\n        I.Scratch (I.elemType $ I.paramType p) $\n          I.arrayDims $ I.paramType p\n  nes <- bodyBind =<< renameBody lam_body\n\n  nes_ts <- mapM I.subExpType nes\n  outsz <- arraysSize 0 <$> mapM lookupType arrs\n  let acc_arr_tps = [I.arrayOf t (I.Shape [outsz]) NoUniqueness | t <- nes_ts]\n  lam0' <- internaliseFoldLambda internaliseLambda lam0 nes_ts acc_arr_tps\n\n  let lam0_acc_params = take (length nes) $ I.lambdaParams lam0'\n  lam_acc_params <- forM lam0_acc_params $ \\p -> do\n    name <- newVName $ baseString $ I.paramName p\n    return p {I.paramName = name}\n\n  -- Make sure the chunk size parameter comes first.\n  let lam_params' = chunk_param : lam_acc_params ++ lam_val_params\n\n  body_with_lam0 <-\n    ensureResultShape\n      \&quot;shape of result does not match shape of initial value\&quot;\n      (srclocOf lam0)\n      nes_ts\n      <=< insertStmsM\n      $ localScope (scopeOfLParams lam_params') $ do\n        lam_res <- bodyBind lam_body\n        lam_res' <-\n          ensureArgShapes\n            \&quot;shape of chunk function result does not match shape of initial value\&quot;\n            (srclocOf lam)\n            []\n            (map I.typeOf $ I.lambdaParams lam0')\n            lam_res\n        new_lam_res <-\n          eLambda lam0' $\n            map eSubExp $\n              map (I.Var . paramName) lam_acc_params ++ lam_res'\n        return $ resultBody new_lam_res\n\n  let form = I.Parallel o comm lam0' nes\n      lam' =\n        I.Lambda\n          { lambdaParams = lam_params',\n            lambdaBody = body_with_lam0,\n            lambdaReturnType = nes_ts\n          }\n  w <- arraysSize 0 <$> mapM lookupType arrs\n  letTupExp' desc $ I.Op $ I.Stream w form lam' arrs\n\ninternaliseExp1 :: String -> E.Exp -> InternaliseM I.SubExp\ninternaliseExp1 desc e = do\n  vs <- internaliseExp desc e\n  case vs of\n    [se] -> return se\n    _ -> error \&quot;Internalise.internaliseExp1: was passed not just a single subexpression\&quot;\n\n-- | Promote to dimension type as appropriate for the original type.\n-- Also return original type.\ninternaliseDimExp :: String -> E.Exp -> InternaliseM (I.SubExp, IntType)\ninternaliseDimExp s e = do\n  e' <- internaliseExp1 s e\n  case E.typeOf e of\n    E.Scalar (E.Prim (Signed it)) -> (,it) <$> asIntS Int32 e'\n    _ -> error \&quot;internaliseDimExp: bad type\&quot;\n\ninternaliseExpToVars :: String -> E.Exp -> InternaliseM [I.VName]\ninternaliseExpToVars desc e =\n  mapM asIdent =<< internaliseExp desc e\n  where\n    asIdent (I.Var v) = return v\n    asIdent se = letExp desc $ I.BasicOp $ I.SubExp se\n\ninternaliseOperation ::\n  String ->\n  E.Exp ->\n  (I.VName -> InternaliseM I.BasicOp) ->\n  InternaliseM [I.SubExp]\ninternaliseOperation s e op = do\n  vs <- internaliseExpToVars s e\n  letSubExps s =<< mapM (fmap I.BasicOp . op) vs\n\ncertifyingNonzero ::\n  SrcLoc ->\n  IntType ->\n  SubExp ->\n  InternaliseM a ->\n  InternaliseM a\ncertifyingNonzero loc t x m = do\n  zero <-\n    letSubExp \&quot;zero\&quot; $\n      I.BasicOp $\n        CmpOp (CmpEq (IntType t)) x (intConst t 0)\n  nonzero <- letSubExp \&quot;nonzero\&quot; $ I.BasicOp $ UnOp Not zero\n  c <- assert \&quot;nonzero_cert\&quot; nonzero \&quot;division by zero\&quot; loc\n  certifying c m\n\ncertifyingNonnegative ::\n  SrcLoc ->\n  IntType ->\n  SubExp ->\n  InternaliseM a ->\n  InternaliseM a\ncertifyingNonnegative loc t x m = do\n  nonnegative <-\n    letSubExp \&quot;nonnegative\&quot; $\n      I.BasicOp $\n        CmpOp (CmpSle t) (intConst t 0) x\n  c <- assert \&quot;nonzero_cert\&quot; nonnegative \&quot;negative exponent\&quot; loc\n  certifying c m\n\ninternaliseBinOp ::\n  SrcLoc ->\n  String ->\n  E.BinOp ->\n  I.SubExp ->\n  I.SubExp ->\n  E.PrimType ->\n  E.PrimType ->\n  InternaliseM [I.SubExp]\ninternaliseBinOp _ desc E.Plus x y (E.Signed t) _ =\n  simpleBinOp desc (I.Add t I.OverflowWrap) x y\ninternaliseBinOp _ desc E.Plus x y (E.Unsigned t) _ =\n  simpleBinOp desc (I.Add t I.OverflowWrap) x y\ninternaliseBinOp _ desc E.Plus x y (E.FloatType t) _ =\n  simpleBinOp desc (I.FAdd t) x y\ninternaliseBinOp _ desc E.Minus x y (E.Signed t) _ =\n  simpleBinOp desc (I.Sub t I.OverflowWrap) x y\ninternaliseBinOp _ desc E.Minus x y (E.Unsigned t) _ =\n  simpleBinOp desc (I.Sub t I.OverflowWrap) x y\ninternaliseBinOp _ desc E.Minus x y (E.FloatType t) _ =\n  simpleBinOp desc (I.FSub t) x y\ninternaliseBinOp _ desc E.Times x y (E.Signed t) _ =\n  simpleBinOp desc (I.Mul t I.OverflowWrap) x y\ninternaliseBinOp _ desc E.Times x y (E.Unsigned t) _ =\n  simpleBinOp desc (I.Mul t I.OverflowWrap) x y\ninternaliseBinOp _ desc E.Times x y (E.FloatType t) _ =\n  simpleBinOp desc (I.FMul t) x y\ninternaliseBinOp loc desc E.Divide x y (E.Signed t) _ =\n  certifyingNonzero loc t y $\n    simpleBinOp desc (I.SDiv t I.Unsafe) x y\ninternaliseBinOp loc desc E.Divide x y (E.Unsigned t) _ =\n  certifyingNonzero loc t y $\n    simpleBinOp desc (I.UDiv t I.Unsafe) x y\ninternaliseBinOp _ desc E.Divide x y (E.FloatType t) _ =\n  simpleBinOp desc (I.FDiv t) x y\ninternaliseBinOp _ desc E.Pow x y (E.FloatType t) _ =\n  simpleBinOp desc (I.FPow t) x y\ninternaliseBinOp loc desc E.Pow x y (E.Signed t) _ =\n  certifyingNonnegative loc t y $\n    simpleBinOp desc (I.Pow t) x y\ninternaliseBinOp _ desc E.Pow x y (E.Unsigned t) _ =\n  simpleBinOp desc (I.Pow t) x y\ninternaliseBinOp loc desc E.Mod x y (E.Signed t) _ =\n  certifyingNonzero loc t y $\n    simpleBinOp desc (I.SMod t I.Unsafe) x y\ninternaliseBinOp loc desc E.Mod x y (E.Unsigned t) _ =\n  certifyingNonzero loc t y $\n    simpleBinOp desc (I.UMod t I.Unsafe) x y\ninternaliseBinOp _ desc E.Mod x y (E.FloatType t) _ =\n  simpleBinOp desc (I.FMod t) x y\ninternaliseBinOp loc desc E.Quot x y (E.Signed t) _ =\n  certifyingNonzero loc t y $\n    simpleBinOp desc (I.SQuot t I.Unsafe) x y\ninternaliseBinOp loc desc E.Quot x y (E.Unsigned t) _ =\n  certifyingNonzero loc t y $\n    simpleBinOp desc (I.UDiv t I.Unsafe) x y\ninternaliseBinOp loc desc E.Rem x y (E.Signed t) _ =\n  certifyingNonzero loc t y $\n    simpleBinOp desc (I.SRem t I.Unsafe) x y\ninternaliseBinOp loc desc E.Rem x y (E.Unsigned t) _ =\n  certifyingNonzero loc t y $\n    simpleBinOp desc (I.UMod t I.Unsafe) x y\ninternaliseBinOp _ desc E.ShiftR x y (E.Signed t) _ =\n  simpleBinOp desc (I.AShr t) x y\ninternaliseBinOp _ desc E.ShiftR x y (E.Unsigned t) _ =\n  simpleBinOp desc (I.LShr t) x y\ninternaliseBinOp _ desc E.ShiftL x y (E.Signed t) _ =\n  simpleBinOp desc (I.Shl t) x y\ninternaliseBinOp _ desc E.ShiftL x y (E.Unsigned t) _ =\n  simpleBinOp desc (I.Shl t) x y\ninternaliseBinOp _ desc E.Band x y (E.Signed t) _ =\n  simpleBinOp desc (I.And t) x y\ninternaliseBinOp _ desc E.Band x y (E.Unsigned t) _ =\n  simpleBinOp desc (I.And t) x y\ninternaliseBinOp _ desc E.Xor x y (E.Signed t) _ =\n  simpleBinOp desc (I.Xor t) x y\ninternaliseBinOp _ desc E.Xor x y (E.Unsigned t) _ =\n  simpleBinOp desc (I.Xor t) x y\ninternaliseBinOp _ desc E.Bor x y (E.Signed t) _ =\n  simpleBinOp desc (I.Or t) x y\ninternaliseBinOp _ desc E.Bor x y (E.Unsigned t) _ =\n  simpleBinOp desc (I.Or t) x y\ninternaliseBinOp _ desc E.Equal x y t _ =\n  simpleCmpOp desc (I.CmpEq $ internalisePrimType t) x y\ninternaliseBinOp _ desc E.NotEqual x y t _ = do\n  eq <- letSubExp (desc ++ \&quot;true\&quot;) $ I.BasicOp $ I.CmpOp (I.CmpEq $ internalisePrimType t) x y\n  fmap pure $ letSubExp desc $ I.BasicOp $ I.UnOp I.Not eq\ninternaliseBinOp _ desc E.Less x y (E.Signed t) _ =\n  simpleCmpOp desc (I.CmpSlt t) x y\ninternaliseBinOp _ desc E.Less x y (E.Unsigned t) _ =\n  simpleCmpOp desc (I.CmpUlt t) x y\ninternaliseBinOp _ desc E.Leq x y (E.Signed t) _ =\n  simpleCmpOp desc (I.CmpSle t) x y\ninternaliseBinOp _ desc E.Leq x y (E.Unsigned t) _ =\n  simpleCmpOp desc (I.CmpUle t) x y\ninternaliseBinOp _ desc E.Greater x y (E.Signed t) _ =\n  simpleCmpOp desc (I.CmpSlt t) y x -- Note the swapped x and y\ninternaliseBinOp _ desc E.Greater x y (E.Unsigned t) _ =\n  simpleCmpOp desc (I.CmpUlt t) y x -- Note the swapped x and y\ninternaliseBinOp _ desc E.Geq x y (E.Signed t) _ =\n  simpleCmpOp desc (I.CmpSle t) y x -- Note the swapped x and y\ninternaliseBinOp _ desc E.Geq x y (E.Unsigned t) _ =\n  simpleCmpOp desc (I.CmpUle t) y x -- Note the swapped x and y\ninternaliseBinOp _ desc E.Less x y (E.FloatType t) _ =\n  simpleCmpOp desc (I.FCmpLt t) x y\ninternaliseBinOp _ desc E.Leq x y (E.FloatType t) _ =\n  simpleCmpOp desc (I.FCmpLe t) x y\ninternaliseBinOp _ desc E.Greater x y (E.FloatType t) _ =\n  simpleCmpOp desc (I.FCmpLt t) y x -- Note the swapped x and y\ninternaliseBinOp _ desc E.Geq x y (E.FloatType t) _ =\n  simpleCmpOp desc (I.FCmpLe t) y x -- Note the swapped x and y\n\n-- Relational operators for booleans.\ninternaliseBinOp _ desc E.Less x y E.Bool _ =\n  simpleCmpOp desc I.CmpLlt x y\ninternaliseBinOp _ desc E.Leq x y E.Bool _ =\n  simpleCmpOp desc I.CmpLle x y\ninternaliseBinOp _ desc E.Greater x y E.Bool _ =\n  simpleCmpOp desc I.CmpLlt y x -- Note the swapped x and y\ninternaliseBinOp _ desc E.Geq x y E.Bool _ =\n  simpleCmpOp desc I.CmpLle y x -- Note the swapped x and y\ninternaliseBinOp _ _ op _ _ t1 t2 =\n  error $\n    \&quot;Invalid binary operator \&quot; ++ pretty op\n      ++ \&quot; with operand types \&quot;\n      ++ pretty t1\n      ++ \&quot;, \&quot;\n      ++ pretty t2\n\nsimpleBinOp ::\n  String ->\n  I.BinOp ->\n  I.SubExp ->\n  I.SubExp ->\n  InternaliseM [I.SubExp]\nsimpleBinOp desc bop x y =\n  letTupExp' desc $ I.BasicOp $ I.BinOp bop x y\n\nsimpleCmpOp ::\n  String ->\n  I.CmpOp ->\n  I.SubExp ->\n  I.SubExp ->\n  InternaliseM [I.SubExp]\nsimpleCmpOp desc op x y =\n  letTupExp' desc $ I.BasicOp $ I.CmpOp op x y\n\nfindFuncall ::\n  E.Exp ->\n  InternaliseM\n    ( E.QualName VName,\n      [(E.Exp, Maybe VName)],\n      E.StructType,\n      [VName]\n    )\nfindFuncall (E.Var fname (Info t) _) =\n  return (fname, [], E.toStruct t, [])\nfindFuncall (E.Apply f arg (Info (_, argext)) (Info ret, Info retext) _) = do\n  (fname, args, _, _) <- findFuncall f\n  return (fname, args ++ [(arg, argext)], E.toStruct ret, retext)\nfindFuncall e =\n  error $ \&quot;Invalid function expression in application: \&quot; ++ pretty e\n\ninternaliseLambda :: InternaliseLambda\ninternaliseLambda (E.Parens e _) rowtypes =\n  internaliseLambda e rowtypes\ninternaliseLambda (E.Lambda params body _ (Info (_, rettype)) _) rowtypes =\n  bindingLambdaParams params rowtypes $ \\params' -> do\n    body' <- internaliseBody body\n    rettype' <- internaliseLambdaReturnType rettype\n    return (params', body', rettype')\ninternaliseLambda e _ = error $ \&quot;internaliseLambda: unexpected expression:\\n\&quot; ++ pretty e\n\n-- | Some operators and functions are overloaded or otherwise special\n-- - we detect and treat them here.\nisOverloadedFunction ::\n  E.QualName VName ->\n  [E.Exp] ->\n  SrcLoc ->\n  Maybe (String -> InternaliseM [SubExp])\nisOverloadedFunction qname args loc = do\n  guard $ baseTag (qualLeaf qname) <= maxIntrinsicTag\n  let handlers =\n        [ handleSign,\n          handleIntrinsicOps,\n          handleOps,\n          handleSOACs,\n          handleRest\n        ]\n  msum [h args $ baseString $ qualLeaf qname | h <- handlers]\n  where\n    handleSign [x] \&quot;sign_i8\&quot; = Just $ toSigned I.Int8 x\n    handleSign [x] \&quot;sign_i16\&quot; = Just $ toSigned I.Int16 x\n    handleSign [x] \&quot;sign_i32\&quot; = Just $ toSigned I.Int32 x\n    handleSign [x] \&quot;sign_i64\&quot; = Just $ toSigned I.Int64 x\n    handleSign [x] \&quot;unsign_i8\&quot; = Just $ toUnsigned I.Int8 x\n    handleSign [x] \&quot;unsign_i16\&quot; = Just $ toUnsigned I.Int16 x\n    handleSign [x] \&quot;unsign_i32\&quot; = Just $ toUnsigned I.Int32 x\n    handleSign [x] \&quot;unsign_i64\&quot; = Just $ toUnsigned I.Int64 x\n    handleSign _ _ = Nothing\n\n    handleIntrinsicOps [x] s\n      | Just unop <- find ((== s) . pretty) allUnOps = Just $ \\desc -> do\n        x' <- internaliseExp1 \&quot;x\&quot; x\n        fmap pure $ letSubExp desc $ I.BasicOp $ I.UnOp unop x'\n    handleIntrinsicOps [TupLit [x, y] _] s\n      | Just bop <- find ((== s) . pretty) allBinOps = Just $ \\desc -> do\n        x' <- internaliseExp1 \&quot;x\&quot; x\n        y' <- internaliseExp1 \&quot;y\&quot; y\n        fmap pure $ letSubExp desc $ I.BasicOp $ I.BinOp bop x' y'\n      | Just cmp <- find ((== s) . pretty) allCmpOps = Just $ \\desc -> do\n        x' <- internaliseExp1 \&quot;x\&quot; x\n        y' <- internaliseExp1 \&quot;y\&quot; y\n        fmap pure $ letSubExp desc $ I.BasicOp $ I.CmpOp cmp x' y'\n    handleIntrinsicOps [x] s\n      | Just conv <- find ((== s) . pretty) allConvOps = Just $ \\desc -> do\n        x' <- internaliseExp1 \&quot;x\&quot; x\n        fmap pure $ letSubExp desc $ I.BasicOp $ I.ConvOp conv x'\n    handleIntrinsicOps _ _ = Nothing\n\n    -- Short-circuiting operators are magical.\n    handleOps [x, y] \&quot;&amp;&amp;\&quot; = Just $ \\desc ->\n      internaliseExp desc $\n        E.If x y (E.Literal (E.BoolValue False) mempty) (Info $ E.Scalar $ E.Prim E.Bool, Info []) mempty\n    handleOps [x, y] \&quot;||\&quot; = Just $ \\desc ->\n      internaliseExp desc $\n        E.If x (E.Literal (E.BoolValue True) mempty) y (Info $ E.Scalar $ E.Prim E.Bool, Info []) mempty\n    -- Handle equality and inequality specially, to treat the case of\n    -- arrays.\n    handleOps [xe, ye] op\n      | Just cmp_f <- isEqlOp op = Just $ \\desc -> do\n        xe' <- internaliseExp \&quot;x\&quot; xe\n        ye' <- internaliseExp \&quot;y\&quot; ye\n        rs <- zipWithM (doComparison desc) xe' ye'\n        cmp_f desc =<< letSubExp \&quot;eq\&quot; =<< eAll rs\n      where\n        isEqlOp \&quot;!=\&quot; = Just $ \\desc eq ->\n          letTupExp' desc $ I.BasicOp $ I.UnOp I.Not eq\n        isEqlOp \&quot;==\&quot; = Just $ \\_ eq ->\n          return [eq]\n        isEqlOp _ = Nothing\n\n        doComparison desc x y = do\n          x_t <- I.subExpType x\n          y_t <- I.subExpType y\n          case x_t of\n            I.Prim t -> letSubExp desc $ I.BasicOp $ I.CmpOp (I.CmpEq t) x y\n            _ -> do\n              let x_dims = I.arrayDims x_t\n                  y_dims = I.arrayDims y_t\n              dims_match <- forM (zip x_dims y_dims) $ \\(x_dim, y_dim) ->\n                letSubExp \&quot;dim_eq\&quot; $ I.BasicOp $ I.CmpOp (I.CmpEq int32) x_dim y_dim\n              shapes_match <- letSubExp \&quot;shapes_match\&quot; =<< eAll dims_match\n              compare_elems_body <- runBodyBinder $ do\n                -- Flatten both x and y.\n                x_num_elems <-\n                  letSubExp \&quot;x_num_elems\&quot;\n                    =<< foldBinOp (I.Mul Int32 I.OverflowUndef) (constant (1 :: Int32)) x_dims\n                x' <- letExp \&quot;x\&quot; $ I.BasicOp $ I.SubExp x\n                y' <- letExp \&quot;x\&quot; $ I.BasicOp $ I.SubExp y\n                x_flat <- letExp \&quot;x_flat\&quot; $ I.BasicOp $ I.Reshape [I.DimNew x_num_elems] x'\n                y_flat <- letExp \&quot;y_flat\&quot; $ I.BasicOp $ I.Reshape [I.DimNew x_num_elems] y'\n\n                -- Compare the elements.\n                cmp_lam <- cmpOpLambda $ I.CmpEq (elemType x_t)\n                cmps <-\n                  letExp \&quot;cmps\&quot; $\n                    I.Op $\n                      I.Screma x_num_elems (I.mapSOAC cmp_lam) [x_flat, y_flat]\n\n                -- Check that all were equal.\n                and_lam <- binOpLambda I.LogAnd I.Bool\n                reduce <- I.reduceSOAC [Reduce Commutative and_lam [constant True]]\n                all_equal <- letSubExp \&quot;all_equal\&quot; $ I.Op $ I.Screma x_num_elems reduce [cmps]\n                return $ resultBody [all_equal]\n\n              letSubExp \&quot;arrays_equal\&quot; $\n                I.If shapes_match compare_elems_body (resultBody [constant False]) $\n                  ifCommon [I.Prim I.Bool]\n    handleOps [x, y] name\n      | Just bop <- find ((name ==) . pretty) [minBound .. maxBound :: E.BinOp] =\n        Just $ \\desc -> do\n          x' <- internaliseExp1 \&quot;x\&quot; x\n          y' <- internaliseExp1 \&quot;y\&quot; y\n          case (E.typeOf x, E.typeOf y) of\n            (E.Scalar (E.Prim t1), E.Scalar (E.Prim t2)) ->\n              internaliseBinOp loc desc bop x' y' t1 t2\n            _ -> error \&quot;Futhark.Internalise.internaliseExp: non-primitive type in BinOp.\&quot;\n    handleOps _ _ = Nothing\n\n    handleSOACs [TupLit [lam, arr] _] \&quot;map\&quot; = Just $ \\desc -> do\n      arr' <- internaliseExpToVars \&quot;map_arr\&quot; arr\n      lam' <- internaliseMapLambda internaliseLambda lam $ map I.Var arr'\n      w <- arraysSize 0 <$> mapM lookupType arr'\n      letTupExp' desc $\n        I.Op $\n          I.Screma w (I.mapSOAC lam') arr'\n    handleSOACs [TupLit [k, lam, arr] _] \&quot;partition\&quot; = do\n      k' <- fromIntegral <$> fromInt32 k\n      Just $ \\_desc -> do\n        arrs <- internaliseExpToVars \&quot;partition_input\&quot; arr\n        lam' <- internalisePartitionLambda internaliseLambda k' lam $ map I.Var arrs\n        uncurry (++) <$> partitionWithSOACS k' lam' arrs\n      where\n        fromInt32 (Literal (SignedValue (Int32Value k')) _) = Just k'\n        fromInt32 (IntLit k' (Info (E.Scalar (E.Prim (Signed Int32)))) _) = Just $ fromInteger k'\n        fromInt32 _ = Nothing\n    handleSOACs [TupLit [lam, ne, arr] _] \&quot;reduce\&quot; = Just $ \\desc ->\n      internaliseScanOrReduce desc \&quot;reduce\&quot; reduce (lam, ne, arr, loc)\n      where\n        reduce w red_lam nes arrs =\n          I.Screma w\n            <$> I.reduceSOAC [Reduce Noncommutative red_lam nes] <*> pure arrs\n    handleSOACs [TupLit [lam, ne, arr] _] \&quot;reduce_comm\&quot; = Just $ \\desc ->\n      internaliseScanOrReduce desc \&quot;reduce\&quot; reduce (lam, ne, arr, loc)\n      where\n        reduce w red_lam nes arrs =\n          I.Screma w\n            <$> I.reduceSOAC [Reduce Commutative red_lam nes] <*> pure arrs\n    handleSOACs [TupLit [lam, ne, arr] _] \&quot;scan\&quot; = Just $ \\desc ->\n      internaliseScanOrReduce desc \&quot;scan\&quot; reduce (lam, ne, arr, loc)\n      where\n        reduce w scan_lam nes arrs =\n          I.Screma w <$> I.scanSOAC [Scan scan_lam nes] <*> pure arrs\n    handleSOACs [TupLit [op, f, arr] _] \&quot;reduce_stream\&quot; = Just $ \\desc ->\n      internaliseStreamRed desc InOrder Noncommutative op f arr\n    handleSOACs [TupLit [op, f, arr] _] \&quot;reduce_stream_per\&quot; = Just $ \\desc ->\n      internaliseStreamRed desc Disorder Commutative op f arr\n    handleSOACs [TupLit [f, arr] _] \&quot;map_stream\&quot; = Just $ \\desc ->\n      internaliseStreamMap desc InOrder f arr\n    handleSOACs [TupLit [f, arr] _] \&quot;map_stream_per\&quot; = Just $ \\desc ->\n      internaliseStreamMap desc Disorder f arr\n    handleSOACs [TupLit [rf, dest, op, ne, buckets, img] _] \&quot;hist\&quot; = Just $ \\desc ->\n      internaliseHist desc rf dest op ne buckets img loc\n    handleSOACs _ _ = Nothing\n\n    handleRest [x] \&quot;!\&quot; = Just $ complementF x\n    handleRest [x] \&quot;opaque\&quot; = Just $ \\desc ->\n      mapM (letSubExp desc . BasicOp . Opaque) =<< internaliseExp \&quot;opaque_arg\&quot; x\n    handleRest [E.TupLit [a, si, v] _] \&quot;scatter\&quot; = Just $ scatterF a si v\n    handleRest [E.TupLit [n, m, arr] _] \&quot;unflatten\&quot; = Just $ \\desc -> do\n      arrs <- internaliseExpToVars \&quot;unflatten_arr\&quot; arr\n      n' <- internaliseExp1 \&quot;n\&quot; n\n      m' <- internaliseExp1 \&quot;m\&quot; m\n      -- The unflattened dimension needs to have the same number of elements\n      -- as the original dimension.\n      old_dim <- I.arraysSize 0 <$> mapM lookupType arrs\n      dim_ok <-\n        letSubExp \&quot;dim_ok\&quot;\n          =<< eCmpOp\n            (I.CmpEq I.int32)\n            (eBinOp (I.Mul Int32 I.OverflowUndef) (eSubExp n') (eSubExp m'))\n            (eSubExp old_dim)\n      dim_ok_cert <-\n        assert\n          \&quot;dim_ok_cert\&quot;\n          dim_ok\n          \&quot;new shape has different number of elements than old shape\&quot;\n          loc\n      certifying dim_ok_cert $\n        forM arrs $ \\arr' -> do\n          arr_t <- lookupType arr'\n          letSubExp desc $\n            I.BasicOp $\n              I.Reshape (reshapeOuter [DimNew n', DimNew m'] 1 $ I.arrayShape arr_t) arr'\n    handleRest [arr] \&quot;flatten\&quot; = Just $ \\desc -> do\n      arrs <- internaliseExpToVars \&quot;flatten_arr\&quot; arr\n      forM arrs $ \\arr' -> do\n        arr_t <- lookupType arr'\n        let n = arraySize 0 arr_t\n            m = arraySize 1 arr_t\n        k <- letSubExp \&quot;flat_dim\&quot; $ I.BasicOp $ I.BinOp (Mul Int32 I.OverflowUndef) n m\n        letSubExp desc $\n          I.BasicOp $\n            I.Reshape (reshapeOuter [DimNew k] 2 $ I.arrayShape arr_t) arr'\n    handleRest [TupLit [x, y] _] \&quot;concat\&quot; = Just $ \\desc -> do\n      xs <- internaliseExpToVars \&quot;concat_x\&quot; x\n      ys <- internaliseExpToVars \&quot;concat_y\&quot; y\n      outer_size <- arraysSize 0 <$> mapM lookupType xs\n      let sumdims xsize ysize =\n            letSubExp \&quot;conc_tmp\&quot; $\n              I.BasicOp $\n                I.BinOp (I.Add I.Int32 I.OverflowUndef) xsize ysize\n      ressize <-\n        foldM sumdims outer_size\n          =<< mapM (fmap (arraysSize 0) . mapM lookupType) [ys]\n\n      let conc xarr yarr =\n            I.BasicOp $ I.Concat 0 xarr [yarr] ressize\n      letSubExps desc $ zipWith conc xs ys\n    handleRest [TupLit [offset, e] _] \&quot;rotate\&quot; = Just $ \\desc -> do\n      offset' <- internaliseExp1 \&quot;rotation_offset\&quot; offset\n      internaliseOperation desc e $ \\v -> do\n        r <- I.arrayRank <$> lookupType v\n        let zero = intConst Int32 0\n            offsets = offset' : replicate (r -1) zero\n        return $ I.Rotate offsets v\n    handleRest [e] \&quot;transpose\&quot; = Just $ \\desc ->\n      internaliseOperation desc e $ \\v -> do\n        r <- I.arrayRank <$> lookupType v\n        return $ I.Rearrange ([1, 0] ++ [2 .. r -1]) v\n    handleRest [TupLit [x, y] _] \&quot;zip\&quot; = Just $ \\desc ->\n      (++) <$> internaliseExp (desc ++ \&quot;_zip_x\&quot;) x\n        <*> internaliseExp (desc ++ \&quot;_zip_y\&quot;) y\n    handleRest [x] \&quot;unzip\&quot; = Just $ flip internaliseExp x\n    handleRest [x] \&quot;trace\&quot; = Just $ flip internaliseExp x\n    handleRest [x] \&quot;break\&quot; = Just $ flip internaliseExp x\n    handleRest _ _ = Nothing\n\n    toSigned int_to e desc = do\n      e' <- internaliseExp1 \&quot;trunc_arg\&quot; e\n      case E.typeOf e of\n        E.Scalar (E.Prim E.Bool) ->\n          letTupExp' desc $\n            I.If\n              e'\n              (resultBody [intConst int_to 1])\n              (resultBody [intConst int_to 0])\n              $ ifCommon [I.Prim $ I.IntType int_to]\n        E.Scalar (E.Prim (E.Signed int_from)) ->\n          letTupExp' desc $ I.BasicOp $ I.ConvOp (I.SExt int_from int_to) e'\n        E.Scalar (E.Prim (E.Unsigned int_from)) ->\n          letTupExp' desc $ I.BasicOp $ I.ConvOp (I.ZExt int_from int_to) e'\n        E.Scalar (E.Prim (E.FloatType float_from)) ->\n          letTupExp' desc $ I.BasicOp $ I.ConvOp (I.FPToSI float_from int_to) e'\n        _ -> error \&quot;Futhark.Internalise: non-numeric type in ToSigned\&quot;\n\n    toUnsigned int_to e desc = do\n      e' <- internaliseExp1 \&quot;trunc_arg\&quot; e\n      case E.typeOf e of\n        E.Scalar (E.Prim E.Bool) ->\n          letTupExp' desc $\n            I.If\n              e'\n              (resultBody [intConst int_to 1])\n              (resultBody [intConst int_to 0])\n              $ ifCommon [I.Prim $ I.IntType int_to]\n        E.Scalar (E.Prim (E.Signed int_from)) ->\n          letTupExp' desc $ I.BasicOp $ I.ConvOp (I.ZExt int_from int_to) e'\n        E.Scalar (E.Prim (E.Unsigned int_from)) ->\n          letTupExp' desc $ I.BasicOp $ I.ConvOp (I.ZExt int_from int_to) e'\n        E.Scalar (E.Prim (E.FloatType float_from)) ->\n          letTupExp' desc $ I.BasicOp $ I.ConvOp (I.FPToUI float_from int_to) e'\n        _ -> error \&quot;Futhark.Internalise.internaliseExp: non-numeric type in ToUnsigned\&quot;\n\n    complementF e desc = do\n      e' <- internaliseExp1 \&quot;complement_arg\&quot; e\n      et <- subExpType e'\n      case et of\n        I.Prim (I.IntType t) ->\n          letTupExp' desc $ I.BasicOp $ I.UnOp (I.Complement t) e'\n        I.Prim I.Bool ->\n          letTupExp' desc $ I.BasicOp $ I.UnOp I.Not e'\n        _ ->\n          error \&quot;Futhark.Internalise.internaliseExp: non-int/bool type in Complement\&quot;\n\n    scatterF a si v desc = do\n      si' <- letExp \&quot;write_si\&quot; . BasicOp . SubExp =<< internaliseExp1 \&quot;write_arg_i\&quot; si\n      svs <- internaliseExpToVars \&quot;write_arg_v\&quot; v\n      sas <- internaliseExpToVars \&quot;write_arg_a\&quot; a\n\n      si_shape <- I.arrayShape <$> lookupType si'\n      let si_w = shapeSize 0 si_shape\n      sv_ts <- mapM lookupType svs\n\n      svs' <- forM (zip svs sv_ts) $ \\(sv, sv_t) -> do\n        let sv_shape = I.arrayShape sv_t\n            sv_w = arraySize 0 sv_t\n\n        -- Generate an assertion and reshapes to ensure that sv and si' are the same\n        -- size.\n        cmp <-\n          letSubExp \&quot;write_cmp\&quot; $\n            I.BasicOp $\n              I.CmpOp (I.CmpEq I.int32) si_w sv_w\n        c <-\n          assert\n            \&quot;write_cert\&quot;\n            cmp\n            \&quot;length of index and value array does not match\&quot;\n            loc\n        certifying c $\n          letExp (baseString sv ++ \&quot;_write_sv\&quot;) $\n            I.BasicOp $ I.Reshape (reshapeOuter [DimCoercion si_w] 1 sv_shape) sv\n\n      indexType <- rowType <$> lookupType si'\n      indexName <- newVName \&quot;write_index\&quot;\n      valueNames <- replicateM (length sv_ts) $ newVName \&quot;write_value\&quot;\n\n      sa_ts <- mapM lookupType sas\n      let bodyTypes = replicate (length sv_ts) indexType ++ map rowType sa_ts\n          paramTypes = indexType : map rowType sv_ts\n          bodyNames = indexName : valueNames\n          bodyParams = zipWith I.Param bodyNames paramTypes\n\n      -- This body is pretty boring right now, as every input is exactly the output.\n      -- But it can get funky later on if fused with something else.\n      body <- localScope (scopeOfLParams bodyParams) $\n        insertStmsM $ do\n          let outs = replicate (length valueNames) indexName ++ valueNames\n          results <- forM outs $ \\name ->\n            letSubExp \&quot;write_res\&quot; $ I.BasicOp $ I.SubExp $ I.Var name\n          ensureResultShape\n            \&quot;scatter value has wrong size\&quot;\n            loc\n            bodyTypes\n            $ resultBody results\n\n      let lam =\n            I.Lambda\n              { I.lambdaParams = bodyParams,\n                I.lambdaReturnType = bodyTypes,\n                I.lambdaBody = body\n              }\n          sivs = si' : svs'\n\n      let sa_ws = map (arraySize 0) sa_ts\n      letTupExp' desc $ I.Op $ I.Scatter si_w lam sivs $ zip3 sa_ws (repeat 1) sas\n\nfuncall ::\n  String ->\n  QualName VName ->\n  [SubExp] ->\n  SrcLoc ->\n  InternaliseM ([SubExp], [I.ExtType])\nfuncall desc (QualName _ fname) args loc = do\n  (fname', closure, shapes, value_paramts, fun_params, rettype_fun) <-\n    lookupFunction fname\n  argts <- mapM subExpType args\n\n  shapeargs <- argShapes shapes fun_params argts\n  let diets =\n        replicate (length closure + length shapeargs) I.ObservePrim\n          ++ map I.diet value_paramts\n  args' <-\n    ensureArgShapes\n      \&quot;function arguments of wrong shape\&quot;\n      loc\n      (map I.paramName fun_params)\n      (map I.paramType fun_params)\n      (map I.Var closure ++ shapeargs ++ args)\n  argts' <- mapM subExpType args'\n  case rettype_fun $ zip args' argts' of\n    Nothing ->\n      error $\n        \&quot;Cannot apply \&quot; ++ pretty fname ++ \&quot; to arguments\\n \&quot;\n          ++ pretty args'\n          ++ \&quot;\\nof types\\n \&quot;\n          ++ pretty argts'\n          ++ \&quot;\\nFunction has parameters\\n \&quot;\n          ++ pretty fun_params\n    Just ts -> do\n      safety <- askSafety\n      attrs <- asks envAttrs\n      ses <-\n        attributing attrs $\n          letTupExp' desc $\n            I.Apply fname' (zip args' diets) ts (safety, loc, mempty)\n      return (ses, map I.fromDecl ts)\n\n-- Bind existential names defined by an expression, based on the\n-- concrete values that expression evaluated to.  This most\n-- importantly should be done after function calls, but also\n-- everything else that can produce existentials in the source\n-- language.\nbindExtSizes :: E.StructType -> [VName] -> [SubExp] -> InternaliseM ()\nbindExtSizes ret retext ses = do\n  ts <- internaliseType ret\n  ses_ts <- mapM subExpType ses\n\n  let combine t1 t2 =\n        mconcat $ zipWith combine' (arrayExtDims t1) (arrayDims t2)\n      combine' (I.Free (I.Var v)) se\n        | v `elem` retext = M.singleton v se\n      combine' _ _ = mempty\n\n  forM_ (M.toList $ mconcat $ zipWith combine ts ses_ts) $ \\(v, se) ->\n    letBindNames [v] $ BasicOp $ SubExp se\n\naskSafety :: InternaliseM Safety\naskSafety = do\n  check <- asks envDoBoundsChecks\n  return $ if check then I.Safe else I.Unsafe\n\n-- Implement partitioning using maps, scans and writes.\npartitionWithSOACS :: Int -> I.Lambda -> [I.VName] -> InternaliseM ([I.SubExp], [I.SubExp])\npartitionWithSOACS k lam arrs = do\n  arr_ts <- mapM lookupType arrs\n  let w = arraysSize 0 arr_ts\n  classes_and_increments <- letTupExp \&quot;increments\&quot; $ I.Op $ I.Screma w (mapSOAC lam) arrs\n  (classes, increments) <- case classes_and_increments of\n    classes : increments -> return (classes, take k increments)\n    _ -> error \&quot;partitionWithSOACS\&quot;\n\n  add_lam_x_params <-\n    replicateM k $ I.Param <$> newVName \&quot;x\&quot; <*> pure (I.Prim int32)\n  add_lam_y_params <-\n    replicateM k $ I.Param <$> newVName \&quot;y\&quot; <*> pure (I.Prim int32)\n  add_lam_body <- runBodyBinder $\n    localScope (scopeOfLParams $ add_lam_x_params ++ add_lam_y_params) $\n      fmap resultBody $\n        forM (zip add_lam_x_params add_lam_y_params) $ \\(x, y) ->\n          letSubExp \&quot;z\&quot; $\n            I.BasicOp $\n              I.BinOp\n                (I.Add Int32 I.OverflowUndef)\n                (I.Var $ I.paramName x)\n                (I.Var $ I.paramName y)\n  let add_lam =\n        I.Lambda\n          { I.lambdaBody = add_lam_body,\n            I.lambdaParams = add_lam_x_params ++ add_lam_y_params,\n            I.lambdaReturnType = replicate k $ I.Prim int32\n          }\n      nes = replicate (length increments) $ constant (0 :: Int32)\n\n  scan <- I.scanSOAC [I.Scan add_lam nes]\n  all_offsets <- letTupExp \&quot;offsets\&quot; $ I.Op $ I.Screma w scan increments\n\n  -- We have the offsets for each of the partitions, but we also need\n  -- the total sizes, which are the last elements in the offests.  We\n  -- just have to be careful in case the array is empty.\n  last_index <- letSubExp \&quot;last_index\&quot; $ I.BasicOp $ I.BinOp (I.Sub Int32 OverflowUndef) w $ constant (1 :: Int32)\n  nonempty_body <- runBodyBinder $\n    fmap resultBody $\n      forM all_offsets $ \\offset_array ->\n        letSubExp \&quot;last_offset\&quot; $ I.BasicOp $ I.Index offset_array [I.DimFix last_index]\n  let empty_body = resultBody $ replicate k $ constant (0 :: Int32)\n  is_empty <- letSubExp \&quot;is_empty\&quot; $ I.BasicOp $ I.CmpOp (CmpEq int32) w $ constant (0 :: Int32)\n  sizes <-\n    letTupExp \&quot;partition_size\&quot; $\n      I.If is_empty empty_body nonempty_body $\n        ifCommon $ replicate k $ I.Prim int32\n\n  -- The total size of all partitions must necessarily be equal to the\n  -- size of the input array.\n\n  -- Create scratch arrays for the result.\n  blanks <- forM arr_ts $ \\arr_t ->\n    letExp \&quot;partition_dest\&quot; $\n      I.BasicOp $\n        Scratch (elemType arr_t) (w : drop 1 (I.arrayDims arr_t))\n\n  -- Now write into the result.\n  write_lam <- do\n    c_param <- I.Param <$> newVName \&quot;c\&quot; <*> pure (I.Prim int32)\n    offset_params <- replicateM k $ I.Param <$> newVName \&quot;offset\&quot; <*> pure (I.Prim int32)\n    value_params <- forM arr_ts $ \\arr_t ->\n      I.Param <$> newVName \&quot;v\&quot; <*> pure (I.rowType arr_t)\n    (offset, offset_stms) <-\n      collectStms $\n        mkOffsetLambdaBody\n          (map I.Var sizes)\n          (I.Var $ I.paramName c_param)\n          0\n          offset_params\n    return\n      I.Lambda\n        { I.lambdaParams = c_param : offset_params ++ value_params,\n          I.lambdaReturnType =\n            replicate (length arr_ts) (I.Prim int32)\n              ++ map I.rowType arr_ts,\n          I.lambdaBody =\n            mkBody offset_stms $\n              replicate (length arr_ts) offset\n                ++ map (I.Var . I.paramName) value_params\n        }\n  results <-\n    letTupExp \&quot;partition_res\&quot; $\n      I.Op $\n        I.Scatter\n          w\n          write_lam\n          (classes : all_offsets ++ arrs)\n          $ zip3 (repeat w) (repeat 1) blanks\n  sizes' <-\n    letSubExp \&quot;partition_sizes\&quot; $\n      I.BasicOp $\n        I.ArrayLit (map I.Var sizes) $ I.Prim int32\n  return (map I.Var results, [sizes'])\n  where\n    mkOffsetLambdaBody ::\n      [SubExp] ->\n      SubExp ->\n      Int ->\n      [I.LParam] ->\n      InternaliseM SubExp\n    mkOffsetLambdaBody _ _ _ [] =\n      return $ constant (-1 :: Int32)\n    mkOffsetLambdaBody sizes c i (p : ps) = do\n      is_this_one <-\n        letSubExp \&quot;is_this_one\&quot; $\n          I.BasicOp $\n            I.CmpOp (CmpEq int32) c $\n              intConst Int32 $ toInteger i\n      next_one <- mkOffsetLambdaBody sizes c (i + 1) ps\n      this_one <-\n        letSubExp \&quot;this_offset\&quot;\n          =<< foldBinOp\n            (Add Int32 OverflowUndef)\n            (constant (-1 :: Int32))\n            (I.Var (I.paramName p) : take i sizes)\n      letSubExp \&quot;total_res\&quot; $\n        I.If\n          is_this_one\n          (resultBody [this_one])\n          (resultBody [next_one])\n          $ ifCommon [I.Prim int32]\n\ntypeExpForError :: E.TypeExp VName -> InternaliseM [ErrorMsgPart SubExp]\ntypeExpForError (E.TEVar qn _) =\n  return [ErrorString $ pretty qn]\ntypeExpForError (E.TEUnique te _) =\n  (\&quot;*\&quot; :) <$> typeExpForError te\ntypeExpForError (E.TEArray te d _) = do\n  d' <- dimExpForError d\n  te' <- typeExpForError te\n  return $ [\&quot;[\&quot;, d', \&quot;]\&quot;] ++ te'\ntypeExpForError (E.TETuple tes _) = do\n  tes' <- mapM typeExpForError tes\n  return $ [\&quot;(\&quot;] ++ intercalate [\&quot;, \&quot;] tes' ++ [\&quot;)\&quot;]\ntypeExpForError (E.TERecord fields _) = do\n  fields' <- mapM onField fields\n  return $ [\&quot;{\&quot;] ++ intercalate [\&quot;, \&quot;] fields' ++ [\&quot;}\&quot;]\n  where\n    onField (k, te) =\n      (ErrorString (pretty k ++ \&quot;: \&quot;) :) <$> typeExpForError te\ntypeExpForError (E.TEArrow _ t1 t2 _) = do\n  t1' <- typeExpForError t1\n  t2' <- typeExpForError t2\n  return $ t1' ++ [\&quot; -> \&quot;] ++ t2'\ntypeExpForError (E.TEApply t arg _) = do\n  t' <- typeExpForError t\n  arg' <- case arg of\n    TypeArgExpType argt -> typeExpForError argt\n    TypeArgExpDim d _ -> pure <$> dimExpForError d\n  return $ t' ++ [\&quot; \&quot;] ++ arg'\ntypeExpForError (E.TESum cs _) = do\n  cs' <- mapM (onClause . snd) cs\n  return $ intercalate [\&quot; | \&quot;] cs'\n  where\n    onClause c = do\n      c' <- mapM typeExpForError c\n      return $ intercalate [\&quot; \&quot;] c'\n\ndimExpForError :: E.DimExp VName -> InternaliseM (ErrorMsgPart SubExp)\ndimExpForError (DimExpNamed d _) = do\n  substs <- lookupSubst $ E.qualLeaf d\n  d' <- case substs of\n    Just [v] -> return v\n    _ -> return $ I.Var $ E.qualLeaf d\n  return $ ErrorInt32 d'\ndimExpForError (DimExpConst d _) =\n  return $ ErrorString $ pretty d\ndimExpForError DimExpAny = return \&quot;\&quot;\n\n-- A smart constructor that compacts neighbouring literals for easier\n-- reading in the IR.\nerrorMsg :: [ErrorMsgPart a] -> ErrorMsg a\nerrorMsg = ErrorMsg . compact\n  where\n    compact [] = []\n    compact (ErrorString x : ErrorString y : parts) =\n      compact (ErrorString (x ++ y) : parts)\n    compact (x : y) = x : compact y\n&quot;}}},{&quot;rowIdx&quot;:10,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;A new book has been published on Hindi movie music, called \&quot;Gaata Rahe Mera Dil\&quot;. It is written by Anirudha Bhattacharjee and Balaji Vittal, who had earlier written a book called \&quot;R D Burman- the man and the music\&quot;.\n\nThe book discusss 50 classic songs from the history of Hindi movies. The oldest song is from\&quot; Street Singer\&quot; ( 1937) sung by K L Saigal. The latest is \&quot;Ae ajnabi tu bhi kabhi\&quot; (Dil Se). The 300 page book published by Harper Collins discusses the history and other information behind the making of the songs.\n\nThis book is getting good reviews. Unfortunately this book is not available in small towns (I am a small town person living in a small town). From the review of this book as well as from what I read in the earlier book on R D Burman, I find that the \&quot;Technical\&quot; details that the authors discuss about the songs is nothing but bullcrap. Here is what the authors say about the \&quot;Dosti\&quot; (1964) song- Mera toh jo bhi kadam hai.\n\nThe composers use two Komal notes—Dha and Ni—in the mukhra where all the other five shudh notes give the song a major-scale colour. The antara, with the emphasis shifting to a Komal Re, creates the transitory feel of a change in scale. The use of Komal notes—the Ga and Ni—creates an aura of unconventiality and underlines the desolate cry of grief…”\n\nI feel that the above \&quot;technical\&quot; discussion makes no sense whatsoever. I request SL, our technical guru, to tell us what he thinks of the above comment on the song. S L, if you can get hold of this book, please give us your review of this book.\n\nWill do. FIrst I am unable to recollect this song. Have to hear it.The book I will have to order over amazon I guess given I am in a smaller town than what you are in.. I certainly will do the prelims as far as this song is concerned. The extract you have given itself is sort of iffy there..\n\nMy preliminary thoughts. First off, this song is in rag Yaman Kalayan. Mood for this raga is \&quot;serene\&quot; and \&quot;haunting\&quot; (depending on the rendition) but I would not necessarily call it grief.. a more appropriate word would be feeling lost, or feeling of longing but not grief.\n\nThe \&quot;haunting\&quot; nature comes from the mM (yes mM and not M) rather than anything else which makes in yaman kalyan instead of pure yaman (which would have a \&quot;M\&quot; instead. ). Compare that to Koi jab tumhara hriday tod de, tadapta hua jab koi chod de.. (Kalyan) which is again 'haunting' not sad.. I think the author intended to use the term melancholous instead of \&quot;sad\&quot; as in tragic or rondu as we would say in hindi.\n\n(cos of my leg, I cannot really play my KB right now (position of the foot pedals pls the distance were the KB will have to be cos of my leg and my back posture etc, and so cannot really \&quot;judge\&quot; by ear alone the impact of the komal dha and ni as the author suggests.. so I will not say they are wrong but my priliminary thought suggest the mM being more uumphaatic than anything else.)\n\nm=Pure maM=Dirgh/tivra Ma (ma does not have a komal).\n\n(Note: Modern musicians consider Yaman, Kalyan (carnatic eq Kalyani) and Yaman-kalyan as one and the same but traditionalists consider them three distinct ragas).\n\nAlso given it is Yaman-Kalyan (I am 100% certain) there is no room for any kind of komal dha or ni there!! where did the author hear that is a big question for me. The raga has all shuddha swars except for the tivra Ma!\n\nBTW kalyan can be romantic and very at that. Yaad rahega payaar ka ye, rangeen zamaana yaad rahega. While songs like Tasvir Banaata Hun, Tasvir Nahin Banati are in raag pahaadi) are extremely haunting.. so it is more of the lyrics plus progression rather than the scale that gives the \&quot;feel\&quot; even though the notes have about 50% contribution. In some cases, it can be complete opposite feel.. same raga..eg Nache Man Mora Magan Dhig Dha Dhigi Dhigi (Bhairavi) vs Mujhko is raat ki tanhahi mein aawaaz na do... or Tera jaana dil ke armanon ka (both bhairavi again).\n\n(I know raja pai would have my pants off if not for this disclaimer!! He knows his music stuff).\n\nThanks for your prompt impromptu technical review. And what about the authors going technobabble viz. \&quot;... give the song a major-scale colour.\&quot; There is not concept of major scale or its equivalent in Hindustani classical music. We have \&quot;raag\&quot; in Hindustani classical music instead. And also \&quot;....creates the transitory feel of a change in scale. \&quot; Do they mean anything whatsoever, or they are supposed to impress the ignorants.\n\nHonestly I have never come across such jargon ever. Trasitionary nature basically means nothing.. there is no such thing. You change scales as in a ragamalika but what exactly a transitionary nature of a scale is foreign to me. And another thing, the major and minor \&quot;nature\&quot; of a scale is determined by its aroha avaroha progression (pakad) and not by gamaks at all. I am not sure I understand that piece of gobledygook at all.\n\nAnd another point.. Major scale usually signifies (in western jargon), an upbeat song.. like lungi dance lungi dance.. the one that gets your blood pumping and a minor scale is more serene, romatic and all those soft feel (hotel california).. so how can a minor scale impart a Major scale color is beyond my technical know how.\n\nI editied a few posts above for accuracy (I type as thoughts come to me). Change of raga or mix of them is raga malika. But shift of scales does not change the raga or the feel.. for instance Jai ho.. in the ending crescendo, the scale shifts up by half a note but the ENTIRE progression shifts up. It only adds the \&quot;fervor\&quot; part or emphasis to the feel.. like say from fan to a die hard fan kinds... same is there in the MJ number man in the mirror in the ending stages.\n\nOne can argue that it might shift moods.. like in case of \&quot;pyarr hamen kis mod pe le aaya ke dil kare hai, koi ye bataye kyaa hoga\&quot;.. when it becomes a fast dance number in the end.. but notice it starts out as a COMICAL/frivolous/chewtiyaagiri song at the outset (only pretending to be a sad song).. and becomes ultra comic by the end (movie satte pe satta).\n\nThe authors were expecting that people will not question all this technobabble rather get \&quot;impressed\&quot; by it. I suspect that they have come up with similar \&quot;technical\&quot; analysis in case of all the 50 songs that they have discussed in the book. That should make it a very interesting read, though not in a manner that the authors intended.\n\npeaceful wrote:Can you teach me how to download only one song from you tube? Because when I post certain song, others already open on right hand side.I want to learn more.I heard you are my technical gurus.\n\nYes SC, it would be fun to see their treatment of rather esoteric ragas like bilaval, asavari etc.. those are dyamic and the most dynamic (Strictly in my opinion) is malkauns. I think they will use rather quixotic phrases.. like blanket ones to suggest something very exotic but then would not really be saying anything... I love such highly educational pieces\n\nA review of this book was posted in a blog by someone who is my facebook friend as well as the facebook friend of the author of this book. I have questioned the \&quot;technical\&quot; analysis of this song as mentioned in the review. The author refused to accept that the song is in Yaman Kalyan. Please have a look at the vehement denial by the author in his comments in this post:\n\nWell then what raga is it based on? I am willing to be proven wrong but with my limited and rusty knowledge, I am almost willing to bet a bit that it is YAMAN KALYAN. what else is that? I cannot think of any other raga that it may belong to.\n\nAlso the argument \&quot;Tonic does not change\&quot; hmm.. what does he mean by that? Modulation or something else\n\nSee, ragas are based on notes and both komal and shuddh and teevra are notes by their own right. Changing from the shudh to komal or dirga, usually will NOT change the tonic (And note tonic can be loosely termed as vadi in hindustani).. modulation is a tonic shift and that also is not quite the same as a raga jump... instances of that happen all the time with NO shift in raga at all (abrupt in kind) (Mozarts K160). But lets not get into all that. I think the authors want a reasonable book to sell.. Let them. Why pee in their party man. People will read it with passing facination, remember some old songs, feel educated and they get some money..all is well.. no harm done.\n\nIntrsting. I will have to play it to confirm then. Patdeep ka ek gaana hai megha chaye aadhi raat baran ban gayi niniyaa.. trying to hum those together does not give me the feel.. I will have to play it on the kb to be sure. I am still going to stick to yaman kalyan for the interim (apne aap ko wrong bolne me sharm aata hai naa khud ko..).\n\nMadhuvanti mein even if not a good example I can think of only one song and that is way obscure one.. Rasm-e-Ulfat Ko Nibhaen To Nibhaen Kaise from movie Dil Ki Rahen\n\nand hindustani/carnatic music is an ocean.. I got trained for a few years and that in a mixed martial arts style.. a little boxing and karate and taikwando thrown in.. i.e hindustani, carnatic and western theory.. so it is impossible that I will be an \&quot;expert\&quot; to know all the ragas out there and recognize them(jack of all perhaps but master not at all ). There are tons of ragas that I might not even heard or or styles there of.. It is highly possible that I am wrong here but my gut feel stll leans towards yaman-kalyan or its variant. But I will not say now that it is a 100% sure case as I did earlier. Ab your other friend has firmly planted that doubt in my bird brain.\n\nYaar re to hai aaroha mein.. which both patdeep and madhuvanti do not have as far as I can recall! Jara confirm karoge from your friend? But hindi movies do not conform to the rules of classical music strictly. So vo bhi ek locha hai.&quot;}}},{&quot;rowIdx&quot;:11,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;Predictors of neurobehavioral symptoms in a university population: a multivariate approach using a postconcussive symptom questionnaire.\nSeveral factors have been linked to severity of postconcussive-type (neurobehavioral) symptoms. In this study, predictors of neurobehavioral symptoms were examined using multivariate methods to determine the relative importance of each. Data regarding demographics, symptoms, current alcohol use, history of traumatic brain injury (TBI), orthopedic injuries, and psychiatric/developmental diagnoses were collected via questionnaire from 3027 university students. The most prominent predictors of symptoms were gender, history of depression or anxiety, history of attention-deficit/hyperactivity disorder or learning disability diagnosis, and frequency of alcohol use. Prior mild TBI was significantly related to overall symptoms, but this effect was small in comparison to other predictors. These results provide further evidence that neurobehavioral symptoms are multi-determined phenomena, and highlight the importance of psychiatric comorbidity, demographic factors, and health behaviors to neurobehavioral symptom presentation after mild TBI.&quot;}}},{&quot;rowIdx&quot;:12,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;The Difficult Crossing\n\nThe Difficult Crossing (La traversée difficile) is the name given to two oil-on-canvas paintings by the Belgian surrealist René Magritte. The original version was completed in 1926 during Magritte's early prolific years of surrealism and is currently held in a private collection. A later version was completed in 1963 and is also held in a private collection.\n\nThe 1926 version \n\nThe 1926 version contains a number of curious elements, some of which are common to many of Magritte's works.\n\nThe bilboquet or baluster (the object which looks like the bishop from a chess set) first appears in the painting The Lost Jockey (1926). In this and some other works—for example The Secret Player (1927) and The Art of Conversation (1961)—the bilboquet seems to play an inanimate role analogous to a tree or plant. In other instances, such as here with The Difficult Crossing, the bilboquet is given the anthropomorphic feature of a single eye.\n\nAnother common feature of Magritte's works seen here is the ambiguity between windows and paintings. The back of the room shows a boat in a thunderstorm, but the viewer is left to wonder if the depiction is a painting or the view out a window. Magritte elevated the idea to another level in his series of works based on The Human Condition where \&quot;outdoor\&quot; paintings and windows both appear and even overlap.\n\nNear the bilboquet stands a table. On the top, a disembodied hand is holding a red bird, as if clutching it. The front right leg of the table resembles a human leg.\n\nThe 1963 version \n\nIn the 1963 version, a number of elements have changed or disappeared. Instead of taking place in a room, the action has moved outside. There is no table or hand clutching a bird and the scene of the rough sea in the ambiguous window/painting at the rear becomes the entire new background. Near the front a low brick wall is seen with a bilboquet behind and a suited figure with an eyeball for a head in front.\n\nThere is ambiguity as to whether the suited figure is a man or another bilboquet. Some bilboquet figures, for example those in The Encounter (1929), have similar eyeball heads, however the suit covers the body and no clear identification can be made. If the suited figure is a man, it could be a self-portrait, which means that the eyeball is covering his face. Covering Magritte's face with an object was another common theme for himself, Son of Man being a good example.\n\nRelation to other paintings \n\nBoth versions of The Difficult Crossing show a strong similarity to Magritte's painting The Birth of the Idol, also from 1926. The scene is outside and depicts a rough sea in the background (this time without ship). Objects which appear include a bilboquet (the non-anthropomorphic variety), a mannequin arm (similar to the hand which clutches the bird) and a wooden board with window-like holes cut out which is nearly identical to those flanking both sides of the room in earlier version.\n\nAll three paintings may have been inspired by Giorgio de Chirico's Metaphysical Interior (1916) which features a room with a number of strange objects and an ambiguous window/painting showing a boat. Magritte was certainly aware of De Chirico's work and was emotionally moved by his first viewing of a reproduction of Song of Love (1913–14).\n\nReferences \n\nCategory:Paintings by René Magritte\nCategory:Surrealist paintings\nCategory:1926 paintings\nCategory:1963 paintings\nCategory:Maritime paintings&quot;}}},{&quot;rowIdx&quot;:13,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;God’s 4 Signs to Moses: The Staff That Turned into a Serpent\n\nThe LORD said to him, “What is that in your hand?” And he said, “A staff.” Then He said, “Throw it on the ground.” So he threw it on the ground, and it became a serpent; and Moses fled from it. But the LORD said to Moses, “Stretch out your hand and grasp it by its tail”—so he stretched out his hand and caught it, and it became a staff in his hand… – Exodus 4:2-4\n\nOh Father, our heavenly Father, wash us in the blood of Your Son again today. Let us come to you with a clean conscious. Wash us in the Water of your Word. Open the eyes of our hearts to see Christ, receive Christ, and enjoy Christ. In Jesus’ Name, which is above all names, Amen!\n\nIn Egypt, Moses had the highest education and was skilled in speech (Acts 7:22). When the Lord came to give Moses the revelation that He would free the Israelites, Moses tried to achieve the Lord’s will in his own strength and ended up killing an Egyptian. Trying in his own strength, just led to death.\n\nThe Lord took Moses through 40 years of death in the wilderness. Moses was a broken man when the Lord appeared to him again. Moses could no longer speak well (Exodus 4:10) and he needed a staff for walking.\n\nWe all have many staffs that we rely on. Every earthly thing that you rely on for your daily living is a staff. Your career is a staff. Your education is a staff. Your news is a staff. Your hobby is a staff. Your caffeine is a staff. Your sweets are a staff. Your family is a staff. Your car is a staff. Your intellect is a staff. Your emotions are a staff. Your television is a staff. Your video games are a staff. Your internet is a staff.\n\nThere is no Life in these staffs. These staffs are dead wood. When Moses threw his staff down it became a serpent. Not only is your staff dead, but it is also a serpent.\n\nWhatever you rely on, other than the Lord, becomes a serpent.\n\nYour staffs must be thrown down and put to death. Only then, by the Lord’s command, can you grasp the serpent by the tail, and lift the staff up in resurrection.\n\nDon’t abandon your family. Don’t set up a law in your heart on what you may eat or drink. But turn to the Lord, beholding Him and giving Him your ear. Give everything that you rely on to Him and let Him give you back what you need in resurrection.\n\nIn resurrection, you are no longer reliant upon the staff, you are reliant on God alone.\n\nFather, we cast our staffs down before you. Open our eyes to see the things that your enemy uses to usurp your rightful throne in our hearts. You provide everything we need as we seek Your Kingdom and Your Righteousness first. Let us grasp the enemy by the tail in Your Resurrection Life, that we may be overcomers in Your Victory. In Jesus’ Name, Amen.\n\n1\n\nIf I’d know Christ’s risen power.\nI must ever love the Cross;\nLife from death alone arises;\nThere’s no gain except by loss.\n\nChorus\n\nIf no death, no life,\nIf no death, no life;\nLife from death alone arises;\nIf no death, no life.\n\n2\n\nIf I’d have Christ formed within me,\nI must breathe my final breath,\nLive within the Cross’s shadow,\nPut my soul-life e’er to death.\n\n3\n\nIf God thru th’ Eternal Spirit\nNail me ever with the Lord;\nOnly then as death is working\nWill His life thru me be poured.&quot;}}},{&quot;rowIdx&quot;:14,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;# -*- coding: utf-8 -*-\n\nfrom ... import OratorTestCase\nfrom orator import Model as BaseModel\nfrom orator.orm import (\n    morph_to,\n    has_one,\n    has_many,\n    belongs_to_many,\n    morph_many,\n    belongs_to,\n)\nfrom orator.orm.model import ModelRegister\nfrom orator.connections import SQLiteConnection\nfrom orator.connectors.sqlite_connector import SQLiteConnector\n\n\nclass DecoratorsTestCase(OratorTestCase):\n    @classmethod\n    def setUpClass(cls):\n        Model.set_connection_resolver(DatabaseIntegrationConnectionResolver())\n\n    @classmethod\n    def tearDownClass(cls):\n        Model.unset_connection_resolver()\n\n    def setUp(self):\n        with self.schema().create(\&quot;test_users\&quot;) as table:\n            table.increments(\&quot;id\&quot;)\n            table.string(\&quot;email\&quot;).unique()\n            table.timestamps()\n\n        with self.schema().create(\&quot;test_friends\&quot;) as table:\n            table.increments(\&quot;id\&quot;)\n            table.integer(\&quot;user_id\&quot;)\n            table.integer(\&quot;friend_id\&quot;)\n\n        with self.schema().create(\&quot;test_posts\&quot;) as table:\n            table.increments(\&quot;id\&quot;)\n            table.integer(\&quot;user_id\&quot;)\n            table.string(\&quot;name\&quot;)\n            table.timestamps()\n            table.soft_deletes()\n\n        with self.schema().create(\&quot;test_photos\&quot;) as table:\n            table.increments(\&quot;id\&quot;)\n            table.morphs(\&quot;imageable\&quot;)\n            table.string(\&quot;name\&quot;)\n            table.timestamps()\n\n    def tearDown(self):\n        self.schema().drop(\&quot;test_users\&quot;)\n        self.schema().drop(\&quot;test_friends\&quot;)\n        self.schema().drop(\&quot;test_posts\&quot;)\n        self.schema().drop(\&quot;test_photos\&quot;)\n\n    def test_extra_queries_are_properly_set_on_relations(self):\n        self.create()\n\n        # With eager loading\n        user = OratorTestUser.with_(\&quot;friends\&quot;, \&quot;posts\&quot;, \&quot;post\&quot;, \&quot;photos\&quot;).find(1)\n        post = OratorTestPost.with_(\&quot;user\&quot;, \&quot;photos\&quot;).find(1)\n        self.assertEqual(1, len(user.friends))\n        self.assertEqual(2, len(user.posts))\n        self.assertIsInstance(user.post, OratorTestPost)\n        self.assertEqual(3, len(user.photos))\n        self.assertIsInstance(post.user, OratorTestUser)\n        self.assertEqual(2, len(post.photos))\n        self.assertEqual(\n            'SELECT * FROM \&quot;test_users\&quot; INNER JOIN \&quot;test_friends\&quot; ON \&quot;test_users\&quot;.\&quot;id\&quot; = \&quot;test_friends\&quot;.\&quot;friend_id\&quot; '\n            'WHERE \&quot;test_friends\&quot;.\&quot;user_id\&quot; = ? ORDER BY \&quot;friend_id\&quot; ASC',\n            user.friends().to_sql(),\n        )\n        self.assertEqual(\n            'SELECT * FROM \&quot;test_posts\&quot; WHERE \&quot;deleted_at\&quot; IS NULL AND \&quot;test_posts\&quot;.\&quot;user_id\&quot; = ?',\n            user.posts().to_sql(),\n        )\n        self.assertEqual(\n            'SELECT * FROM \&quot;test_posts\&quot; WHERE \&quot;test_posts\&quot;.\&quot;user_id\&quot; = ? ORDER BY \&quot;name\&quot; DESC',\n            user.post().to_sql(),\n        )\n        self.assertEqual(\n            'SELECT * FROM \&quot;test_photos\&quot; WHERE \&quot;name\&quot; IS NOT NULL AND \&quot;test_photos\&quot;.\&quot;imageable_id\&quot; = ? AND \&quot;test_photos\&quot;.\&quot;imageable_type\&quot; = ?',\n            user.photos().to_sql(),\n        )\n        self.assertEqual(\n            'SELECT * FROM \&quot;test_users\&quot; WHERE \&quot;test_users\&quot;.\&quot;id\&quot; = ? ORDER BY \&quot;id\&quot; ASC',\n            post.user().to_sql(),\n        )\n        self.assertEqual(\n            'SELECT * FROM \&quot;test_photos\&quot; WHERE \&quot;test_photos\&quot;.\&quot;imageable_id\&quot; = ? AND \&quot;test_photos\&quot;.\&quot;imageable_type\&quot; = ?',\n            post.photos().to_sql(),\n        )\n\n        # Without eager loading\n        user = OratorTestUser.find(1)\n        post = OratorTestPost.find(1)\n        self.assertEqual(1, len(user.friends))\n        self.assertEqual(2, len(user.posts))\n        self.assertIsInstance(user.post, OratorTestPost)\n        self.assertEqual(3, len(user.photos))\n        self.assertIsInstance(post.user, OratorTestUser)\n        self.assertEqual(2, len(post.photos))\n        self.assertEqual(\n            'SELECT * FROM \&quot;test_users\&quot; INNER JOIN \&quot;test_friends\&quot; ON \&quot;test_users\&quot;.\&quot;id\&quot; = \&quot;test_friends\&quot;.\&quot;friend_id\&quot; '\n            'WHERE \&quot;test_friends\&quot;.\&quot;user_id\&quot; = ? ORDER BY \&quot;friend_id\&quot; ASC',\n            user.friends().to_sql(),\n        )\n        self.assertEqual(\n            'SELECT * FROM \&quot;test_posts\&quot; WHERE \&quot;deleted_at\&quot; IS NULL AND \&quot;test_posts\&quot;.\&quot;user_id\&quot; = ?',\n            user.posts().to_sql(),\n        )\n        self.assertEqual(\n            'SELECT * FROM \&quot;test_posts\&quot; WHERE \&quot;test_posts\&quot;.\&quot;user_id\&quot; = ? ORDER BY \&quot;name\&quot; DESC',\n            user.post().to_sql(),\n        )\n        self.assertEqual(\n            'SELECT * FROM \&quot;test_photos\&quot; WHERE \&quot;name\&quot; IS NOT NULL AND \&quot;test_photos\&quot;.\&quot;imageable_id\&quot; = ? AND \&quot;test_photos\&quot;.\&quot;imageable_type\&quot; = ?',\n            user.photos().to_sql(),\n        )\n        self.assertEqual(\n            'SELECT * FROM \&quot;test_users\&quot; WHERE \&quot;test_users\&quot;.\&quot;id\&quot; = ? ORDER BY \&quot;id\&quot; ASC',\n            post.user().to_sql(),\n        )\n        self.assertEqual(\n            'SELECT * FROM \&quot;test_photos\&quot; WHERE \&quot;test_photos\&quot;.\&quot;imageable_id\&quot; = ? AND \&quot;test_photos\&quot;.\&quot;imageable_type\&quot; = ?',\n            post.photos().to_sql(),\n        )\n\n        self.assertEqual(\n            'SELECT DISTINCT * FROM \&quot;test_posts\&quot; WHERE \&quot;deleted_at\&quot; IS NULL AND \&quot;test_posts\&quot;.\&quot;user_id\&quot; = ? ORDER BY \&quot;user_id\&quot; ASC',\n            user.posts().order_by(\&quot;user_id\&quot;).distinct().to_sql(),\n        )\n\n    def create(self):\n        user = OratorTestUser.create(id=1, email=\&quot;john@doe.com\&quot;)\n        friend = OratorTestUser.create(id=2, email=\&quot;jane@doe.com\&quot;)\n        user.friends().attach(friend)\n\n        post1 = user.posts().create(name=\&quot;First Post\&quot;)\n        post2 = user.posts().create(name=\&quot;Second Post\&quot;)\n\n        user.photos().create(name=\&quot;Avatar 1\&quot;)\n        user.photos().create(name=\&quot;Avatar 2\&quot;)\n        user.photos().create(name=\&quot;Avatar 3\&quot;)\n\n        post1.photos().create(name=\&quot;Hero 1\&quot;)\n        post1.photos().create(name=\&quot;Hero 2\&quot;)\n\n    def connection(self):\n        return Model.get_connection_resolver().connection()\n\n    def schema(self):\n        return self.connection().get_schema_builder()\n\n\nclass Model(BaseModel):\n\n    _register = ModelRegister()\n\n\nclass OratorTestUser(Model):\n\n    __table__ = \&quot;test_users\&quot;\n    __guarded__ = []\n\n    @belongs_to_many(\&quot;test_friends\&quot;, \&quot;user_id\&quot;, \&quot;friend_id\&quot;, with_pivot=[\&quot;id\&quot;])\n    def friends(self):\n        return OratorTestUser.order_by(\&quot;friend_id\&quot;)\n\n    @has_many(\&quot;user_id\&quot;)\n    def posts(self):\n        return OratorTestPost.where_null(\&quot;deleted_at\&quot;)\n\n    @has_one(\&quot;user_id\&quot;)\n    def post(self):\n        return OratorTestPost.order_by(\&quot;name\&quot;, \&quot;desc\&quot;)\n\n    @morph_many(\&quot;imageable\&quot;)\n    def photos(self):\n        return OratorTestPhoto.where_not_null(\&quot;name\&quot;)\n\n\nclass OratorTestPost(Model):\n\n    __table__ = \&quot;test_posts\&quot;\n    __guarded__ = []\n\n    @belongs_to(\&quot;user_id\&quot;)\n    def user(self):\n        return OratorTestUser.order_by(\&quot;id\&quot;)\n\n    @morph_many(\&quot;imageable\&quot;)\n    def photos(self):\n        return \&quot;test_photos\&quot;\n\n\nclass OratorTestPhoto(Model):\n\n    __table__ = \&quot;test_photos\&quot;\n    __guarded__ = []\n\n    @morph_to\n    def imageable(self):\n        return\n\n\nclass DatabaseIntegrationConnectionResolver(object):\n\n    _connection = None\n\n    def connection(self, name=None):\n        if self._connection:\n            return self._connection\n\n        self._connection = SQLiteConnection(\n            SQLiteConnector().connect({\&quot;database\&quot;: \&quot;:memory:\&quot;})\n        )\n\n        return self._connection\n\n    def get_default_connection(self):\n        return \&quot;default\&quot;\n\n    def set_default_connection(self, name):\n        pass\n&quot;}}},{&quot;rowIdx&quot;:15,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;Saturday, May 30, 2009\n\nOn solid grounds: Campground owners hope that spending on improvements pays off with more visitors in slumping economy\n\nFrom the Wisconsin State Journal\n\nBy Marv Balousek\n\nWhile some businesses may be making cutbacks because of the recession, Wisconsin's private campground owners have been spending money to make their properties more attractive to prospective customers this year.\n\nThey've invested hundreds of thousands of dollars to improve their facilities even without the benefit of federal stimulus dollars.\n\nThe owners expect to cash in as families scale back their Disney World plans this summer in favor of less-expensive weekend camping trips. Reservations are up this year for the 16-week season that began on Memorial Day weekend, according to two Wisconsin campground owners.\n\n\&quot;Camping, even in stressful times, can be the outdoor activity of choice,\&quot;said Bud Styer, who operates five Wisconsin campgrounds. \&quot;People with families especially are still going to recreate and they're going to do something with their kids.\&quot;\n\nStyer said he is spending $565,000 this year at his five campgrounds and expects to recoup that investment in three to five years through camping fees.\n\nHe's spent money on things such as a Jumping Pillow for Baraboo Hills Campground north of Baraboo, blacktop for a circle around the pond at Merry Mac's Campground near Merrimac and a remodeled camp store at River Bend Campground, which he manages but doesn't own, west of Watertown.\n\nRiver Bend, which features a 300-foot water slide, was closed last summer because of extensive flooding when the Crawfish River overflowed its banks. It didn't reopen until August. Styer said the campground had to be cleaned before improvements were made.\n\nHe also has upgraded Smokey Hollow Campground near Lodi and Tilleda Falls Campground west of Shawano.\n\nWater-related features such as Water Wars -- a competition with water balloons -- or floating water slides and climbing walls are popular improvements at many parks.\n\n\&quot;Years ago, we camped in a Coleman tent with a kerosene lantern,\&quot; Styer said. \&quot;Nowadays, everybody's got to have electric, water, box fans and rope lights.\&quot;\n\nStyer said he's a great believer in \&quot;stuff\&quot; and that the more stuff you have, the more you can charge for campsites. A private Wisconsin campground with amenities can charge $39 to $50 a night, he said, compared to $25 to $35 a night for a standard campground.\n\n\&quot;If you want to expand your business and generate additional revenues, then you have to have a better facility,\&quot;he said. \&quot;It has to have the bells and whistles. People are going to camp closer to home and look for the best value.\&quot;\n\nUpgrading campground facilities this year is a national trend, said Linda Pfofaizer, president of the National Association of RV Parks and Campgrounds in Larkspur, Colo. The association represents 8,000 private campground owners.\n\nAlthough the investments could benefit them this summer, she said, most campground owners also are looking beyond the recession,\n\n\&quot;The recession is temporary,\&quot; she said. \&quot;Most campground and RV park operators believe that it behooves them to move forward with their improvement plans to remain competitive with other travel and tourism options.\&quot;\n\n\&quot;We try to keep adding what the customers are asking for,\&quot; he said. \&quot;A few years ago, during a downturn, there were many people who didn't travel West or take a large vacation, and we're seeing that again.\&quot;\n\nAt Fox Hill RV Park south of Wisconsin Dells near Ho Chunk Casino, roads have been repaved with recycled asphalt, the pool was retiled, the bath house was remodeled and a disc golf course was added, said owner Jim Tracy.\n\nHe said the overall construction slowdown helped him negotiate a good deal on the bath house remodeling.\n\n\&quot;I'm still pretty bullish on the summer,\&quot; Tracy said. \&quot;I want to give (campers) reasons to come back and talk me up to their friends and families.\&quot;\n\nBud Styer Media\n\nBud Styer, left, and Keith Stachurski, manager of Smokey Hollow Campground near Lodi, confer at a beach area of the campground. Styer has invested $565,000 this year in improvements at the five campgrounds he operates.\n\nZachary Zirbel cuts the grass at Smokey Hollow Campground as he prepares the sites for another influx of weekend campers.\n\nStachurski patrols Smokey Hollow on a Segway, a small electric vehicle. He also offers riding lessons to campers. The red structure behind him is used for Spaceball, a game that combines the skills of trampoline and basketball.\n\nFurnished conastoga wagons and beachfront yurts are among the camping options at Smokey Hollow Campground near Lodi.\n\nChildren play on a Jumping Pillow at Chetek River Campground near Chetek, north of Eau Claire.\n\nA row of furnished yurts, or circular tents, is another camping option at Merry Mac's Campground in Merrimac.&quot;}}},{&quot;rowIdx&quot;:16,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;Q:\n\nDrag and drop in jquery\n\nI didn't get the id of dropped div on dropping on another div\ni get the id_droppable i but didn't get the id_dropped div \nThe alert id_dropped give undefined as result\nPlease help me verify my code and correct my error.\n$(\&quot;.full-circle\&quot;).droppable({\n    accept: \&quot;.unseated_guest\&quot;,\n    drop: function(event, ui) {\n        var id_droppable = this.id;\n        alert(id_droppable);\n        var id_dropped = ui.id;\n        alert(id_dropped);\n        var name=document.getElementById(\&quot;div_name_0\&quot;).value;\n        $(this).css(\&quot;background-color\&quot;,\&quot;red\&quot;);\n        $(this).append(ui.draggable);\n        //$(this).draggable('disable');\n        }\n\n    });\n\nA:\n\nThe ui parameter does not have an id attribute, as it is a reference to the element being drug. You need to get the id like ui.draggable.attr('id'), or whatever method you prefer to get the id of an element.\n$(\&quot;.full-circle\&quot;).droppable({\n    accept: \&quot;.unseated_guest\&quot;,\n    drop: function(event, ui) {\n        //Stuff above\n        var id_dropped = ui.draggable.attr('id');\n        alert(id_dropped);\n        //Stuff below\n        }\n\n    });\n\n&quot;}}},{&quot;rowIdx&quot;:17,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;Girmal Falls\n\nGeneral\n\nThis waterfall extends to a height of up to 100 feet, making it the highest waterfall of Gujarat. The picturesque beauty of this site makes it popular among visitors and people of the region alike. The water swiftly falls from a great height, creating a fog like condition that’s eye catching.\n\nThe government of this state is working on many projects to make this place an ideal picnic spot and a tourist attraction. The fall comes to its best form at the time of monsoon and provides an immensely striking appearance. Some of the best natural features of Gujarat can be explored in this place. This place is a nice and refreshing retreat for any traveler.&quot;}}},{&quot;rowIdx&quot;:18,&quot;cells&quot;:{&quot;text&quot;:{&quot;kind&quot;:&quot;string&quot;,&quot;value&quot;:&quot;Be afraid, England and Wales 2019. The Aussies are coming. Or rather, the Aussies are still coming, after an 86-run defeat of a New Zealand team who seemed consumed by the occasion at Lord’s.\n\nAt times in the Black Caps’ attempts to chase 243 this felt a bit like a Sunday morning junior age group game. Steve Smith sent down some weird, wonky all-sorts. Wickets were greeted with jokey huddles. It took the return of Mitchell Starc to restore a sense of World Cup order, figures of five for 26 reflecting a spell of brutal, high-grade, white-ball fast-bowling that blew away the tail.\n\nPakistan’s Imad Wasim holds nerve to see off Afghanistan in thriller Read more\n\nVictory leaves Australia on their own at the top of the group stage table with seven wins from eight, and with some of their own question marks finding an answer or two. They had some help along the way, not least from Kane Williamson’s diffident captaincy.\n\nOn a sun-baked north London day New Zealand had first shown how to beat Australia; then almost immediately they showed how to fail to beat Australia. Exposing that thin-looking middle order had always looked a plan. Failing to punch through by taking off your best bowlers was where the game got away, captured by the sight of the skipper wheeling out seven overs of mid-innings part-time leg-spin.\n\nTrent Boult even had time at the end of Australia’s innings to conjure a largely pointless World Cup hat-trick. Instead it was a gutsy, occasionally streaky 107-run sixth-wicket partnership between Usman Khawaja and Alex Carey that decided this game.\n\nFrom the start Lord’s was a place of Trans-Tasman good cheer as the grey shroud of the last few weeks lifted. Australia had won the toss and elected to bat. In any list of David Warner’s top five career sledges, the line “You’re not f-ing facing Trent Boult’s 80mph half-volleys now, mate” – yelled at Joe Root as he took guard during the Cardiff Ashes Test of 2015 – might just make it on grounds of subtlety alone.\n\nThis time it was Warner’s turn to face the Boult music, a tricky prospect at the start of a heat-hazed day. Boult’s third over saw Aaron Finch out lbw falling over an inswinger.\n\nColin de Grandhomme shared the new ball, toiling in manfully from the nursery end like a man with a two-seat sofa strapped to his back. But it was Lockie Ferguson who made the most telling incision. Ferguson was a joy to watch, a thrillingly athletic fast bowler with an air of the old school adventurer about him, so much so you half expect to see him handing the umpire his fedora and bull-whip before every over.\n\nHere Ferguson took out Warner and Steve Smith for two runs in seven balls. First he bounced out Warner. Smith was booed on. And Ferguson soon did for him too, thanks to another moment of brilliance.\n\nSmith pulled another short one, middling it with a lovely, sweet clump. At short backward square leg Martin Guptill dived full length and stuck out a hand. Eventually he stood up, raised his hand and threw a ball – apparently the same one – into the sky. It was a catch that will look good in replay. In real time it was a moment to stop the days and spin it back on its axis. James Neesham entered the attack and 81 for three became 81 for four as Marcus Stoinis was caught behind, before Neesham held a one-handed caught and bowled just above the grass to get rid of Glenn Maxwell.\n\nNew Zealand had Australia wobbling around the ring at five for 92 after 21 overs. But Khawaja found a partner in Carey, who clipped and carved at assorted short-pitch offerings as New Zealand struggled to adapt their length to his punchy style. The fifty partnership arrived off 51 balls, at the same time as Khawaja’s own half-century, an innings that will be doubly satisfying on a day when no one else in Australia’s top six got to 25.\n\nCarey inside-edged to the pavilion fence to reach a battling 51 off 41 balls. There is a jaunty fearlessness to his cricket. Best of all he averages 50 now at No 7 for Australia and has made that tricky slot a position of strength in the last month.\n\nThere will be regrets for New Zealand. Not least in Boult’s disappearance from the attack until the 42nd over. Their chase never really got started. Jason Behrendorff dismissed both openers and a 20-over score of 61 for two deteriorated to 157 all out as only Williamson seemed to have the skill to score on a crabby pitch.\n\nAustralia were talked down at the World Cup’s start as a team overly reliant on five star players. At Lord’s it was the underrated back-up cast who dug in to turn this game, maintaining the air of a team finding other gears as this tournament narrows towards its end point.&quot;}}}],&quot;truncated&quot;:true},&quot;paginationData&quot;:{&quot;pageIndex&quot;:0,&quot;numItemsPerPage&quot;:100,&quot;numTotalItems&quot;:1000000,&quot;offset&quot;:0,&quot;length&quot;:100}},&quot;jwt&quot;:&quot;eyJhbGciOiJFZERTQSJ9.eyJyZWFkIjp0cnVlLCJwZXJtaXNzaW9ucyI6eyJyZXBvLmNvbnRlbnQucmVhZCI6dHJ1ZX0sImlhdCI6MTc0MjkyMzA4OSwic3ViIjoiL2RhdGFzZXRzL0plYW5LYWRkb3VyL21pbmlwaWxlIiwiZXhwIjoxNzQyOTI2Njg5LCJpc3MiOiJodHRwczovL2h1Z2dpbmdmYWNlLmNvIn0.jlgkWu33lEa8Gj2KL3YnZTN2BOVGRKzJAbRF-CE8Y5w9w6rYgg39xK9hpHPdGPf-oX4Mix8fqywVFOFACnrjDQ&quot;,&quot;displayUrls&quot;:true},&quot;dataset&quot;:&quot;JeanKaddour/minipile&quot;,&quot;isGated&quot;:false,&quot;isPrivate&quot;:false,&quot;hasParquetFormat&quot;:true,&quot;author&quot;:{&quot;_id&quot;:&quot;6304061c0547362a22a76a17&quot;,&quot;avatarUrl&quot;:&quot;https://cdn-avatars.huggingface.co/v1/production/uploads/1661339692442-6304061c0547362a22a76a17.jpeg&quot;,&quot;fullname&quot;:&quot;Jean Kaddour&quot;,&quot;name&quot;:&quot;JeanKaddour&quot;,&quot;type&quot;:&quot;user&quot;,&quot;isPro&quot;:false,&quot;isHf&quot;:false,&quot;isHfAdmin&quot;:false,&quot;isMod&quot;:false,&quot;followerCount&quot;:5},&quot;compact&quot;:true}"><div class="flex flex-col overflow-hidden shadow-xs mx-auto mb-10 rounded-lg border pt-2  px-2.5"><div class="mb-2 flex flex-wrap items-center gap-2"><div class="mr-auto flex items-center"><svg class="mr-1 flex-none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 12 12"><path fill="currentColor" d="M2.5 2h7a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-7a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1Zm0 2v2h3V4h-3Zm4 0v2h3V4h-3Zm-4 3v2h3V7h-3Zm4 0v2h3V7h-3Z"></path></svg>
	<div class="whitespace-nowrap font-semibold">Dataset Viewer</div>
	</div>
				<a href="/datasets/JeanKaddour/minipile/tree/refs%2Fconvert%2Fparquet/default" class="group mr-1 text-xs text-gray-400 max-sm:hidden"><svg class="text-[.6rem] mr-1 inline -translate-y-px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path fill="currentColor" d="M12 10H6.78A11 11 0 0 1 27 16h2A13 13 0 0 0 6 7.68V4H4v8h8zm8 12h5.22A11 11 0 0 1 5 16H3a13 13 0 0 0 23 8.32V28h2v-8h-8z"></path></svg>
						<span class="underline decoration-gray-300 group-hover:decoration-gray-400 dark:decoration-gray-500 dark:group-hover:decoration-gray-300">Auto-converted</span> to Parquet
					</a>
				<button class="btn shadow-xs flex cursor-pointer items-center rounded-sm border px-1 py-0.5 text-xs font-normal text-gray-700 hover:text-gray-800 hover:shadow-inner dark:hover:text-gray-200"><svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" style="transform: rotate(360deg);"><path d="M31 16l-7 7l-1.41-1.41L28.17 16l-5.58-5.59L24 9l7 7z" fill="currentColor"></path><path d="M1 16l7-7l1.41 1.41L3.83 16l5.58 5.59L8 23l-7-7z" fill="currentColor"></path><path d="M12.419 25.484L17.639 6l1.932.518L14.35 26z" fill="currentColor"></path></svg>API</button>
					<button class="btn shadow-xs flex cursor-pointer items-center rounded-sm border px-1 py-0.5 text-xs font-normal text-gray-700 hover:text-gray-800 hover:shadow-inner dark:hover:text-gray-200"><svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 12 12"><path d="M9.80603 2.86737H3.56107C3.37704 2.86737 3.20055 2.94048 3.07042 3.0706C2.94029 3.20073 2.86719 3.37723 2.86719 3.56126V9.80622C2.86719 9.99025 2.94029 10.1667 3.07042 10.2969C3.20055 10.427 3.37704 10.5001 3.56107 10.5001H9.80603C9.99006 10.5001 10.1666 10.427 10.2967 10.2969C10.4268 10.1667 10.4999 9.99025 10.4999 9.80622V3.56126C10.4999 3.37723 10.4268 3.20073 10.2967 3.0706C10.1666 2.94048 9.99006 2.86737 9.80603 2.86737Z" fill="currentColor" fill-opacity="0.3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M2.40942 1.66191C2.05175 1.66191 1.7618 1.95186 1.7618 2.30953V6.76191H1.43799V2.30953C1.43799 1.77303 1.87291 1.3381 2.40942 1.3381H6.45704V1.66191H2.40942Z" fill="currentColor"></path></svg>Embed</button>

					<button class="bg-linear-to-b shadow-xs flex items-center gap-1.5 rounded-full border from-white to-red-100/90 px-2 py-0.5 text-xs font-medium text-[#2D3648] transition-shadow hover:shadow-inner dark:from-gray-900 dark:to-red-800/30 dark:text-gray-100 dark:hover:shadow-inner dark:hover:shadow-red-800/30" ><svg class="h-3.5 w-3.5 text-red-500" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 12 12"><path fill="currentColor" d="M2.5 2h7a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-7a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1Zm0 2v2h3V4h-3Zm4 0v2h3V4h-3Zm-4 3v2h3V7h-3Zm4 0v2h3V7h-3Z"></path></svg>
						<span>Data Studio</span></button></div>
		<div class="flex flex-1 flex-col overflow-hidden -mx-2.5"><div class="flex flex-1 flex-col overflow-hidden"><div class="flex min-h-0 flex-1"><div class="flex flex-1 flex-col overflow-hidden"><div class="md:-mx-2.5 flex min-w-0 flex-wrap border-t"><div class="flex min-w-0 flex-1 flex-wrap"><div class="grid flex-1 grid-cols-1 overflow-hidden text-sm md:grid-cols-2 md:place-content-center sm:mx-2.5"><label class="relative block flex-1 px-3 py-2 hover:bg-gray-50 dark:border-gray-850 dark:hover:bg-gray-950 md:border-r md:border-r-0 hidden" title="default"><span class="text-gray-500">Subset (1)</span>
			<div class="flex items-center whitespace-nowrap"><span class="truncate">default</span>
				<span class="mx-2 text-gray-500">·</span>
					<span class="text-gray-500">1.01M rows</span>
				<svg class="ml-auto min-w-6 pl-2" width="1em" height="1em" viewBox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L6 6L11 1" stroke="currentColor"></path></svg></div>
			<select class="absolute inset-0 z-10 w-full cursor-pointer border-0 bg-white text-base opacity-0"><optgroup label="Subset (1)"><option value="default" selected>default (1.01M rows)</option></optgroup></select></label>
		<label class="relative block flex-1 px-3 py-2 hover:bg-gray-50 dark:border-gray-850 dark:hover:bg-gray-900 md:border-r md:border-r" title="train"><div class="text-gray-500">Split (3)</div>
				<div class="flex items-center overflow-hidden whitespace-nowrap"><span class="truncate">train</span>
					<span class="mx-2 text-gray-500">·</span>
						<span class="text-gray-500">1M rows</span>
					<svg class="ml-auto min-w-6 pl-2" width="1em" height="1em" viewBox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L6 6L11 1" stroke="currentColor"></path></svg></div>
				<select class="absolute inset-0 z-10 w-full cursor-pointer border-0 bg-white text-base opacity-0"><optgroup label="Split (3)"><option value="train" selected>train (1M rows)</option><option value="validation" >validation (500 rows)</option><option value="test" >test (10k rows)</option></optgroup></select></label></div></div>
								</div>

							<div class="flex min-h-0 flex-1 flex-col ">
	<div class="bg-linear-to-r text-smd relative flex items-center dark:border-gray-900 dark:bg-gray-950 false border-t [&amp;:has(:focus)]:from-gray-50 [&amp;:has(:focus)]:to-transparent [&amp;:has(:focus)]:to-20% dark:[&amp;:has(:focus)]:from-gray-900"><form class="flex-1"><svg class="absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-gray-400" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M30 28.59L22.45 21A11 11 0 1 0 21 22.45L28.59 30zM5 14a9 9 0 1 1 9 9a9 9 0 0 1-9-9z" fill="currentColor"></path></svg>
				<input disabled class="outline-hidden h-9 w-full border-none bg-transparent px-1 pl-9 pr-3 placeholder:text-gray-400 " placeholder="Search this dataset" dir="auto"></form>
			<div class="flex items-center gap-2 px-2 py-1"><button type="button" class="hover:bg-yellow-200/70 flex items-center gap-1 rounded-md border border-yellow-200 bg-yellow-100 pl-0.5 pr-1 text-[.8rem] leading-normal text-gray-700 dark:border-orange-500/25 dark:bg-orange-500/20 dark:text-gray-300 dark:hover:brightness-110 hidden"><div class="rounded-sm bg-yellow-300 px-1 font-mono text-[.7rem] font-bold text-black dark:bg-yellow-700 dark:text-gray-200">SQL
	</div>
	Console
</button></div></div>


<div class="flex flex-1 flex-col overflow-hidden min-h-64 border-t">
		

<div class="max-h-96 relative overflow-auto"><table class="w-full table-auto rounded-lg font-mono text-xs text-gray-900"><thead class="shadow-xs sticky left-0 right-0 top-0 z-1 bg-white align-top"><tr class="space-y-54 h-full min-w-fit divide-x border-b text-left"><th class="h-full max-w-sm p-2 text-left  relative w-full"><div class="flex h-full flex-col flex-nowrap justify-between"><div><div class="flex items-center justify-between">text
				<form class="flex flex-col"><button id="asc" class="-mr-1 ml-2 h-[0.4rem] w-[0.8rem] transition ease-in-out"><svg class="-rotate-180 transform text-gray-300 hover:text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 64 256 128" fill="currentColor" aria-hidden="true"><path d="M213.65674,101.657l-80,79.99976a7.99945,7.99945,0,0,1-11.31348,0l-80-79.99976A8,8,0,0,1,48,88H208a8,8,0,0,1,5.65674,13.657Z"></path></svg></button>
						<button id="desc" class="-mr-1 ml-2 h-[0.4rem] w-[0.8rem] transition ease-in-out"><svg class="text-gray-300 hover:text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 64 256 128" fill="currentColor" aria-hidden="true"><path d="M213.65674,101.657l-80,79.99976a7.99945,7.99945,0,0,1-11.31348,0l-80-79.99976A8,8,0,0,1,48,88H208a8,8,0,0,1,5.65674,13.657Z"></path></svg></button></form></div>

			<div class="mb-2 whitespace-nowrap text-xs font-normal text-gray-500"><span>string</span><span class="italic text-gray-400 before:mx-1 before:content-['·']">lengths</span></div></div>

		<div><div class="" style="height: 40px; padding-top: 2px"><svg width="130" height="28"><g><rect class="fill-gray-400 dark:fill-gray-500/80" rx="2" x="0" y="0" width="11.2" height="30" fill-opacity="1"></rect><rect class="fill-gray-400 dark:fill-gray-500/80" rx="2" x="13.2" y="25" width="11.2" height="5" fill-opacity="1"></rect><rect class="fill-gray-400 dark:fill-gray-500/80" rx="2" x="26.4" y="25" width="11.2" height="5" fill-opacity="1"></rect><rect class="fill-gray-400 dark:fill-gray-500/80" rx="2" x="39.599999999999994" y="25" width="11.2" height="5" fill-opacity="1"></rect><rect class="fill-gray-400 dark:fill-gray-500/80" rx="2" x="52.8" y="25" width="11.2" height="5" fill-opacity="1"></rect><rect class="fill-gray-400 dark:fill-gray-500/80" rx="2" x="66" y="25" width="11.2" height="5" fill-opacity="1"></rect><rect class="fill-gray-400 dark:fill-gray-500/80" rx="2" x="79.19999999999999" y="25" width="11.2" height="5" fill-opacity="1"></rect><rect class="fill-gray-400 dark:fill-gray-500/80" rx="2" x="92.39999999999999" y="25" width="11.2" height="5" fill-opacity="1"></rect><rect class="fill-gray-400 dark:fill-gray-500/80" rx="2" x="105.6" y="25" width="11.2" height="5" fill-opacity="1"></rect><rect class="fill-gray-400 dark:fill-gray-500/80" rx="2" x="118.8" y="25" width="11.2" height="5" fill-opacity="1"></rect></g><rect class="fill-white dark:fill-gray-900" x="0" y="26" width="130" height="2" stroke-opacity="1"></rect><line class="stroke-gray-100 dark:stroke-gray-500/20" x1="0" y1="27.5" x2="130" y2="27.5" stroke-opacity="1"></line><g><rect class="fill-indigo-500 cursor-pointer" x="-1" y="0" width="13.2" height="30" fill-opacity="0"></rect><rect class="fill-indigo-500 cursor-pointer" x="12.2" y="0" width="13.2" height="30" fill-opacity="0"></rect><rect class="fill-indigo-500 cursor-pointer" x="25.4" y="0" width="13.2" height="30" fill-opacity="0"></rect><rect class="fill-indigo-500 cursor-pointer" x="38.599999999999994" y="0" width="13.2" height="30" fill-opacity="0"></rect><rect class="fill-indigo-500 cursor-pointer" x="51.8" y="0" width="13.2" height="30" fill-opacity="0"></rect><rect class="fill-indigo-500 cursor-pointer" x="65" y="0" width="13.2" height="30" fill-opacity="0"></rect><rect class="fill-indigo-500 cursor-pointer" x="78.19999999999999" y="0" width="13.2" height="30" fill-opacity="0"></rect><rect class="fill-indigo-500 cursor-pointer" x="91.39999999999999" y="0" width="13.2" height="30" fill-opacity="0"></rect><rect class="fill-indigo-500 cursor-pointer" x="104.6" y="0" width="13.2" height="30" fill-opacity="0"></rect><rect class="fill-indigo-500 cursor-pointer" x="117.8" y="0" width="13.2" height="30" fill-opacity="0"></rect></g></svg>
	<div class="relative font-light text-gray-400" style="height: 10px; width: 130px;"><div class="absolute left-0 overflow-hidden text-ellipsis whitespace-nowrap" style="max-width: 60px">8</div>
			<div class="absolute overflow-hidden text-ellipsis whitespace-nowrap" style="right: 0px; max-width: 60px">5.77M</div>
			</div></div></div></div>
	
						</th></tr></thead>
			<tbody class="h-16 overflow-scroll"><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="0"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">HTC's Vive Pro headset is available to pre-order for $799

We've seen plenty of Beats-focused KIRFs in our time, some better than others. Few, however, play quite so directly on the name as OrigAudio's Beets. For $25, adopters get a set of headphones that bear little direct resemblance to Dr. Dre's audio gear of choice, but are no doubt bound to impress friends -- at least, up until they see a root vegetable logo instead of a lower-case B. Thankfully, there's more to it than just amusing and confusing peers. Every purchase will lead to a donation of canned beets (what else?) to the Second Harvest Food Bank of Orange County. For us, that's reason enough to hope that Beats doesn't put the kibosh on OrigAudio's effort. Besides, we could use some accompaniment for our BeetBox.</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="1"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">Q:

NullPointerException in getview of custom adapter

I'm getting image from bitmap method and trying to populate the listview. But when i call the bitmap function inside getview the nullpointerException error occurs. please help me... 
here is my view Activity class:
public class Viewactivity extends Activity{

    TextView tv;
    ImageView im;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.views);

        ListView mListView = (ListView)findViewById(R.id.listView);
        //array houlds all images
        int Images[] = new int[]{
            R.drawable.confidential,
            ...     
            };
        //array holds all strings to be drawn in the image

        CustomList adaptor = new CustomList(this , Images);
        mListView.setAdapter(adaptor);

    }

    public Bitmap ProcessingBitmap(int image) {
        // TODO Auto-generated method stub
        Bitmap bm1 = null;
        Bitmap newBitmap = null;

        final String data =getIntent().getExtras().getString("keys");
        bm1 = ((BitmapDrawable) Viewactivity.this.getResources()
                .getDrawable(image)).getBitmap();
        Config config = bm1.getConfig();
        if(config == null){
            config = Bitmap.Config.ARGB_8888;
        }

        newBitmap = Bitmap.createBitmap(bm1.getWidth(), bm1.getHeight(),config);
        Canvas newCanvas = new Canvas(newBitmap);

        newCanvas.drawBitmap(bm1, 0, 0, null);

        if(data != null){
            Paint paintText = new Paint(Paint.ANTI_ALIAS_FLAG);
            paintText.setColor(Color.RED);
            paintText.setTextSize(300);
            // paintText.setTextAlign(Align.CENTER);
            paintText.setStyle(Style.FILL);
            paintText.setShadowLayer(10f, 10f, 10f, Color.BLACK);

            Rect rectText = new Rect();
            paintText.getTextBounds(data, 0, data.length(), rectText);
            paintText.setTextScaleX(1.f);

            newCanvas.drawText(data, 
              0, rectText.height(), paintText);

            Toast.makeText(getApplicationContext(), 
              "drawText: " + data, Toast.LENGTH_LONG).show();

        }else{
            Toast.makeText(getApplicationContext(), 
              "caption empty!", Toast.LENGTH_LONG).show();
        }
        return newBitmap;

    }
}

this is my adapter class:
public class CustomList extends BaseAdapter{

    Viewactivity act;
    int[] IMAGES;
    LayoutInflater inflator;
    Context sContext;
    //private String[] TEXTS;

    public CustomList(Context context, int[] images){
        this.IMAGES = images;
        //this.TEXTS = texts;
        this.sContext = context;
        inflator = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return IMAGES.length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View v = inflator.inflate(R.layout.row_list, parent, false);
        final ImageView imageView = (ImageView) v.findViewById(R.id.imageView);
        imageView.setImageBitmap(act.ProcessingBitmap(IMAGES[position]));// line no:52
        return imageView;
    }
}

this is my logcat:
12-18 06:16:51.406: E/AndroidRuntime(1388): FATAL EXCEPTION: main
12-18 06:16:51.406: E/AndroidRuntime(1388): Process: com.emple.example, PID: 1388
12-18 06:16:51.406: E/AndroidRuntime(1388): java.lang.NullPointerException
12-18 06:16:51.406: E/AndroidRuntime(1388):     at com.emple.example.CustomList.getView(CustomList.java:52)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.AbsListView.obtainView(AbsListView.java:2263)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1263)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.ListView.onMeasure(ListView.java:1175)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.View.measure(View.java:16497)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.RelativeLayout.measureChild(RelativeLayout.java:689)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:473)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.View.measure(View.java:16497)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.View.measure(View.java:16497)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at com.android.internal.widget.ActionBarOverlayLayout.onMeasure(ActionBarOverlayLayout.java:327)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.View.measure(View.java:16497)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2291)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.View.measure(View.java:16497)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1916)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1113)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1295)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:5670)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:761)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.Choreographer.doCallbacks(Choreographer.java:574)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.Choreographer.doFrame(Choreographer.java:544)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:747)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.os.Handler.handleCallback(Handler.java:733)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.os.Handler.dispatchMessage(Handler.java:95)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.os.Looper.loop(Looper.java:136)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at android.app.ActivityThread.main(ActivityThread.java:5017)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at java.lang.reflect.Method.invokeNative(Native Method)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at java.lang.reflect.Method.invoke(Method.java:515)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)
12-18 06:16:51.406: E/AndroidRuntime(1388):     at dalvik.system.NativeStart.main(Native Method)
12-18 06:21:51.616: I/Process(1388): Sending signal. PID: 1388 SIG: 9

A:

You haven't initialized your act variable. Init it in your adapter constructor.
Something like:
public CustomList(Viewactivitty act, int[] images){
    this.act = act;
    this.IMAGES = images;
    //this.TEXTS = texts;
    this.sContext = act;
    inflator = (LayoutInflater)act.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="2"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">Syringocystadenoma papilliferum of the cervix presenting as vulvar growth in an adolescent girl.
Syringocystadenoma papilliferum (SCP) is a rare, benign, adnexal tumour of apocrine or eccrine differentiation. It is commonly located on head and neck region. We report the case of an 18-year-old woman who presented with a vulvar lobulated growth that was found to arise from the posterior lip of cervix. Histopathological examination revealed the diagnosis of SCP. To our knowledge, SCP arising from the cervix has never been reported previously in the literature, thus we believe this to be the first case of SCP arising from the posterior lip of the cervix.</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="3"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">The basic goal of the effective altruism movement is to create efficient philanthropic change by backing programs and innovations that are cost-effective so that each dollar given impacts as many people as possible. The underlying tenet is that donor dollars are a limited resource, but dollars are just one of the limiting factors. There’s still another major resource that needs to be accounted for: research time.

There’s a learning curve for calculation-driven cause groups (and donors) to figure out what world-plaguing problems really are the most pressing, what solutions seem the most promising or neglected, and what else might need to be done. The problem is there hasn’t been a single resource for accessing all this information in one place.

To change that, Rethink Priorities, an initiative of the effective altruism awareness and engagement building nonprofit Rethink Charity, has launched Priority Wiki, a publicly editable Wikipedia-like online encyclopedia for cause prioritization wonks. It collects and categorizes vetted research around pressing charitable causes and potential interventions.

“This is a big problem because thousands of hours are going into this kind of research, and you don’t want people to forget it exists, or maybe try to duplicate efforts, or just not even remember it,” says Peter Hurford, who codeveloped the wiki alongside colleague Marcus Davis. “We’re trying to capture all relevant research under a wide variety of global issues so that everyone can have a go-to spot to get up to speed.”

To do that, Wiki is organized into six broad types of causes. That includes “Existential/Catastrophic Future Risks,” “Improving Research,” “Decisions and Values,” “Improving Policy,” “Developing World Health and Economic Development,” “Developed World Health and Economic Development,” and “Specific Scientific Research.” Each entry is then comprised of related topics. Under the catastrophe heading, for instance, there’s biosecurity, nuclear security, climate change, and geomagnetic storms.

As the developers explain in an open letter about their efforts, the wiki is currently populated with a collection of research by effective altruism research organizations including Open Philanthropy, GiveWell, 80,000 Hours, and Animal Charity Evaluators. Many of these are formatted in what’s commonly referred to as a “shallow review,” or high-level overview of each issue, and various important statistics and findings. “That gives you a lot of opportunities to dive into the problem and make a more structured way than dumping someone a 60-item reading list,” says Hurford.

Contributors are already revising the content and sharing data about things the originators hadn’t considered. Two recent additions include information about psychedelics and drug reform, and how to prevent or reduce aging-related diseases to extend our natural lifespan.</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="4"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">Essays

Philosophers who think everyday morality is objective should examine the evidence, argues Joshua Knobe.

Imagine two people discussing a question in mathematics. One of them says “7,497 is a prime number,” while the other says, “7,497 is not a prime number.” In a case like this one, we would probably conclude that there can only be a single right answer. We might have a lot of respect for both participants in the conversation, we might agree that they are both very reasonable and conscientious, but all the same, one of them has got to be wrong. The question under discussion here, we might say, is perfectly objective.

But now suppose we switch to a different topic. Two people are talking about food. One of them says “Don’t even think about eating caterpillars! They are totally disgusting and not tasty at all,” while the other says “Caterpillars are a special delicacy – one of the tastiest, most delectable foods a person can ever have occasion to eat.” In this second case, we might have a very different reaction. We might think that there isn’t any single right answer. Maybe caterpillars are just tasty for some people but not for others. This latter question, we might think, should be understood as relative.

Now that we’ve got at least a basic sense for these two categories, we can turn to a more controversial case. Suppose that the two people are talking about morality. One of them says “That action is deeply morally wrong,” while the other is speaking about the very same action and says “That action is completely fine – not the slightest thing to worry about.” In a case like this, one might wonder what reaction would be most appropriate. Should we say that there is a single right answer and anyone who says the opposite must be mistaken, or should we say that different answers could be right for different people? In other words, should we say that morality is something objective or something relative?

This is a tricky question, and it can be difficult to see how one might even begin to address it. Faced with an issue like this one, where exactly should we look for evidence?

Though philosophers have pursued numerous approaches here, one of the most important and influential is to begin with certain facts about people’s ordinary moral practices. The idea is that we can start out with facts about people’s usual ways of thinking or talking and use these facts to get some insight into questions about the true nature of morality.

Thinkers who take this approach usually start out with the assumption that ordinary thought and talk about morality has an objectivist character. For example, the philosopher Michael Smith claims that

we seem to think moral questions have correct answers; that the correct answers are made correct by objective moral facts; that moral facts are wholly determined by circumstances and that, by engaging in moral conversation and argument, we can discover what these objective moral facts determined by the circumstances are.

And Frank Jackson writes:

I take it that it is part of current folk morality that convergence will or would occur. We have some kind of commitment to the idea that moral disagreements can be resolved by sufficient critical reflection – which is why we bother to engage in moral debate. To that extent, some sort of objectivism is part of current folk morality.

Then, once one has in hand this claim about people’s ordinary understanding, the aim is to use it as part of a complex argument for a broader philosophical conclusion. It is here that philosophical work on these issues really shines, with rigorous attention to conceptual distinctions and some truly ingenious arguments, objections and replies. There is just one snag. The trouble is that no real evidence is ever offered for the original assumption that ordinary moral thought and talk has this objective character. Instead, philosophers tend simply to assert that people’s ordinary practice is objectivist and then begin arguing from there.

If we really want to go after these issues in a rigorous way, it seems that we should adopt a different approach. The first step is to engage in systematic empirical research to figure out how the ordinary practice actually works. Then, once we have the relevant data in hand, we can begin looking more deeply into the philosophical implications – secure in the knowledge that we are not just engaging in a philosophical fiction but rather looking into the philosophical implications of people’s actual practices.

Just in the past few years, experimental philosophers have been gathering a wealth of new data on these issues, and we now have at least the first glimmerings of a real empirical research program here. But a funny thing happened when people started taking these questions into the lab. Again and again, when researchers took up these questions experimentally, they did not end up confirming the traditional view. They did not find that people overwhelmingly favoured objectivism. Instead, the results consistently point to a more complex picture. There seems to be a striking degree of conflict even in the intuitions of ordinary folks, with some people under some circumstances offering objectivist answers, while other people under other circumstances offer more relativist views. And that is not all. The experimental results seem to be giving us an ever deeper understanding of why it is that people are drawn in these different directions, what it is that makes some people move toward objectivism and others toward more relativist views.

For a nice example from recent research, consider a study by Adam Feltz and Edward Cokely. They were interested in the relationship between belief in moral relativism and the personality trait openness to experience. Accordingly, they conducted a study in which they measured both openness to experience and belief in moral relativism. To get at people’s degree of openness to experience, they used a standard measure designed by researchers in personality psychology. To get at people’s agreement with moral relativism, they told participants about two characters – John and Fred – who held opposite opinions about whether some given act was morally bad. Participants were then asked whether one of these two characters had to be wrong (the objectivist answer) or whether it could be that neither of them was wrong (the relativist answer). What they found was a quite surprising result. It just wasn’t the case that participants overwhelmingly favoured the objectivist answer. Instead, people’s answers were correlated with their personality traits. The higher a participant was in openness to experience, the more likely that participant was to give a relativist answer.

Geoffrey Goodwin and John Darley pursued a similar approach, this time looking at the relationship between people’s belief in moral relativism and their tendency to approach questions by considering a whole variety of possibilities. They proceeded by giving participants mathematical puzzles that could only be solved by looking at multiple different possibilities. Thus, participants who considered all these possibilities would tend to get these problems right, whereas those who failed to consider all the possibilities would tend to get the problems wrong. Now comes the surprising result: those participants who got these problems right were significantly more inclined to offer relativist answers than were those participants who got the problems wrong.

Taking a slightly different approach, Shaun Nichols and Tricia Folds-Bennett looked at how people’s moral conceptions develop as they grow older. Research in developmental psychology has shown that as children grow up, they develop different understandings of the physical world, of numbers, of other people’s minds. So what about morality? Do people have a different understanding of morality when they are twenty years old than they do when they are only four years old? What the results revealed was a systematic developmental difference. Young children show a strong preference for objectivism, but as they grow older, they become more inclined to adopt relativist views. In other words, there appears to be a developmental shift toward increasing relativism as children mature. (In an exciting new twist on this approach, James Beebe and David Sackris have shown that this pattern eventually reverses, with middle-aged people showing less inclination toward relativism than college students do.)

So there we have it. People are more inclined to be relativists when they score highly in openness to experience, when they have an especially good ability to consider multiple possibilities, when they have matured past childhood (but not when they get to be middle-aged). Looking at these various effects, my collaborators and I thought that it might be possible to offer a single unifying account that explained them all. Specifically, our thought was that people might be drawn to relativism to the extent that they open their minds to alternative perspectives. There could be all sorts of different factors that lead people to open their minds in this way (personality traits, cognitive dispositions, age), but regardless of the instigating factor, researchers seemed always to be finding the same basic effect. The more people have a capacity to truly engage with other perspectives, the more they seem to turn toward moral relativism.

To really put this hypothesis to the test, Hagop Sarkissian, Jennifer Wright, John Park, David Tien and I teamed up to run a series of new studies. Our aim was to actually manipulate the degree to which people considered alternative perspectives. That is, we wanted to randomly assign people to different conditions in which they would end up thinking in different ways, so that we could then examine the impact of these different conditions on their intuitions about moral relativism.

Participants in one condition got more or less the same sort of question used in earlier studies. They were asked to imagine that someone in the United States commits an act of infanticide. Then they were told to suppose that one person from their own college thought that this act was morally bad, while another thought that it was morally permissible. The question then was whether they would agree or disagree with the following statement:

Since your classmate and Sam have different judgments about this case, at least one of them must be wrong.

Participants in the other conditions received questions aimed at moving their thinking in a different direction. Those who had been assigned to the “other culture” condition were told to imagine an Amazonian tribe, the Mamilons, which had a very different way of life from our own. They were given a brief description of this tribe’s rituals, values and modes of thought. Then they were told to imagine that one of their classmates thought that the act of infanticide was morally bad, while someone from this Amazonian tribe thought that the act was morally permissible. These participants were then asked whether they agreed or disagreed with the corresponding statement:

Since your classmate and the Mamilon have different judgments about this case, at least one of them must be wrong.

Finally, participants in the “extraterrestrial” condition were told about a culture that was just about as different from our own as can possibly be conceived. They were asked to imagine a race of extraterrestrial beings, the Pentars, who have no interest in friendship, love or happiness. Instead, the Pentars’ only goal is to maximise the total number of equilateral pentagons in the universe, and they move through space doing everything in their power to achieve this goal. (If a Pentar becomes too old to work, she is immediately killed and transformed into a pentagon herself.) As you might guess, these participants were then told to imagine a Pentar who thinks that the act of infanticide is morally permissible. Then came the usual statement:

Since your classmate and the Pentar have different judgments about this case, at least one of them must be wrong.

The results of the study showed a systematic difference between conditions. In particular, as we moved toward more distant cultures, we found a steady shift toward more relativist answers – with people in the first condition tending to agree with the statement that at least one of them had to be wrong, people in the second being pretty evenly split between the two answers, and people in the third tending to reject the statement quite decisively.

Note that all participants in the study are considering judgments about the very same act. There is just a single person, living in the United States, who is performing an act of infanticide, and participants are being asked to consider different judgments one might make about that very same act. Yet, when participants are asked to consider individuals who come at the issue from wildly different perspectives, they end up concluding that these individuals could have opposite opinions without either of them being in any way wrong. This result seems strongly to suggest that people can be drawn under certain circumstances to a form of moral relativism.

But now we face a new question. If we learn that people’s ordinary practice is not an objectivist one – that it actually varies depending on the degree to which people take other perspectives into account – how can we then use this information to address the deeper philosophical issues about the true nature of morality?

The answer here is in one way very complex and in another very simple. It is complex in that one can answer such questions only by making use of very sophisticated and subtle philosophical methods. Yet, at the same time, it is simple in that such methods have already been developed and are being continually refined and elaborated within the literature in analytic philosophy. The trick now is just to take these methods and apply them to working out the implications of an ordinary practice that actually exists.

Share This





Joshua Knobe is an associate professor at Yale University, affiliated both with the Program in Cognitive Science and the Department of Philosophy.</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="5"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">Getting the DID number from a CallCentric SIP trunk for FreePBX

I’ve got a few DDI numbers from CallCentric all around the world (UK, US, Australia) and couldn’t figure our how to setup an ‘Inbound Route’ in FreePBX that used the number that had been dialled to route the call.

It turns out that you need to extract the number from the ‘SIP header’ information and there’s no setting in FreePBX to do this so it means hacking at the Asterisk config files just a little.

There are a few methods for doing this but these instructions should work for FreePBX/Asterisk –

When setting up your ‘SIP trunk’ in FreePBX under ‘PEER DETAILS’ you want to put the line –

“context=custom-get-did-from-sip”

then you need to edit the file /etc/asterisk/extensions_custom.conf and add the following lines –</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="6"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">Introduction
============

Blood-borne pathogens first encounter the adaptive immune system in the marginal zone region of the spleen where the convergence of innate and adaptive immune mechanisms insures an early and effective response to pathogen antigens ([@bib1], [@bib2]). Both thymic-independent and -dependent responses are elicited in response to infection ([@bib1], [@bib3]). The thymic-independent response involves the targeting and activation of marginal zone B cells (MZBs)[\*](#fn1){ref-type="fn"}through their interaction with the repetitive antigenic determinants of pathogens with complement and B cell antigen receptors ([@bib4], [@bib5]). In contrast, the thymic-dependent Ab response is driven by the interaction and reciprocal stimulation of APCs, T lymphocytes, and B cells. The organization of the splenic white pulp nodule into discrete zones enriched for either B cells, T cells, or APCs provide a spatial microenvironment that facilitates an efficient interaction of pathogens with the various cellular populations required for insuring an efficient immune response ([@bib6]--[@bib8]). Antigen presentation and stimulation of T and B cells ultimately results in the formation of germinal centers, high affinity neutralizing Abs, and memory cells. Recent reports have begun to define the cellular components and molecular signals that are necessary to establish the marginal zone. B cell intrinsic pathways have been described involving specific chemokines and their receptors, molecules involved in B cell activation, as well as adhesion molecules and their ligands ([@bib9], [@bib10]). Apart from the MZB, the other predominant cell of the marginal zone is the marginal zone macrophage (MZMO), which is distinct from the metallophilic macrophage, defined by the marker MOMA-1, located at the border of the marginal and follicular zone ([@bib11]). The MZMO is defined by its location, interspersed in several layers within the marginal zone, and by its expression of the markers MARCO and ER-TR9 ([@bib12], [@bib13]). The former molecule is a scavenger receptor belonging structurally to the class A receptor family whereas the latter is identical to the C-type lectin SIGN-RI ([@bib14]--[@bib17]). MARCO has been shown to bind a range of microbial Ags including *Staphylococcus aureus* and *Escherichia coli* whereas SIGN-RI is the predominant receptor for uptake of polysaccharide dextran by MZMOs. Even though both MZBs and MZMOs are implicated in both thymus-dependent and -independent immune responses, the exact roles of the two cell types in initiation of the response to blood-borne pathogens is not known. We now define a unique role for the MZMO in regulation of MZB retention and activation and show that movement of this subset of macrophages to the red pulp of the spleen involves signaling via SH2-containing inositol-5-phosphatase 1 (SHIP) and Bruton\'s tyrosine kinase (Btk). In addition, we show a direct interaction between MZMOs and MZBs via the MARCO receptor on MZMOs and a ligand on MZBs.

Materials and Methods
=====================

Mice.
-----

C57BL/6 mice obtained from The Jackson Laboratory were used as WT mice and controls unless otherwise stated. Founders of SHIP-deficient mice were provided by G. Krystal (Terry Fox Laboratory, BC Cancer Agency, Vancouver, Canada; reference [@bib18]) and Btk-deficient mice were purchased from The Jackson Laboratory. Op/op mice were provided by J. Pollard (Albert Einstein College of Medicine, New York, NY) and LysMCre transgenic mice ([@bib19]) were provided by I. Forster (Technical University of Munich, Germany). Abs and bacteria was injected i.v. in the tail vein and all experiments involving mice were performed in accordance with National Institutes of Health (NIH) guidelines. All mice were maintained under specific pathogen-free conditions at The Rockefeller University.

Antibodies and Reagents.
------------------------

For histological examination 6-μM frozen sections were stained, and for FACS^®^ analysis erythrocyte-depleted spleen cells were used. Macrophages were detected using MOMA-1, MARCO Abs from Serotec, and ER-TR9 from Accurate Chemical &amp; Scientific Corp. Abs to CD1d, B220, CD19, CD21/CD35 (CRI/II), CD23, MAC-1, anti--rat alkaline phosphatase, and anti--rabbit horseradish peroxidase were from BD Biosciences. Secondary Abs for immunohistochemistry, anti-biotin, anti-FITC F(ab′) horseradish peroxidase, or alkaline phosphatase were from DakoCytomation and rabbit anti--SHIP used for Western blot was from Upstate Biotechnology. Vector Blue Alkaline Phosphatase Substrate from Vector Laboratories and DAB peroxidase substrate from Sigma-Aldrich were used for development of immunohistochemistry stains. Soluble MARCO receptor was provided by T. Pikkarainen (The Karolinska Institute, Stockholm, Sweden; reference [@bib20]) and was biotinylated using the EZ-Link™ kit from Pierce Chemical Co. The biotinylated soluble MARCO was detected using Streptavidin-CyChrome™ from BD Biosciences. *S. aureus* fluorescent bioparticles were purchased from Molecular Probes, Inc. and MACS anti-FITC and anti-biotin beads were from Miltenyi Biotec. Cl~2~MDP (or clodronate) and PBS liposomes were provided by Roche Diagnostics.

Conditional Targeting of SHIP.
------------------------------

Floxed SHIP mice were created by insertion of loxP sites flanking the 10th and 11th exons (see [Fig. 2](#fig2){ref-type="fig"} a) of the SHIP gene. The targeting vector was introduced into embryonic stem (ES) cells by electroporation and clones were selected with neomycin and ganciclovir and verified by Southern blot and PCR. Properly integrated ES clones were transiently transfected with a Cre-expressing plasmid. Clones were subsequently selected for a conditional floxed allele (SHIP^flox^) or null allele (SHIP^null^) using Southern blot and PCR. Appropriate ES clones were then injected into blastocysts to generate chimeric mice. The chimeric mice were then bred with C57BL/6 mice to achieve germline transmission. These mice were subsequently crossed with mice expressing Cre in the myeloid compartment (LysMcre; reference [@bib19]) to generate Cre^+^/null/flox mice. Mice were screened for respective genotype by PCR and SHIP protein expression using Western blot ([@bib21]) on equal numbers of spleen cells purified by MACS (Miltenyi Biotec) sorting according to protocol from the manufacturer. Relative expression of SHIP in macrophage and B cell populations (comparing wt/null with flox/null/cre) were estimated using Alpha imager software from Alpha Innotech Corp.

Results and Discussion
======================

Mice deficient in the inhibitory signaling molecule SHIP display pleiotropic defects in macrophages, NK cells, and lymphocytes ([@bib18], [@bib22]). A prominent feature of these mice is their splenomegaly resulting from dysregulation of myeloid proliferation. As seen in [Fig. 1](#fig1){ref-type="fig"} Figure 1.SHIP-deficient mice lack MZBs and MZMOs are displaced to the red pulp. (a) FACS^®^ profiles of single cell suspensions from the spleen of SHIP-heterozygous (SHIP^+/−^) and -deficient (SHIP^−/−^) mice. MZBs were measured as the CD19^+^, CRI^high^, and CD23^low^ population. The numbers shown represent percent of CD19^+^ cells for the depicted gates as an average of five mice. Numbers for the follicular B cells are shown for comparison. (b) Representative immunohistochemical analysis of above listed mice. At least four serial sections from each mouse were stained for MOMA-1^+^ (blue, top) metallophilic macrophages or MARCO^+^ MZMOs (blue, bottom). Sections were also stained for B220 (brown) to show the positioning of the follicle. ×10. , SHIP-deficient mice also display a specific defect in the organization of the splenic follicle with the loss of MZBs measured as the CD21^high^/CD23^low^ population in FACS^®^ and in sections as the B220^+^ cells localizing peripherally to the MOMA-1^+^ cells ([Fig. 1](#fig1){ref-type="fig"}, a and b). In the SHIP-deficient mice the MARCO^+^ MZMO cells are no longer organized within the marginal zone and adjacent to the MOMA-1 macrophages but are redistributed to the red pulp, whereas MOMA-1^+^ metallophils remain unaffected ([Fig. 1](#fig1){ref-type="fig"} b). Because SHIP is expressed in most hematopoietic cells, including lymphoid and myeloid subsets, we determined if this marginal zone phenotype in SHIP-deficient mice was the result of primary macrophage dysregulation. A conditional disruption of SHIP was generated in which macrophages displayed an approximate \>90% reduction in SHIP expression whereas B cell expression was reduced by \&lt;10% ([Fig. 2](#fig2){ref-type="fig"} Figure 2.Conditional targeting of SHIP in macrophages results in MZMO displacement and reduced numbers of MZBs. (a) A targeting construct covering exons 10 to 13 of SHIP, from EcoRI (E) to HindIII (H), was made. Boxes represent exons and triangles represent loxP sites flanking exons 10 to 11 and a neomycin resistance gene (neo). Properly integrated ES cell clones were transiently transfected with Cre recombinase to create conditional floxed (SHIP^flox^) or null (SHIP^null^) clones. These cells were subsequently used to create floxed (flox) and null mice, which were crossed to mice expressing Cre from a macrophage-specific lysosomal promoter (cre). (b) Western blot analysis of MAC1^+^ and CD19^+^ spleen cells (SPC) from WT, WT/null, null/null, LysM floxed (flox/null/cre), and relative spleen size of 6-wk-old WT/null and flox/null/cre SHIP mice. (c) FACS^®^ and histological profiles of single cell suspensions from the spleen of the conditionally targeted SHIP KO mice. MZBs were measured as the CD19^+^, CRI^high^, and CD23^low^ population. The numbers shown represent percent of CD19^+^ cells for the depicted gates as an average of five mice and the numbers for the follicular B cells are shown for comparison. For representative immunohistochemical analysis, at least four serial sections were stained for MOMA-1^+^ (blue, top) metallophilic macrophages or MARCO^+^ MZMOs (blue, bottom). Sections were also stained for B220 (brown) to show the positioning of the follicle. Refer to [Fig. 1](#fig1){ref-type="fig"} for SHIP^+/−^ and SHIP^−/−^ profiles. ×10. , a and b). This is consistent with the expression patterns of Cre recombinase, driven by the lysosyme promoter used ([@bib19]). The mice developed a splenomegaly at ∼5 wk of age ([Fig. 2](#fig2){ref-type="fig"} b), similar to that of complete SHIP deletion, thus implicating a primary macrophage defect as the cause for splenomegaly in SHIP^−/−^ mice ([@bib18]). In addition, the mice displayed essentially the same marginal zone phenotype with significantly reduced MZBs as defined by flow cytometry and reorganization of the MZMOs as observed by histological staining ([Fig. 2](#fig2){ref-type="fig"} c). To confirm that the SHIP phenotype is B cell nonautonomous and that SHIP-deficient B cells can give rise to MZB populations when WT MZMOs are available, we produced BM chimeras using SHIP-deficient BM combined with WT BM and injected these cells into irradiated WT recipients. In the resulting chimeric mice the SHIP-deficient and WT BMs contributed equally to the MZB population (unpublished data).

In B cell lines it has been shown that SHIP functions as a negative regulator of cellular activation by regulating the association of the positive signaling kinase Btk with the membrane, thus raising the threshold required for stimulation ([@bib23]). It does so by hydrolyzing PIP~3~, the substrate for Btk association with the membrane, thereby reducing the ability of Btk to become membrane associated and activated ([@bib24]). Because both SHIP and Btk are expressed in macrophages and a link between these molecules had been suggested, we reasoned that the myeloid proliferation and MZMO phenotype leading to the loss of MZBs might be the result of inappropriate activation of Btk in macrophages of SHIP-deficient animals ([@bib25], [@bib26]). Disruption of Btk in macrophages may thus be sufficient to restore normal signaling thresholds in SHIP-deficient mice. Combining the SHIP deficiency with a Btk deficiency resulted in the restoration of both the normal marginal zone structure ([Fig. 3](#fig3){ref-type="fig"} Figure 3.SHIP and Btk interact in myeloid proliferation and activation. (a) FACS^®^ and histological profiles of single cell suspensions from the spleen of SHIP and Btk double KO mice (SHIP^−/−^/Btk^−^). MZBs were measured as the CD19^+^, CRI^high^, and CD23^low^ population. The numbers shown represent percent of CD19^+^ cells for the depicted gates as an average of four mice and the numbers for the follicular B cells are shown for comparison. For representative immunohistochemical analysis, at least four serial sections from were stained for MOMA-1^+^ (blue, top) metallophilic macrophages or MARCO^+^ MZMOs (blue, bottom). Sections were also stained for B220 (brown) to show the positioning of the follicle. ×10. (b) Relative spleen size of 5-wk-old heterozygous KO or double KO mice. a) and spleen size ([Fig. 3](#fig3){ref-type="fig"} b) indicating that Btk is an important target of SHIP in myeloid cells in vivo. Similarly, Btk deficiency counteracted the over responsiveness of myeloid progenitors to GM-CSF and M-CSF in SHIP-deficient mice (unpublished data). Both the dysregulation of myeloid proliferation and follicular architecture likely result from enhanced signaling through the Btk pathway in myeloid cells. Reversion of the MZB and myeloid phenotypes in SHIP^−/−^ mice by deletion of Btk suggests that Btk is the dominant Tec family member regulated by SHIP in these cells. The observation that other members of the family are expressed in macrophages and have been shown to be able to substitute for Btk both in vivo and in KO mice indicates a surprising degree of specificity to the SHIP inhibitory pathway ([@bib27]--[@bib29]).

These results suggested that MZMOs might be critical to the organization of the white pulp nodule and localization of MZBs in this structure. To test this directly we exploited the observation that MZMOs can be ablated by their preferential ingestion of macrophage-depleting liposomes ([@bib30]). At a low concentration of these liposomes we could see preferential depletion of MARCO^+^ MZMOs as opposed to the adjacent MOMA-1 macrophages ([Fig. 4](#fig4){ref-type="fig"}) Figure 4.MARCO^+^ MZMOs are required for retention of MZBs. Representative immunohistochemical analysis and FACS^®^ profiles of spleens from at least four WT mice treated with liposomes or untreated op/op mice. WT mice were injected i.v. with 100 μl PBS containing liposomes or with liposomes containing clodronate at a 1:24 dilution where MZMOs were preferentially depleted. 48 h later serial spleen sections were stained for MOMA-1^+^ (blue, top) metallophilic macrophages or MARCO^+^ (blue, middle) MZMOs. The sections were also stained for B220 (brown) to see the positioning of these populations in relation to the B cell follicle. ×10. Spleen cells were analyzed by FACS^®^ analysis for detection of MZBs as measured by the CD19^+^, CRI^high^, and CD23^low^ population. Numbers shown are the average percent-positive cells of four mice. Similar profiles are shown for untreated *op/op* mice (right). Data shown are representative of three independent experiments. . Other phagocytic cells in the spleen, such as red pulp macrophages and dendritic cells were largely unaffected by this treatment (not depicted). When MZMOs were depleted in this fashion, we observe a specific reduction in the MZBs by both flow cytometry and histological staining. In contrast, MOMA-1 macrophages are specifically absent in the CSF-1--deficient strain *op/op* but these mice retain MARCO^+^/ER-TR9^−^ MZMOs ([@bib31], [@bib32]). The absence of the MOMA-1^+^ cells and the ER-TR9 marker did not result in reduction in MZBs, but rather, an expansion of these cells is observed, indicating that the macrophage population that is required for MZB retention are the MARCO^+^ MZMOs.

The identity of the retention signal expressed by MARCO^+^ MZMO cells was next determined by investigating the role of specific surface receptors on the MZMO in maintaining the marginal zone structure. The MARCO receptor, in addition to binding to bacteria ([@bib33]), contains an SRCR domain that has been implicated in binding to CD19^+^ lymphocytes ([@bib34], [@bib35]). To determine if MARCO itself is capable of binding to MZBs, we expressed the extracellular domains of MARCO as a soluble molecule ([@bib20]) and used it to stain splenic populations ([Fig. 5](#fig5){ref-type="fig"}) Figure 5.Soluble MARCO receptor (sMARCO) binds preferentially to MZBs. Representative FACS^®^ analysis of spleen cells from WT mice stained with CRI, CD23, and biotinylated sMARCO. Binding of sMARCO to different spleen cell populations was based on gates set on the CRI versus CD23 stain. red, MZBs; blue, follicular B cells; black, non-B cells. The histogram (bottom) shows the mean fluorescence index (MFI) and SD (*n* = 5) for the different populations as well as the avidin (Av) control and block using the MARCO-specific ED31 Ab. Data shown are representative of three independent experiments. . Three populations of cells were distinguished by flow cytometry when stained with CD21 and CD23. Maximal binding to soluble MARCO was observed for the MZBs (CD21^hi^ CD23^low^), whereas the follicular B cells (CD21^low^ CD23^hi^) displayed reduced binding. None of the other splenic populations (T cells, macrophages, or dendritic cells) were capable of binding to soluble MARCO. This binding was specific for the MARCO SRCR domain, as determined by the ability of a monoclonal Ab to this domain (ED31; reference [@bib33]) to block the binding of soluble MARCO to MZBs. When the MARCO-specific Ab was injected i.v. to WT mice it resulted in disruption of the marginal zone structure in which MZBs, identified by CD1d staining, were found in the follicular region whereas MZMOs, identified by ER-TR9 staining, were retained in the marginal zone ([Fig. 6](#fig6){ref-type="fig"}) Figure 6.In vivo disruption of MARCO and MZB interactions leads to MZB migration to the follicle. WT mice were given 100 μg control rat IgG or anti-MARCO (ED31) IgG i.v. 3 h later the mice were killed and the spleens were stained for macrophage and B cell populations. Representative stains of serial sections from at least four different mice are shown. MZMOs were detected with anti-MARCO (blue, top) or ER-TR9 (blue, middle) antibodies whereas metallophilic macrophages were stained with MOMA-1 (brown, bottom). B220^+^ B cells (brown) were stained for positioning of the follicle and MZBs as the CD1^high^ (blue, bottom) population. ×10. Part of the spleen was used for flow cytometric analysis to determine the CD19^+^, CRI^high^, and CD23^low^ populations. Numbers shown are the average of four mice. The percent of CD19^+^ cells for either MZBs or follicular B cells is shown for comparison. Data shown are representative of two independent experiments. . These results suggest that a direct interaction between MZMO and MZBs is mediated by MARCO--MZB binding, through a MARCO ligand expressed on these B cells, and provides a mechanism for the retention of MZBs by MARCO-expressing MZMO cells. Perturbation of this interaction either by disruption of adhesion and/or induction of macrophage activation by MARCO cross-linking results in the appearance of cells expressing a MZB surface phenotype in the follicular zone.

To address the relevance of the MARCO^+^ MZMO and its retention of MZBs to its contribution to the development of an immune response to pathogens, we injected mice i.v. with rhodamine-conjugated *S. aureus*, which is a known ligand for the MARCO receptor ([@bib12]). Within 30 min of injection bacteria were visualized exclusively bound to the MZMO cells, a role consistent with the phagocytic property of these scavenger receptor--expressing cells ([Fig. 7](#fig7){ref-type="fig"}) Figure 7.*S. aureus* induce MZMO movement and displacement of MZBs. WT mice were injected i.v. with 250 μg heat-killed and rhodamine-conjugated *S. aureus* in PBS. 0.5 or 18 h later the mice were killed and the spleens were sectioned and stained. Representative stains from at least four mice are shown. MARCO^+^ MZMOs (left) are stained blue and B220^+^ B cells are stained brown. The middle shows the same stains as in the left, merged with the fluorescent stain of *S. aureus.* The right shows stains for the CD1^high^ MZB population (blue) and MOMA-1^+^ metallophilic macrophages (brown). ×10. The data shown are representative of two independent experiments. . 18 h after injection the microbes and the MZMO were found to have comigrated into the red pulp and cells with a MZB phenotype (CD1d^high^) were mostly found in the follicular region. These results are consistent with a model in which interaction of *S. aureus* with MARCO on MZMOs results in their migration into the red pulp and the concomitant migration of MZBs into the follicular region as has been reported for LPS and *E. coli* ([@bib8], [@bib9]). The deletion of the inhibitory signaling molecule SHIP results in a similar MZMO migration response, suggesting that MZMO activation can trigger migration into the red pulp. We presume that the likely explanation for the migration seen in response to *S. aureus* ingestion is the activation of MZMOs by their encounter with these bacteria as has been described ([@bib36], [@bib37]). A similar result was observed for *E. coli* suggesting a more general migratory response by MZMO cells to microbial challenge (unpublished data). The migratory response of the MZMO, carrying Ag to the red pulp, could simply be a method of clearance of particulate Ags or alternatively MZMOs could function as Ag transporters/presenters and supporters of plasmablast formation shown to take place in the red pulp ([Fig. 8](#fig8){ref-type="fig"} Figure 8.Proposed model for interactions between MZMO and MZB and the response of these cells to blood-borne pathogens. In the marginal zone (MZ), MZBs interact with the MZMO via the MARCO receptor (a) and with stromal elements via the ICAM/VCAM and their respective ligands LFA-1 and α4β1 (b). Upon phagocytosis of particulate Ags, the MARCO^+^ MZMOs migrate to the red pulp (c) and the majority of the MZBs migrate to the follicle where they interact with cells such as dendritic and follicular dendritic (d, DC and FDC). In the early response to T cell--independent Ags, the MZB also has the capacity to migrate to the red pulp to take part in plasma cell formation (e), where a possible interaction with MZMOs and MZBs may take place. ; references [@bib38]--[@bib40]). This has previously been reported to be a function of dendritic cells in the T/B cell border of the follicle and by macrophages supporting B1 B cells in the peritoneum ([@bib10]). Interestingly, Kang et al. ([@bib14]) recently showed that phagosomes in MZMOs, after uptake of dextran polysaccarides via SIGN-RI did not stain positive for the endosomal markers LAMP-1 and transferrin. This suggests that Ags taken up by MZMOs may not necessarily take the route of normal phagosome maturation ([@bib41]) resulting in destruction or Ag presentation and thus could provide a mechanism to transport intact Ag to the red pulp by MZMOs.

These results suggest that the interaction of MZMO cells with MZBs is required to maintain the marginal zone structure and that this association is perturbed upon MZMO binding and activation by microbial pathogens. It is likely that the MZBs migrate into the follicular zone in response to CXCL13 ([@bib9]) in the absence of retention signals from the MARCO^+^ MZMO. This pathway is likely to be independent of the integrin pathway involving stromal VCAM/ICAM and B cell LFA-1/α4β1 because disruption of that pathway with antibodies to LFA-1 and α4β1 results in the release of MZBs to the blood stream ([@bib9]), not their migration into the follicle, in contrast to the results presented here ([Fig. 8](#fig8){ref-type="fig"}). In addition, we see no effect on the localization of MZMO cells using antibodies to the stromal integrins, nor do we observe effects on their ligand expression when MZMO cells are triggered to migrate (unpublished data). These pathways are thus likely to serve different functions in the organization of the marginal zone, with the MZMO pathway specific for the antimicrobial response, leading to internalization of the organism and trafficking of B cells into the follicular zone to propagate the immune responses. MZBs have the capacity to bind polysaccharide Ags through complement-mediated pathways and transport these to the follicular area of the spleen ([@bib6], [@bib8], [@bib42]). The events we have described appear to be another mechanism for delivery of MZBs and Ag to the T cell--rich follicular region. MZBs have mostly been implicated in the response to T cell--independent Ags, however, they are also capable of presenting Ags ([@bib43]) and may thus be important both for the T cell--dependent and --independent phase of the earliest defense against a pathogen.

We would like to thank members of the Ravetch and Steinman labs at The Rockefeller University, especially Pierre Bruhns, Patrick Smith, Maggi Pack, Chae Gyu Park, and Sayori Yamazaki for technical assistance and comments on the manuscript. We also thank Dr. Jeffrey Pollard for op/op mice and Dr. Timo Pikkarainen for reagents and helpful comments.

This work was supported by the Swedish Cancer Society and the NIH.

*Abbreviations used in this paper:* Btk, Bruton\'s tyrosine kinase; ES, embryonic stem; MZB, marginal zone B cell; MZMO, marginal zone macrophage; SHIP, SH2-containing inositol-5-phosphatase 1.
</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="7"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">Q:

How can I Check the current value which is already passed or not in an array in nested foreach in php

My array 
$key1=>
Array
(
    [0] => 1
    [1] => 2
    [2] => 7
    [3] => 11
    [4] => 12
    [5] => 17
    [6] => 18
)

$_POST['name']=>
Array
(
    [0] => General
    [1] => General
    [2] => Outdoors
    [3] => Dining
    [4] => Kitchen

)

Here is my code,
       foreach ($key1 as $key => $value) {
        // echo $value;
              foreach ($_POST['name'] as $key => $value1) {
                    //echo $value;
                    $subQueryCond .=' AND '.$value1.' LIKE  ' .$value ;
                         }
        }

While my Ajax calls this nested loop occurs..
Inside this I wrote a query..
If one value is passed.
The query is in the format of  AND 'General' LIKE 1.  
And if another value is passed in the $key1 it pass the query two times. 
It's like How many arrays are given that much time that query was passed..
So,here I would like to restrict the $value if it already came..
if two values were given,it pass the query in the following manner
AND General LIKE  1 

AND Outdoors LIKE  1 

AND General LIKE  7 

AND Outdoors LIKE  7

And my desired query must be in the form of
AND General LIKE  1 

AND General LIKE  7 

AND Outdoors LIKE  7

can someone help me..

A:

This will work for you... 
&lt;?php 

$subQueryCond= '';
foreach ($key1 as $key => $value)
{
  foreach ($_POST['name'] as $key => $value1) 
  {
     $subQueryCond['AND '.$value1.' LIKE  ' .$value] = ' AND '.$value1.' LIKE  ' .$value ;
  }
}
echo "&lt;pre>"; print_r($subQueryCond);
$query =  implode('',$subQueryCond) ;
print_r($query);

?>

just make an array with unique keys to value, then use implode() function to make query string...

</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="8"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">Safety of union home care aides in Washington State.
A rate-based understanding of home care aides' adverse occupational outcomes related to their work location and care tasks is lacking. Within a 30-month, dynamic cohort of 43 394 home care aides in Washington State, injury rates were calculated by aides' demographic and work characteristics. Injury narratives and focus groups provided contextual detail. Injury rates were higher for home care aides categorized as female, white, 50 to &lt;65 years old, less experienced, with a primary language of English, and working through an agency (versus individual providers). In addition to direct occupational hazards, variability in workload, income, and supervisory/social support is of concern. Policies should address the roles and training of home care aides, consumers, and managers/supervisors. Home care aides' improved access to often-existing resources to identify, manage, and eliminate occupational hazards is called for to prevent injuries and address concerns related to the vulnerability of this needed workforce.</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="9"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">{-# LANGUAGE FlexibleContexts #-}
{-# LANGUAGE OverloadedStrings #-}
{-# LANGUAGE Safe #-}
{-# LANGUAGE Strict #-}
{-# LANGUAGE TupleSections #-}
{-# LANGUAGE TypeFamilies #-}

-- |
--
-- This module implements a transformation from source to core
-- Futhark.
module Futhark.Internalise (internaliseProg) where

import Control.Monad.Reader
import Data.Bitraversable
import Data.List (find, intercalate, intersperse, nub, transpose)
import qualified Data.List.NonEmpty as NE
import qualified Data.Map.Strict as M
import qualified Data.Set as S
import Futhark.IR.SOACS as I hiding (stmPattern)
import Futhark.Internalise.AccurateSizes
import Futhark.Internalise.Bindings
import Futhark.Internalise.Defunctionalise as Defunctionalise
import Futhark.Internalise.Defunctorise as Defunctorise
import Futhark.Internalise.Lambdas
import Futhark.Internalise.Monad as I
import Futhark.Internalise.Monomorphise as Monomorphise
import Futhark.Internalise.TypesValues
import Futhark.Transform.Rename as I
import Futhark.Util (splitAt3)
import Language.Futhark as E hiding (TypeArg)
import Language.Futhark.Semantic (Imports)

-- | Convert a program in source Futhark to a program in the Futhark
-- core language.
internaliseProg ::
  MonadFreshNames m =>
  Bool ->
  Imports ->
  m (I.Prog SOACS)
internaliseProg always_safe prog = do
  prog_decs &lt;- Defunctorise.transformProg prog
  prog_decs' &lt;- Monomorphise.transformProg prog_decs
  prog_decs'' &lt;- Defunctionalise.transformProg prog_decs'
  (consts, funs) &lt;-
    runInternaliseM always_safe (internaliseValBinds prog_decs'')
  I.renameProg $ I.Prog consts funs

internaliseAttr :: E.AttrInfo -> Attr
internaliseAttr (E.AttrAtom v) = I.AttrAtom v
internaliseAttr (E.AttrComp f attrs) = I.AttrComp f $ map internaliseAttr attrs

internaliseAttrs :: [E.AttrInfo] -> Attrs
internaliseAttrs = mconcat . map (oneAttr . internaliseAttr)

internaliseValBinds :: [E.ValBind] -> InternaliseM ()
internaliseValBinds = mapM_ internaliseValBind

internaliseFunName :: VName -> [E.Pattern] -> InternaliseM Name
internaliseFunName ofname [] = return $ nameFromString $ pretty ofname ++ "f"
internaliseFunName ofname _ = do
  info &lt;- lookupFunction' ofname
  -- In some rare cases involving local functions, the same function
  -- name may be re-used in multiple places.  We check whether the
  -- function name has already been used, and generate a new one if
  -- so.
  case info of
    Just _ -> nameFromString . pretty &lt;$> newNameFromString (baseString ofname)
    Nothing -> return $ nameFromString $ pretty ofname

internaliseValBind :: E.ValBind -> InternaliseM ()
internaliseValBind fb@(E.ValBind entry fname retdecl (Info (rettype, _)) tparams params body _ attrs loc) = do
  localConstsScope $
    bindingParams tparams params $ \shapeparams params' -> do
      let shapenames = map I.paramName shapeparams
          normal_params = shapenames ++ map I.paramName (concat params')
          normal_param_names = namesFromList normal_params

      fname' &lt;- internaliseFunName fname params

      msg &lt;- case retdecl of
        Just dt ->
          errorMsg
            . ("Function return value does not match shape of type " :)
            &lt;$> typeExpForError dt
        Nothing -> return $ errorMsg ["Function return value does not match shape of declared return type."]

      ((rettype', body_res), body_stms) &lt;- collectStms $ do
        body_res &lt;- internaliseExp "res" body
        rettype_bad &lt;- internaliseReturnType rettype
        let rettype' = zeroExts rettype_bad
        return (rettype', body_res)
      body' &lt;-
        ensureResultExtShape msg loc (map I.fromDecl rettype') $
          mkBody body_stms body_res

      constants &lt;- allConsts
      let free_in_fun =
            freeIn body'
              `namesSubtract` normal_param_names
              `namesSubtract` constants

      used_free_params &lt;- forM (namesToList free_in_fun) $ \v -> do
        v_t &lt;- lookupType v
        return $ Param v $ toDecl v_t Nonunique

      let free_shape_params =
            map (`Param` I.Prim int32) $
              concatMap (I.shapeVars . I.arrayShape . I.paramType) used_free_params
          free_params = nub $ free_shape_params ++ used_free_params
          all_params = free_params ++ shapeparams ++ concat params'

      let fd =
            I.FunDef
              Nothing
              (internaliseAttrs attrs)
              fname'
              rettype'
              all_params
              body'

      if null params'
        then bindConstant fname fd
        else
          bindFunction
            fname
            fd
            ( fname',
              map I.paramName free_params,
              shapenames,
              map declTypeOf $ concat params',
              all_params,
              applyRetType rettype' all_params
            )

  case entry of
    Just (Info entry') -> generateEntryPoint entry' fb
    Nothing -> return ()
  where
    zeroExts ts = generaliseExtTypes ts ts

allDimsFreshInType :: MonadFreshNames m => E.PatternType -> m E.PatternType
allDimsFreshInType = bitraverse onDim pure
  where
    onDim (E.NamedDim v) =
      E.NamedDim . E.qualName &lt;$> newVName (baseString $ E.qualLeaf v)
    onDim _ =
      E.NamedDim . E.qualName &lt;$> newVName "size"

-- | Replace all named dimensions with a fresh name, and remove all
-- constant dimensions.  The point is to remove the constraints, but
-- keep the names around.  We use this for constructing the entry
-- point parameters.
allDimsFreshInPat :: MonadFreshNames m => E.Pattern -> m E.Pattern
allDimsFreshInPat (PatternAscription p _ _) =
  allDimsFreshInPat p
allDimsFreshInPat (PatternParens p _) =
  allDimsFreshInPat p
allDimsFreshInPat (Id v (Info t) loc) =
  Id v &lt;$> (Info &lt;$> allDimsFreshInType t) &lt;*> pure loc
allDimsFreshInPat (TuplePattern ps loc) =
  TuplePattern &lt;$> mapM allDimsFreshInPat ps &lt;*> pure loc
allDimsFreshInPat (RecordPattern ps loc) =
  RecordPattern &lt;$> mapM (traverse allDimsFreshInPat) ps &lt;*> pure loc
allDimsFreshInPat (Wildcard (Info t) loc) =
  Wildcard &lt;$> (Info &lt;$> allDimsFreshInType t) &lt;*> pure loc
allDimsFreshInPat (PatternLit e (Info t) loc) =
  PatternLit e &lt;$> (Info &lt;$> allDimsFreshInType t) &lt;*> pure loc
allDimsFreshInPat (PatternConstr c (Info t) pats loc) =
  PatternConstr c &lt;$> (Info &lt;$> allDimsFreshInType t)
    &lt;*> mapM allDimsFreshInPat pats
    &lt;*> pure loc

generateEntryPoint :: E.EntryPoint -> E.ValBind -> InternaliseM ()
generateEntryPoint (E.EntryPoint e_paramts e_rettype) vb = localConstsScope $ do
  let (E.ValBind _ ofname _ (Info (rettype, _)) _ params _ _ attrs loc) = vb
  -- We replace all shape annotations, so there should be no constant
  -- parameters here.
  params_fresh &lt;- mapM allDimsFreshInPat params
  let tparams =
        map (`E.TypeParamDim` mempty) $
          S.toList $
            mconcat $ map E.patternDimNames params_fresh
  bindingParams tparams params_fresh $ \shapeparams params' -> do
    entry_rettype &lt;- internaliseEntryReturnType $ anySizes rettype
    let entry' = entryPoint (zip e_paramts params') (e_rettype, entry_rettype)
        args = map (I.Var . I.paramName) $ concat params'

    entry_body &lt;- insertStmsM $ do
      -- Special case the (rare) situation where the entry point is
      -- not a function.
      maybe_const &lt;- lookupConst ofname
      vals &lt;- case maybe_const of
        Just ses ->
          return ses
        Nothing ->
          fst &lt;$> funcall "entry_result" (E.qualName ofname) args loc
      ctx &lt;-
        extractShapeContext (concat entry_rettype)
          &lt;$> mapM (fmap I.arrayDims . subExpType) vals
      resultBodyM (ctx ++ vals)

    addFunDef $
      I.FunDef
        (Just entry')
        (internaliseAttrs attrs)
        (baseName ofname)
        (concat entry_rettype)
        (shapeparams ++ concat params')
        entry_body

entryPoint ::
  [(E.EntryType, [I.FParam])] ->
  ( E.EntryType,
    [[I.TypeBase ExtShape Uniqueness]]
  ) ->
  I.EntryPoint
entryPoint params (eret, crets) =
  ( concatMap (entryPointType . preParam) params,
    case ( isTupleRecord $ entryType eret,
           entryAscribed eret
         ) of
      (Just ts, Just (E.TETuple e_ts _)) ->
        concatMap entryPointType $
          zip (zipWith E.EntryType ts (map Just e_ts)) crets
      (Just ts, Nothing) ->
        concatMap entryPointType $
          zip (map (`E.EntryType` Nothing) ts) crets
      _ ->
        entryPointType (eret, concat crets)
  )
  where
    preParam (e_t, ps) = (e_t, staticShapes $ map I.paramDeclType ps)

    entryPointType (t, ts)
      | E.Scalar (E.Prim E.Unsigned {}) &lt;- E.entryType t =
        [I.TypeUnsigned]
      | E.Array _ _ (E.Prim E.Unsigned {}) _ &lt;- E.entryType t =
        [I.TypeUnsigned]
      | E.Scalar E.Prim {} &lt;- E.entryType t =
        [I.TypeDirect]
      | E.Array _ _ E.Prim {} _ &lt;- E.entryType t =
        [I.TypeDirect]
      | otherwise =
        [I.TypeOpaque desc $ length ts]
      where
        desc = maybe (pretty t') typeExpOpaqueName $ E.entryAscribed t
        t' = noSizes (E.entryType t) `E.setUniqueness` Nonunique
    typeExpOpaqueName (TEApply te TypeArgExpDim {} _) =
      typeExpOpaqueName te
    typeExpOpaqueName (TEArray te _ _) =
      let (d, te') = withoutDims te
       in "arr_" ++ typeExpOpaqueName te'
            ++ "_"
            ++ show (1 + d)
            ++ "d"
    typeExpOpaqueName te = pretty te

    withoutDims (TEArray te _ _) =
      let (d, te') = withoutDims te
       in (d + 1, te')
    withoutDims te = (0 :: Int, te)

internaliseIdent :: E.Ident -> InternaliseM I.VName
internaliseIdent (E.Ident name (Info tp) loc) =
  case tp of
    E.Scalar E.Prim {} -> return name
    _ ->
      error $
        "Futhark.Internalise.internaliseIdent: asked to internalise non-prim-typed ident '"
          ++ pretty name
          ++ " of type "
          ++ pretty tp
          ++ " at "
          ++ locStr loc
          ++ "."

internaliseBody :: E.Exp -> InternaliseM Body
internaliseBody e = insertStmsM $ resultBody &lt;$> internaliseExp "res" e

bodyFromStms ::
  InternaliseM (Result, a) ->
  InternaliseM (Body, a)
bodyFromStms m = do
  ((res, a), stms) &lt;- collectStms m
  (,a) &lt;$> mkBodyM stms res

internaliseExp :: String -> E.Exp -> InternaliseM [I.SubExp]
internaliseExp desc (E.Parens e _) =
  internaliseExp desc e
internaliseExp desc (E.QualParens _ e _) =
  internaliseExp desc e
internaliseExp desc (E.StringLit vs _) =
  fmap pure $
    letSubExp desc $
      I.BasicOp $ I.ArrayLit (map constant vs) $ I.Prim int8
internaliseExp _ (E.Var (E.QualName _ name) (Info t) loc) = do
  subst &lt;- lookupSubst name
  case subst of
    Just substs -> return substs
    Nothing -> do
      -- If this identifier is the name of a constant, we have to turn it
      -- into a call to the corresponding function.
      is_const &lt;- lookupConst name
      case is_const of
        Just ses -> return ses
        Nothing -> (: []) . I.Var &lt;$> internaliseIdent (E.Ident name (Info t) loc)
internaliseExp desc (E.Index e idxs (Info ret, Info retext) loc) = do
  vs &lt;- internaliseExpToVars "indexed" e
  dims &lt;- case vs of
    [] -> return [] -- Will this happen?
    v : _ -> I.arrayDims &lt;$> lookupType v
  (idxs', cs) &lt;- internaliseSlice loc dims idxs
  let index v = do
        v_t &lt;- lookupType v
        return $ I.BasicOp $ I.Index v $ fullSlice v_t idxs'
  ses &lt;- certifying cs $ letSubExps desc =&lt;&lt; mapM index vs
  bindExtSizes (E.toStruct ret) retext ses
  return ses

-- XXX: we map empty records and tuples to bools, because otherwise
-- arrays of unit will lose their sizes.
internaliseExp _ (E.TupLit [] _) =
  return [constant True]
internaliseExp _ (E.RecordLit [] _) =
  return [constant True]
internaliseExp desc (E.TupLit es _) = concat &lt;$> mapM (internaliseExp desc) es
internaliseExp desc (E.RecordLit orig_fields _) =
  concatMap snd . sortFields . M.unions &lt;$> mapM internaliseField orig_fields
  where
    internaliseField (E.RecordFieldExplicit name e _) =
      M.singleton name &lt;$> internaliseExp desc e
    internaliseField (E.RecordFieldImplicit name t loc) =
      internaliseField $
        E.RecordFieldExplicit
          (baseName name)
          (E.Var (E.qualName name) t loc)
          loc
internaliseExp desc (E.ArrayLit es (Info arr_t) loc)
  -- If this is a multidimensional array literal of primitives, we
  -- treat it specially by flattening it out followed by a reshape.
  -- This cuts down on the amount of statements that are produced, and
  -- thus allows us to efficiently handle huge array literals - a
  -- corner case, but an important one.
  | Just ((eshape, e') : es') &lt;- mapM isArrayLiteral es,
    not $ null eshape,
    all ((eshape ==) . fst) es',
    Just basetype &lt;- E.peelArray (length eshape) arr_t = do
    let flat_lit = E.ArrayLit (e' ++ concatMap snd es') (Info basetype) loc
        new_shape = length es : eshape
    flat_arrs &lt;- internaliseExpToVars "flat_literal" flat_lit
    forM flat_arrs $ \flat_arr -> do
      flat_arr_t &lt;- lookupType flat_arr
      let new_shape' =
            reshapeOuter
              (map (DimNew . intConst Int32 . toInteger) new_shape)
              1
              $ I.arrayShape flat_arr_t
      letSubExp desc $ I.BasicOp $ I.Reshape new_shape' flat_arr
  | otherwise = do
    es' &lt;- mapM (internaliseExp "arr_elem") es
    arr_t_ext &lt;- internaliseReturnType (E.toStruct arr_t)

    rowtypes &lt;-
      case mapM (fmap rowType . hasStaticShape . I.fromDecl) arr_t_ext of
        Just ts -> pure ts
        Nothing ->
          -- XXX: the monomorphiser may create single-element array
          -- literals with an unknown row type.  In those cases we
          -- need to look at the types of the actual elements.
          -- Fixing this in the monomorphiser is a lot more tricky
          -- than just working around it here.
          case es' of
            [] -> error $ "internaliseExp ArrayLit: existential type: " ++ pretty arr_t
            e' : _ -> mapM subExpType e'

    let arraylit ks rt = do
          ks' &lt;-
            mapM
              ( ensureShape
                  "shape of element differs from shape of first element"
                  loc
                  rt
                  "elem_reshaped"
              )
              ks
          return $ I.BasicOp $ I.ArrayLit ks' rt

    letSubExps desc
      =&lt;&lt; if null es'
        then mapM (arraylit []) rowtypes
        else zipWithM arraylit (transpose es') rowtypes
  where
    isArrayLiteral :: E.Exp -> Maybe ([Int], [E.Exp])
    isArrayLiteral (E.ArrayLit inner_es _ _) = do
      (eshape, e) : inner_es' &lt;- mapM isArrayLiteral inner_es
      guard $ all ((eshape ==) . fst) inner_es'
      return (length inner_es : eshape, e ++ concatMap snd inner_es')
    isArrayLiteral e =
      Just ([], [e])
internaliseExp desc (E.Range start maybe_second end (Info ret, Info retext) loc) = do
  start' &lt;- internaliseExp1 "range_start" start
  end' &lt;- internaliseExp1 "range_end" $ case end of
    DownToExclusive e -> e
    ToInclusive e -> e
    UpToExclusive e -> e
  maybe_second' &lt;-
    traverse (internaliseExp1 "range_second") maybe_second

  -- Construct an error message in case the range is invalid.
  let conv = case E.typeOf start of
        E.Scalar (E.Prim (E.Unsigned _)) -> asIntS Int32
        _ -> asIntS Int32
  start'_i32 &lt;- conv start'
  end'_i32 &lt;- conv end'
  maybe_second'_i32 &lt;- traverse conv maybe_second'
  let errmsg =
        errorMsg $
          ["Range "]
            ++ [ErrorInt32 start'_i32]
            ++ ( case maybe_second'_i32 of
                   Nothing -> []
                   Just second_i32 -> ["..", ErrorInt32 second_i32]
               )
            ++ ( case end of
                   DownToExclusive {} -> ["..>"]
                   ToInclusive {} -> ["..."]
                   UpToExclusive {} -> ["..&lt;"]
               )
            ++ [ErrorInt32 end'_i32, " is invalid."]

  (it, le_op, lt_op) &lt;-
    case E.typeOf start of
      E.Scalar (E.Prim (E.Signed it)) -> return (it, CmpSle it, CmpSlt it)
      E.Scalar (E.Prim (E.Unsigned it)) -> return (it, CmpUle it, CmpUlt it)
      start_t -> error $ "Start value in range has type " ++ pretty start_t

  let one = intConst it 1
      negone = intConst it (-1)
      default_step = case end of
        DownToExclusive {} -> negone
        ToInclusive {} -> one
        UpToExclusive {} -> one

  (step, step_zero) &lt;- case maybe_second' of
    Just second' -> do
      subtracted_step &lt;-
        letSubExp "subtracted_step" $
          I.BasicOp $ I.BinOp (I.Sub it I.OverflowWrap) second' start'
      step_zero &lt;- letSubExp "step_zero" $ I.BasicOp $ I.CmpOp (I.CmpEq $ IntType it) start' second'
      return (subtracted_step, step_zero)
    Nothing ->
      return (default_step, constant False)

  step_sign &lt;- letSubExp "s_sign" $ BasicOp $ I.UnOp (I.SSignum it) step
  step_sign_i32 &lt;- asIntS Int32 step_sign

  bounds_invalid_downwards &lt;-
    letSubExp "bounds_invalid_downwards" $
      I.BasicOp $ I.CmpOp le_op start' end'
  bounds_invalid_upwards &lt;-
    letSubExp "bounds_invalid_upwards" $
      I.BasicOp $ I.CmpOp lt_op end' start'

  (distance, step_wrong_dir, bounds_invalid) &lt;- case end of
    DownToExclusive {} -> do
      step_wrong_dir &lt;-
        letSubExp "step_wrong_dir" $
          I.BasicOp $ I.CmpOp (I.CmpEq $ IntType it) step_sign one
      distance &lt;-
        letSubExp "distance" $
          I.BasicOp $ I.BinOp (Sub it I.OverflowWrap) start' end'
      distance_i32 &lt;- asIntS Int32 distance
      return (distance_i32, step_wrong_dir, bounds_invalid_downwards)
    UpToExclusive {} -> do
      step_wrong_dir &lt;-
        letSubExp "step_wrong_dir" $
          I.BasicOp $ I.CmpOp (I.CmpEq $ IntType it) step_sign negone
      distance &lt;- letSubExp "distance" $ I.BasicOp $ I.BinOp (Sub it I.OverflowWrap) end' start'
      distance_i32 &lt;- asIntS Int32 distance
      return (distance_i32, step_wrong_dir, bounds_invalid_upwards)
    ToInclusive {} -> do
      downwards &lt;-
        letSubExp "downwards" $
          I.BasicOp $ I.CmpOp (I.CmpEq $ IntType it) step_sign negone
      distance_downwards_exclusive &lt;-
        letSubExp "distance_downwards_exclusive" $
          I.BasicOp $ I.BinOp (Sub it I.OverflowWrap) start' end'
      distance_upwards_exclusive &lt;-
        letSubExp "distance_upwards_exclusive" $
          I.BasicOp $ I.BinOp (Sub it I.OverflowWrap) end' start'

      bounds_invalid &lt;-
        letSubExp "bounds_invalid" $
          I.If
            downwards
            (resultBody [bounds_invalid_downwards])
            (resultBody [bounds_invalid_upwards])
            $ ifCommon [I.Prim I.Bool]
      distance_exclusive &lt;-
        letSubExp "distance_exclusive" $
          I.If
            downwards
            (resultBody [distance_downwards_exclusive])
            (resultBody [distance_upwards_exclusive])
            $ ifCommon [I.Prim $ IntType it]
      distance_exclusive_i32 &lt;- asIntS Int32 distance_exclusive
      distance &lt;-
        letSubExp "distance" $
          I.BasicOp $
            I.BinOp
              (Add Int32 I.OverflowWrap)
              distance_exclusive_i32
              (intConst Int32 1)
      return (distance, constant False, bounds_invalid)

  step_invalid &lt;-
    letSubExp "step_invalid" $
      I.BasicOp $ I.BinOp I.LogOr step_wrong_dir step_zero

  invalid &lt;-
    letSubExp "range_invalid" $
      I.BasicOp $ I.BinOp I.LogOr step_invalid bounds_invalid
  valid &lt;- letSubExp "valid" $ I.BasicOp $ I.UnOp I.Not invalid
  cs &lt;- assert "range_valid_c" valid errmsg loc

  step_i32 &lt;- asIntS Int32 step
  pos_step &lt;-
    letSubExp "pos_step" $
      I.BasicOp $ I.BinOp (Mul Int32 I.OverflowWrap) step_i32 step_sign_i32

  num_elems &lt;-
    certifying cs $
      letSubExp "num_elems" $
        I.BasicOp $ I.BinOp (SDivUp Int32 I.Unsafe) distance pos_step

  se &lt;- letSubExp desc (I.BasicOp $ I.Iota num_elems start' step it)
  bindExtSizes (E.toStruct ret) retext [se]
  return [se]
internaliseExp desc (E.Ascript e _ _) =
  internaliseExp desc e
internaliseExp desc (E.Coerce e (TypeDecl dt (Info et)) (Info ret, Info retext) loc) = do
  ses &lt;- internaliseExp desc e
  ts &lt;- internaliseReturnType et
  dt' &lt;- typeExpForError dt
  bindExtSizes (E.toStruct ret) retext ses
  forM (zip ses ts) $ \(e', t') -> do
    dims &lt;- arrayDims &lt;$> subExpType e'
    let parts =
          ["Value of (core language) shape ("]
            ++ intersperse ", " (map ErrorInt32 dims)
            ++ [") cannot match shape of type `"]
            ++ dt'
            ++ ["`."]
    ensureExtShape (errorMsg parts) loc (I.fromDecl t') desc e'
internaliseExp desc (E.Negate e _) = do
  e' &lt;- internaliseExp1 "negate_arg" e
  et &lt;- subExpType e'
  case et of
    I.Prim (I.IntType t) ->
      letTupExp' desc $ I.BasicOp $ I.BinOp (I.Sub t I.OverflowWrap) (I.intConst t 0) e'
    I.Prim (I.FloatType t) ->
      letTupExp' desc $ I.BasicOp $ I.BinOp (I.FSub t) (I.floatConst t 0) e'
    _ -> error "Futhark.Internalise.internaliseExp: non-numeric type in Negate"
internaliseExp desc e@E.Apply {} = do
  (qfname, args, ret, retext) &lt;- findFuncall e
  -- Argument evaluation is outermost-in so that any existential sizes
  -- created by function applications can be brought into scope.
  let fname = nameFromString $ pretty $ baseName $ qualLeaf qfname
      loc = srclocOf e
      arg_desc = nameToString fname ++ "_arg"

  -- Some functions are magical (overloaded) and we handle that here.
  ses &lt;-
    case () of
      -- Overloaded functions never take array arguments (except
      -- equality, but those cannot be existential), so we can safely
      -- ignore the existential dimensions.
      ()
        | Just internalise &lt;- isOverloadedFunction qfname (map fst args) loc ->
          internalise desc
        | Just (rettype, _) &lt;- M.lookup fname I.builtInFunctions -> do
          let tag ses = [(se, I.Observe) | se &lt;- ses]
          args' &lt;- reverse &lt;$> mapM (internaliseArg arg_desc) (reverse args)
          let args'' = concatMap tag args'
          letTupExp' desc $
            I.Apply
              fname
              args''
              [I.Prim rettype]
              (Safe, loc, [])
        | otherwise -> do
          args' &lt;- concat . reverse &lt;$> mapM (internaliseArg arg_desc) (reverse args)
          fst &lt;$> funcall desc qfname args' loc

  bindExtSizes ret retext ses
  return ses
internaliseExp desc (E.LetPat pat e body (Info ret, Info retext) _) = do
  ses &lt;- internalisePat desc pat e body (internaliseExp desc)
  bindExtSizes (E.toStruct ret) retext ses
  return ses
internaliseExp desc (E.LetFun ofname (tparams, params, retdecl, Info rettype, body) letbody _ loc) = do
  internaliseValBind $
    E.ValBind Nothing ofname retdecl (Info (rettype, [])) tparams params body Nothing mempty loc
  internaliseExp desc letbody
internaliseExp desc (E.DoLoop sparams mergepat mergeexp form loopbody (Info (ret, retext)) loc) = do
  ses &lt;- internaliseExp "loop_init" mergeexp
  ((loopbody', (form', shapepat, mergepat', mergeinit')), initstms) &lt;-
    collectStms $ handleForm ses form

  addStms initstms
  mergeinit_ts' &lt;- mapM subExpType mergeinit'

  ctxinit &lt;- argShapes (map I.paramName shapepat) mergepat' mergeinit_ts'

  let ctxmerge = zip shapepat ctxinit
      valmerge = zip mergepat' mergeinit'
      dropCond = case form of
        E.While {} -> drop 1
        _ -> id

  -- Ensure that the result of the loop matches the shapes of the
  -- merge parameters.  XXX: Ideally they should already match (by
  -- the source language type rules), but some of our
  -- transformations (esp. defunctionalisation) strips out some size
  -- information.  For a type-correct source program, these reshapes
  -- should simplify away.
  let merge = ctxmerge ++ valmerge
      merge_ts = map (I.paramType . fst) merge
  loopbody'' &lt;-
    localScope (scopeOfFParams $ map fst merge) $
      inScopeOf form' $
        insertStmsM $
          resultBodyM
            =&lt;&lt; ensureArgShapes
              "shape of loop result does not match shapes in loop parameter"
              loc
              (map (I.paramName . fst) ctxmerge)
              merge_ts
            =&lt;&lt; bodyBind loopbody'

  attrs &lt;- asks envAttrs
  loop_res &lt;-
    map I.Var . dropCond
      &lt;$> attributing
        attrs
        (letTupExp desc (I.DoLoop ctxmerge valmerge form' loopbody''))
  bindExtSizes (E.toStruct ret) retext loop_res
  return loop_res
  where
    sparams' = map (`TypeParamDim` mempty) sparams

    forLoop mergepat' shapepat mergeinit form' =
      bodyFromStms $
        inScopeOf form' $ do
          ses &lt;- internaliseExp "loopres" loopbody
          sets &lt;- mapM subExpType ses
          shapeargs &lt;- argShapes (map I.paramName shapepat) mergepat' sets
          return
            ( shapeargs ++ ses,
              ( form',
                shapepat,
                mergepat',
                mergeinit
              )
            )

    handleForm mergeinit (E.ForIn x arr) = do
      arr' &lt;- internaliseExpToVars "for_in_arr" arr
      arr_ts &lt;- mapM lookupType arr'
      let w = arraysSize 0 arr_ts

      i &lt;- newVName "i"

      bindingLoopParams sparams' mergepat $
        \shapepat mergepat' ->
          bindingLambdaParams [x] (map rowType arr_ts) $ \x_params -> do
            let loopvars = zip x_params arr'
            forLoop mergepat' shapepat mergeinit $
              I.ForLoop i Int32 w loopvars
    handleForm mergeinit (E.For i num_iterations) = do
      num_iterations' &lt;- internaliseExp1 "upper_bound" num_iterations
      i' &lt;- internaliseIdent i
      num_iterations_t &lt;- I.subExpType num_iterations'
      it &lt;- case num_iterations_t of
        I.Prim (IntType it) -> return it
        _ -> error "internaliseExp DoLoop: invalid type"

      bindingLoopParams sparams' mergepat $
        \shapepat mergepat' ->
          forLoop mergepat' shapepat mergeinit $
            I.ForLoop i' it num_iterations' []
    handleForm mergeinit (E.While cond) =
      bindingLoopParams sparams' mergepat $ \shapepat mergepat' -> do
        mergeinit_ts &lt;- mapM subExpType mergeinit
        -- We need to insert 'cond' twice - once for the initial
        -- condition (do we enter the loop at all?), and once with the
        -- result values of the loop (do we continue into the next
        -- iteration?).  This is safe, as the type rules for the
        -- external language guarantees that 'cond' does not consume
        -- anything.
        shapeinit &lt;- argShapes (map I.paramName shapepat) mergepat' mergeinit_ts

        (loop_initial_cond, init_loop_cond_bnds) &lt;- collectStms $ do
          forM_ (zip shapepat shapeinit) $ \(p, se) ->
            letBindNames [paramName p] $ BasicOp $ SubExp se
          forM_ (zip mergepat' mergeinit) $ \(p, se) ->
            unless (se == I.Var (paramName p)) $
              letBindNames [paramName p] $
                BasicOp $
                  case se of
                    I.Var v
                      | not $ primType $ paramType p ->
                        Reshape (map DimCoercion $ arrayDims $ paramType p) v
                    _ -> SubExp se
          internaliseExp1 "loop_cond" cond

        addStms init_loop_cond_bnds

        bodyFromStms $ do
          ses &lt;- internaliseExp "loopres" loopbody
          sets &lt;- mapM subExpType ses
          loop_while &lt;- newParam "loop_while" $ I.Prim I.Bool
          shapeargs &lt;- argShapes (map I.paramName shapepat) mergepat' sets

          -- Careful not to clobber anything.
          loop_end_cond_body &lt;- renameBody &lt;=&lt; insertStmsM $ do
            forM_ (zip shapepat shapeargs) $ \(p, se) ->
              unless (se == I.Var (paramName p)) $
                letBindNames [paramName p] $ BasicOp $ SubExp se
            forM_ (zip mergepat' ses) $ \(p, se) ->
              unless (se == I.Var (paramName p)) $
                letBindNames [paramName p] $
                  BasicOp $
                    case se of
                      I.Var v
                        | not $ primType $ paramType p ->
                          Reshape (map DimCoercion $ arrayDims $ paramType p) v
                      _ -> SubExp se
            resultBody &lt;$> internaliseExp "loop_cond" cond
          loop_end_cond &lt;- bodyBind loop_end_cond_body

          return
            ( shapeargs ++ loop_end_cond ++ ses,
              ( I.WhileLoop $ I.paramName loop_while,
                shapepat,
                loop_while : mergepat',
                loop_initial_cond : mergeinit
              )
            )
internaliseExp desc (E.LetWith name src idxs ve body t loc) = do
  let pat = E.Id (E.identName name) (E.identType name) loc
      src_t = E.fromStruct &lt;$> E.identType src
      e = E.Update (E.Var (E.qualName $ E.identName src) src_t loc) idxs ve loc
  internaliseExp desc $ E.LetPat pat e body (t, Info []) loc
internaliseExp desc (E.Update src slice ve loc) = do
  ves &lt;- internaliseExp "lw_val" ve
  srcs &lt;- internaliseExpToVars "src" src
  dims &lt;- case srcs of
    [] -> return [] -- Will this happen?
    v : _ -> I.arrayDims &lt;$> lookupType v
  (idxs', cs) &lt;- internaliseSlice loc dims slice

  let comb sname ve' = do
        sname_t &lt;- lookupType sname
        let full_slice = fullSlice sname_t idxs'
            rowtype = sname_t `setArrayDims` sliceDims full_slice
        ve'' &lt;-
          ensureShape
            "shape of value does not match shape of source array"
            loc
            rowtype
            "lw_val_correct_shape"
            ve'
        letInPlace desc sname full_slice $ BasicOp $ SubExp ve''
  certifying cs $ map I.Var &lt;$> zipWithM comb srcs ves
internaliseExp desc (E.RecordUpdate src fields ve _ _) = do
  src' &lt;- internaliseExp desc src
  ve' &lt;- internaliseExp desc ve
  replace (E.typeOf src `setAliases` ()) fields ve' src'
  where
    replace (E.Scalar (E.Record m)) (f : fs) ve' src'
      | Just t &lt;- M.lookup f m = do
        i &lt;-
          fmap sum $
            mapM (internalisedTypeSize . snd) $
              takeWhile ((/= f) . fst) $ sortFields m
        k &lt;- internalisedTypeSize t
        let (bef, to_update, aft) = splitAt3 i k src'
        src'' &lt;- replace t fs ve' to_update
        return $ bef ++ src'' ++ aft
    replace _ _ ve' _ = return ve'
internaliseExp desc (E.Attr attr e _) =
  local f $ internaliseExp desc e
  where
    attrs = oneAttr $ internaliseAttr attr
    f env
      | "unsafe" `inAttrs` attrs,
        not $ envSafe env =
        env {envDoBoundsChecks = False}
      | otherwise =
        env {envAttrs = envAttrs env &lt;> attrs}
internaliseExp desc (E.Assert e1 e2 (Info check) loc) = do
  e1' &lt;- internaliseExp1 "assert_cond" e1
  c &lt;- assert "assert_c" e1' (errorMsg [ErrorString $ "Assertion is false: " &lt;> check]) loc
  -- Make sure there are some bindings to certify.
  certifying c $ mapM rebind =&lt;&lt; internaliseExp desc e2
  where
    rebind v = do
      v' &lt;- newVName "assert_res"
      letBindNames [v'] $ I.BasicOp $ I.SubExp v
      return $ I.Var v'
internaliseExp _ (E.Constr c es (Info (E.Scalar (E.Sum fs))) _) = do
  (ts, constr_map) &lt;- internaliseSumType $ M.map (map E.toStruct) fs
  es' &lt;- concat &lt;$> mapM (internaliseExp "payload") es

  let noExt _ = return $ intConst Int32 0
  ts' &lt;- instantiateShapes noExt $ map fromDecl ts

  case M.lookup c constr_map of
    Just (i, js) ->
      (intConst Int8 (toInteger i) :) &lt;$> clauses 0 ts' (zip js es')
    Nothing ->
      error "internaliseExp Constr: missing constructor"
  where
    clauses j (t : ts) js_to_es
      | Just e &lt;- j `lookup` js_to_es =
        (e :) &lt;$> clauses (j + 1) ts js_to_es
      | otherwise = do
        blank &lt;- letSubExp "zero" =&lt;&lt; eBlank t
        (blank :) &lt;$> clauses (j + 1) ts js_to_es
    clauses _ [] _ =
      return []
internaliseExp _ (E.Constr _ _ (Info t) loc) =
  error $ "internaliseExp: constructor with type " ++ pretty t ++ " at " ++ locStr loc
internaliseExp desc (E.Match e cs (Info ret, Info retext) _) = do
  ses &lt;- internaliseExp (desc ++ "_scrutinee") e
  res &lt;-
    case NE.uncons cs of
      (CasePat pCase eCase _, Nothing) -> do
        (_, pertinent) &lt;- generateCond pCase ses
        internalisePat' pCase pertinent eCase (internaliseExp desc)
      (c, Just cs') -> do
        let CasePat pLast eLast _ = NE.last cs'
        bFalse &lt;- do
          (_, pertinent) &lt;- generateCond pLast ses
          eLast' &lt;- internalisePat' pLast pertinent eLast internaliseBody
          foldM (\bf c' -> eBody $ return $ generateCaseIf ses c' bf) eLast' $
            reverse $ NE.init cs'
        letTupExp' desc =&lt;&lt; generateCaseIf ses c bFalse
  bindExtSizes (E.toStruct ret) retext res
  return res

-- The "interesting" cases are over, now it's mostly boilerplate.

internaliseExp _ (E.Literal v _) =
  return [I.Constant $ internalisePrimValue v]
internaliseExp _ (E.IntLit v (Info t) _) =
  case t of
    E.Scalar (E.Prim (E.Signed it)) ->
      return [I.Constant $ I.IntValue $ intValue it v]
    E.Scalar (E.Prim (E.Unsigned it)) ->
      return [I.Constant $ I.IntValue $ intValue it v]
    E.Scalar (E.Prim (E.FloatType ft)) ->
      return [I.Constant $ I.FloatValue $ floatValue ft v]
    _ -> error $ "internaliseExp: nonsensical type for integer literal: " ++ pretty t
internaliseExp _ (E.FloatLit v (Info t) _) =
  case t of
    E.Scalar (E.Prim (E.FloatType ft)) ->
      return [I.Constant $ I.FloatValue $ floatValue ft v]
    _ -> error $ "internaliseExp: nonsensical type for float literal: " ++ pretty t
internaliseExp desc (E.If ce te fe (Info ret, Info retext) _) = do
  ses &lt;-
    letTupExp' desc
      =&lt;&lt; eIf
        (BasicOp . SubExp &lt;$> internaliseExp1 "cond" ce)
        (internaliseBody te)
        (internaliseBody fe)
  bindExtSizes (E.toStruct ret) retext ses
  return ses

-- Builtin operators are handled specially because they are
-- overloaded.
internaliseExp desc (E.BinOp (op, _) _ (xe, _) (ye, _) _ _ loc)
  | Just internalise &lt;- isOverloadedFunction op [xe, ye] loc =
    internalise desc
-- User-defined operators are just the same as a function call.
internaliseExp
  desc
  ( E.BinOp
      (op, oploc)
      (Info t)
      (xarg, Info (xt, xext))
      (yarg, Info (yt, yext))
      _
      (Info retext)
      loc
    ) =
    internaliseExp desc $
      E.Apply
        ( E.Apply
            (E.Var op (Info t) oploc)
            xarg
            (Info (E.diet xt, xext))
            (Info $ foldFunType [E.fromStruct yt] t, Info [])
            loc
        )
        yarg
        (Info (E.diet yt, yext))
        (Info t, Info retext)
        loc
internaliseExp desc (E.Project k e (Info rt) _) = do
  n &lt;- internalisedTypeSize $ rt `setAliases` ()
  i' &lt;- fmap sum $
    mapM internalisedTypeSize $
      case E.typeOf e `setAliases` () of
        E.Scalar (Record fs) ->
          map snd $ takeWhile ((/= k) . fst) $ sortFields fs
        t -> [t]
  take n . drop i' &lt;$> internaliseExp desc e
internaliseExp _ e@E.Lambda {} =
  error $ "internaliseExp: Unexpected lambda at " ++ locStr (srclocOf e)
internaliseExp _ e@E.OpSection {} =
  error $ "internaliseExp: Unexpected operator section at " ++ locStr (srclocOf e)
internaliseExp _ e@E.OpSectionLeft {} =
  error $ "internaliseExp: Unexpected left operator section at " ++ locStr (srclocOf e)
internaliseExp _ e@E.OpSectionRight {} =
  error $ "internaliseExp: Unexpected right operator section at " ++ locStr (srclocOf e)
internaliseExp _ e@E.ProjectSection {} =
  error $ "internaliseExp: Unexpected projection section at " ++ locStr (srclocOf e)
internaliseExp _ e@E.IndexSection {} =
  error $ "internaliseExp: Unexpected index section at " ++ locStr (srclocOf e)

internaliseArg :: String -> (E.Exp, Maybe VName) -> InternaliseM [SubExp]
internaliseArg desc (arg, argdim) = do
  arg' &lt;- internaliseExp desc arg
  case (arg', argdim) of
    ([se], Just d) -> letBindNames [d] $ BasicOp $ SubExp se
    _ -> return ()
  return arg'

generateCond :: E.Pattern -> [I.SubExp] -> InternaliseM (I.SubExp, [I.SubExp])
generateCond orig_p orig_ses = do
  (cmps, pertinent, _) &lt;- compares orig_p orig_ses
  cmp &lt;- letSubExp "matches" =&lt;&lt; eAll cmps
  return (cmp, pertinent)
  where
    -- Literals are always primitive values.
    compares (E.PatternLit e _ _) (se : ses) = do
      e' &lt;- internaliseExp1 "constant" e
      t' &lt;- elemType &lt;$> subExpType se
      cmp &lt;- letSubExp "match_lit" $ I.BasicOp $ I.CmpOp (I.CmpEq t') e' se
      return ([cmp], [se], ses)
    compares (E.PatternConstr c (Info (E.Scalar (E.Sum fs))) pats _) (se : ses) = do
      (payload_ts, m) &lt;- internaliseSumType $ M.map (map toStruct) fs
      case M.lookup c m of
        Just (i, payload_is) -> do
          let i' = intConst Int8 $ toInteger i
          let (payload_ses, ses') = splitAt (length payload_ts) ses
          cmp &lt;- letSubExp "match_constr" $ I.BasicOp $ I.CmpOp (I.CmpEq int8) i' se
          (cmps, pertinent, _) &lt;- comparesMany pats $ map (payload_ses !!) payload_is
          return (cmp : cmps, pertinent, ses')
        Nothing ->
          error "generateCond: missing constructor"
    compares (E.PatternConstr _ (Info t) _ _) _ =
      error $ "generateCond: PatternConstr has nonsensical type: " ++ pretty t
    compares (E.Id _ t loc) ses =
      compares (E.Wildcard t loc) ses
    compares (E.Wildcard (Info t) _) ses = do
      n &lt;- internalisedTypeSize $ E.toStruct t
      let (id_ses, rest_ses) = splitAt n ses
      return ([], id_ses, rest_ses)
    compares (E.PatternParens pat _) ses =
      compares pat ses
    compares (E.TuplePattern pats _) ses =
      comparesMany pats ses
    compares (E.RecordPattern fs _) ses =
      comparesMany (map snd $ E.sortFields $ M.fromList fs) ses
    compares (E.PatternAscription pat _ _) ses =
      compares pat ses
    compares pat [] =
      error $ "generateCond: No values left for pattern " ++ pretty pat

    comparesMany [] ses = return ([], [], ses)
    comparesMany (pat : pats) ses = do
      (cmps1, pertinent1, ses') &lt;- compares pat ses
      (cmps2, pertinent2, ses'') &lt;- comparesMany pats ses'
      return
        ( cmps1 &lt;> cmps2,
          pertinent1 &lt;> pertinent2,
          ses''
        )

generateCaseIf :: [I.SubExp] -> Case -> I.Body -> InternaliseM I.Exp
generateCaseIf ses (CasePat p eCase _) bFail = do
  (cond, pertinent) &lt;- generateCond p ses
  eCase' &lt;- internalisePat' p pertinent eCase internaliseBody
  eIf (eSubExp cond) (return eCase') (return bFail)

internalisePat ::
  String ->
  E.Pattern ->
  E.Exp ->
  E.Exp ->
  (E.Exp -> InternaliseM a) ->
  InternaliseM a
internalisePat desc p e body m = do
  ses &lt;- internaliseExp desc' e
  internalisePat' p ses body m
  where
    desc' = case S.toList $ E.patternIdents p of
      [v] -> baseString $ E.identName v
      _ -> desc

internalisePat' ::
  E.Pattern ->
  [I.SubExp] ->
  E.Exp ->
  (E.Exp -> InternaliseM a) ->
  InternaliseM a
internalisePat' p ses body m = do
  ses_ts &lt;- mapM subExpType ses
  stmPattern p ses_ts $ \pat_names -> do
    forM_ (zip pat_names ses) $ \(v, se) ->
      letBindNames [v] $ I.BasicOp $ I.SubExp se
    m body

internaliseSlice ::
  SrcLoc ->
  [SubExp] ->
  [E.DimIndex] ->
  InternaliseM ([I.DimIndex SubExp], Certificates)
internaliseSlice loc dims idxs = do
  (idxs', oks, parts) &lt;- unzip3 &lt;$> zipWithM internaliseDimIndex dims idxs
  ok &lt;- letSubExp "index_ok" =&lt;&lt; eAll oks
  let msg =
        errorMsg $
          ["Index ["] ++ intercalate [", "] parts
            ++ ["] out of bounds for array of shape ["]
            ++ intersperse "][" (map ErrorInt32 $ take (length idxs) dims)
            ++ ["]."]
  c &lt;- assert "index_certs" ok msg loc
  return (idxs', c)

internaliseDimIndex ::
  SubExp ->
  E.DimIndex ->
  InternaliseM (I.DimIndex SubExp, SubExp, [ErrorMsgPart SubExp])
internaliseDimIndex w (E.DimFix i) = do
  (i', _) &lt;- internaliseDimExp "i" i
  let lowerBound =
        I.BasicOp $
          I.CmpOp (I.CmpSle I.Int32) (I.constant (0 :: I.Int32)) i'
      upperBound =
        I.BasicOp $
          I.CmpOp (I.CmpSlt I.Int32) i' w
  ok &lt;- letSubExp "bounds_check" =&lt;&lt; eBinOp I.LogAnd (pure lowerBound) (pure upperBound)
  return (I.DimFix i', ok, [ErrorInt32 i'])

-- Special-case an important common case that otherwise leads to horrible code.
internaliseDimIndex
  w
  ( E.DimSlice
      Nothing
      Nothing
      (Just (E.Negate (E.IntLit 1 _ _) _))
    ) = do
    w_minus_1 &lt;-
      letSubExp "w_minus_1" $
        BasicOp $ I.BinOp (Sub Int32 I.OverflowWrap) w one
    return
      ( I.DimSlice w_minus_1 w $ intConst Int32 (-1),
        constant True,
        mempty
      )
    where
      one = constant (1 :: Int32)
internaliseDimIndex w (E.DimSlice i j s) = do
  s' &lt;- maybe (return one) (fmap fst . internaliseDimExp "s") s
  s_sign &lt;- letSubExp "s_sign" $ BasicOp $ I.UnOp (I.SSignum Int32) s'
  backwards &lt;- letSubExp "backwards" $ I.BasicOp $ I.CmpOp (I.CmpEq int32) s_sign negone
  w_minus_1 &lt;- letSubExp "w_minus_1" $ BasicOp $ I.BinOp (Sub Int32 I.OverflowWrap) w one
  let i_def =
        letSubExp "i_def" $
          I.If
            backwards
            (resultBody [w_minus_1])
            (resultBody [zero])
            $ ifCommon [I.Prim int32]
      j_def =
        letSubExp "j_def" $
          I.If
            backwards
            (resultBody [negone])
            (resultBody [w])
            $ ifCommon [I.Prim int32]
  i' &lt;- maybe i_def (fmap fst . internaliseDimExp "i") i
  j' &lt;- maybe j_def (fmap fst . internaliseDimExp "j") j
  j_m_i &lt;- letSubExp "j_m_i" $ BasicOp $ I.BinOp (Sub Int32 I.OverflowWrap) j' i'
  -- Something like a division-rounding-up, but accomodating negative
  -- operands.
  let divRounding x y =
        eBinOp
          (SQuot Int32 Unsafe)
          ( eBinOp
              (Add Int32 I.OverflowWrap)
              x
              (eBinOp (Sub Int32 I.OverflowWrap) y (eSignum $ toExp s'))
          )
          y
  n &lt;- letSubExp "n" =&lt;&lt; divRounding (toExp j_m_i) (toExp s')

  -- Bounds checks depend on whether we are slicing forwards or
  -- backwards.  If forwards, we must check '0 &lt;= i &amp;&amp; i &lt;= j'.  If
  -- backwards, '-1 &lt;= j &amp;&amp; j &lt;= i'.  In both cases, we check '0 &lt;=
  -- i+n*s &amp;&amp; i+(n-1)*s &lt; w'.  We only check if the slice is nonempty.
  empty_slice &lt;- letSubExp "empty_slice" $ I.BasicOp $ I.CmpOp (CmpEq int32) n zero

  m &lt;- letSubExp "m" $ I.BasicOp $ I.BinOp (Sub Int32 I.OverflowWrap) n one
  m_t_s &lt;- letSubExp "m_t_s" $ I.BasicOp $ I.BinOp (Mul Int32 I.OverflowWrap) m s'
  i_p_m_t_s &lt;- letSubExp "i_p_m_t_s" $ I.BasicOp $ I.BinOp (Add Int32 I.OverflowWrap) i' m_t_s
  zero_leq_i_p_m_t_s &lt;-
    letSubExp "zero_leq_i_p_m_t_s" $
      I.BasicOp $ I.CmpOp (I.CmpSle Int32) zero i_p_m_t_s
  i_p_m_t_s_leq_w &lt;-
    letSubExp "i_p_m_t_s_leq_w" $
      I.BasicOp $ I.CmpOp (I.CmpSle Int32) i_p_m_t_s w
  i_p_m_t_s_lth_w &lt;-
    letSubExp "i_p_m_t_s_leq_w" $
      I.BasicOp $ I.CmpOp (I.CmpSlt Int32) i_p_m_t_s w

  zero_lte_i &lt;- letSubExp "zero_lte_i" $ I.BasicOp $ I.CmpOp (I.CmpSle Int32) zero i'
  i_lte_j &lt;- letSubExp "i_lte_j" $ I.BasicOp $ I.CmpOp (I.CmpSle Int32) i' j'
  forwards_ok &lt;-
    letSubExp "forwards_ok"
      =&lt;&lt; eAll [zero_lte_i, zero_lte_i, i_lte_j, zero_leq_i_p_m_t_s, i_p_m_t_s_lth_w]

  negone_lte_j &lt;- letSubExp "negone_lte_j" $ I.BasicOp $ I.CmpOp (I.CmpSle Int32) negone j'
  j_lte_i &lt;- letSubExp "j_lte_i" $ I.BasicOp $ I.CmpOp (I.CmpSle Int32) j' i'
  backwards_ok &lt;-
    letSubExp "backwards_ok"
      =&lt;&lt; eAll
        [negone_lte_j, negone_lte_j, j_lte_i, zero_leq_i_p_m_t_s, i_p_m_t_s_leq_w]

  slice_ok &lt;-
    letSubExp "slice_ok" $
      I.If
        backwards
        (resultBody [backwards_ok])
        (resultBody [forwards_ok])
        $ ifCommon [I.Prim I.Bool]
  ok_or_empty &lt;-
    letSubExp "ok_or_empty" $
      I.BasicOp $ I.BinOp I.LogOr empty_slice slice_ok

  let parts = case (i, j, s) of
        (_, _, Just {}) ->
          [ maybe "" (const $ ErrorInt32 i') i,
            ":",
            maybe "" (const $ ErrorInt32 j') j,
            ":",
            ErrorInt32 s'
          ]
        (_, Just {}, _) ->
          [ maybe "" (const $ ErrorInt32 i') i,
            ":",
            ErrorInt32 j'
          ]
            ++ maybe mempty (const [":", ErrorInt32 s']) s
        (_, Nothing, Nothing) ->
          [ErrorInt32 i', ":"]
  return (I.DimSlice i' n s', ok_or_empty, parts)
  where
    zero = constant (0 :: Int32)
    negone = constant (-1 :: Int32)
    one = constant (1 :: Int32)

internaliseScanOrReduce ::
  String ->
  String ->
  (SubExp -> I.Lambda -> [SubExp] -> [VName] -> InternaliseM (SOAC SOACS)) ->
  (E.Exp, E.Exp, E.Exp, SrcLoc) ->
  InternaliseM [SubExp]
internaliseScanOrReduce desc what f (lam, ne, arr, loc) = do
  arrs &lt;- internaliseExpToVars (what ++ "_arr") arr
  nes &lt;- internaliseExp (what ++ "_ne") ne
  nes' &lt;- forM (zip nes arrs) $ \(ne', arr') -> do
    rowtype &lt;- I.stripArray 1 &lt;$> lookupType arr'
    ensureShape
      "Row shape of input array does not match shape of neutral element"
      loc
      rowtype
      (what ++ "_ne_right_shape")
      ne'
  nests &lt;- mapM I.subExpType nes'
  arrts &lt;- mapM lookupType arrs
  lam' &lt;- internaliseFoldLambda internaliseLambda lam nests arrts
  w &lt;- arraysSize 0 &lt;$> mapM lookupType arrs
  letTupExp' desc . I.Op =&lt;&lt; f w lam' nes' arrs

internaliseHist ::
  String ->
  E.Exp ->
  E.Exp ->
  E.Exp ->
  E.Exp ->
  E.Exp ->
  E.Exp ->
  SrcLoc ->
  InternaliseM [SubExp]
internaliseHist desc rf hist op ne buckets img loc = do
  rf' &lt;- internaliseExp1 "hist_rf" rf
  ne' &lt;- internaliseExp "hist_ne" ne
  hist' &lt;- internaliseExpToVars "hist_hist" hist
  buckets' &lt;-
    letExp "hist_buckets" . BasicOp . SubExp
      =&lt;&lt; internaliseExp1 "hist_buckets" buckets
  img' &lt;- internaliseExpToVars "hist_img" img

  -- reshape neutral element to have same size as the destination array
  ne_shp &lt;- forM (zip ne' hist') $ \(n, h) -> do
    rowtype &lt;- I.stripArray 1 &lt;$> lookupType h
    ensureShape
      "Row shape of destination array does not match shape of neutral element"
      loc
      rowtype
      "hist_ne_right_shape"
      n
  ne_ts &lt;- mapM I.subExpType ne_shp
  his_ts &lt;- mapM lookupType hist'
  op' &lt;- internaliseFoldLambda internaliseLambda op ne_ts his_ts

  -- reshape return type of bucket function to have same size as neutral element
  -- (modulo the index)
  bucket_param &lt;- newParam "bucket_p" $ I.Prim int32
  img_params &lt;- mapM (newParam "img_p" . rowType) =&lt;&lt; mapM lookupType img'
  let params = bucket_param : img_params
      rettype = I.Prim int32 : ne_ts
      body = mkBody mempty $ map (I.Var . paramName) params
  body' &lt;-
    localScope (scopeOfLParams params) $
      ensureResultShape
        "Row shape of value array does not match row shape of hist target"
        (srclocOf img)
        rettype
        body

  -- get sizes of histogram and image arrays
  w_hist &lt;- arraysSize 0 &lt;$> mapM lookupType hist'
  w_img &lt;- arraysSize 0 &lt;$> mapM lookupType img'

  -- Generate an assertion and reshapes to ensure that buckets' and
  -- img' are the same size.
  b_shape &lt;- I.arrayShape &lt;$> lookupType buckets'
  let b_w = shapeSize 0 b_shape
  cmp &lt;- letSubExp "bucket_cmp" $ I.BasicOp $ I.CmpOp (I.CmpEq I.int32) b_w w_img
  c &lt;-
    assert
      "bucket_cert"
      cmp
      "length of index and value array does not match"
      loc
  buckets'' &lt;-
    certifying c $
      letExp (baseString buckets') $
        I.BasicOp $ I.Reshape (reshapeOuter [DimCoercion w_img] 1 b_shape) buckets'

  letTupExp' desc $
    I.Op $
      I.Hist w_img [HistOp w_hist rf' hist' ne_shp op'] (I.Lambda params body' rettype) $ buckets'' : img'

internaliseStreamMap ::
  String ->
  StreamOrd ->
  E.Exp ->
  E.Exp ->
  InternaliseM [SubExp]
internaliseStreamMap desc o lam arr = do
  arrs &lt;- internaliseExpToVars "stream_input" arr
  lam' &lt;- internaliseStreamMapLambda internaliseLambda lam $ map I.Var arrs
  w &lt;- arraysSize 0 &lt;$> mapM lookupType arrs
  let form = I.Parallel o Commutative (I.Lambda [] (mkBody mempty []) []) []
  letTupExp' desc $ I.Op $ I.Stream w form lam' arrs

internaliseStreamRed ::
  String ->
  StreamOrd ->
  Commutativity ->
  E.Exp ->
  E.Exp ->
  E.Exp ->
  InternaliseM [SubExp]
internaliseStreamRed desc o comm lam0 lam arr = do
  arrs &lt;- internaliseExpToVars "stream_input" arr
  rowts &lt;- mapM (fmap I.rowType . lookupType) arrs
  (lam_params, lam_body) &lt;-
    internaliseStreamLambda internaliseLambda lam rowts
  let (chunk_param, _, lam_val_params) =
        partitionChunkedFoldParameters 0 lam_params

  -- Synthesize neutral elements by applying the fold function
  -- to an empty chunk.
  letBindNames [I.paramName chunk_param] $
    I.BasicOp $ I.SubExp $ constant (0 :: Int32)
  forM_ lam_val_params $ \p ->
    letBindNames [I.paramName p] $
      I.BasicOp $
        I.Scratch (I.elemType $ I.paramType p) $
          I.arrayDims $ I.paramType p
  nes &lt;- bodyBind =&lt;&lt; renameBody lam_body

  nes_ts &lt;- mapM I.subExpType nes
  outsz &lt;- arraysSize 0 &lt;$> mapM lookupType arrs
  let acc_arr_tps = [I.arrayOf t (I.Shape [outsz]) NoUniqueness | t &lt;- nes_ts]
  lam0' &lt;- internaliseFoldLambda internaliseLambda lam0 nes_ts acc_arr_tps

  let lam0_acc_params = take (length nes) $ I.lambdaParams lam0'
  lam_acc_params &lt;- forM lam0_acc_params $ \p -> do
    name &lt;- newVName $ baseString $ I.paramName p
    return p {I.paramName = name}

  -- Make sure the chunk size parameter comes first.
  let lam_params' = chunk_param : lam_acc_params ++ lam_val_params

  body_with_lam0 &lt;-
    ensureResultShape
      "shape of result does not match shape of initial value"
      (srclocOf lam0)
      nes_ts
      &lt;=&lt; insertStmsM
      $ localScope (scopeOfLParams lam_params') $ do
        lam_res &lt;- bodyBind lam_body
        lam_res' &lt;-
          ensureArgShapes
            "shape of chunk function result does not match shape of initial value"
            (srclocOf lam)
            []
            (map I.typeOf $ I.lambdaParams lam0')
            lam_res
        new_lam_res &lt;-
          eLambda lam0' $
            map eSubExp $
              map (I.Var . paramName) lam_acc_params ++ lam_res'
        return $ resultBody new_lam_res

  let form = I.Parallel o comm lam0' nes
      lam' =
        I.Lambda
          { lambdaParams = lam_params',
            lambdaBody = body_with_lam0,
            lambdaReturnType = nes_ts
          }
  w &lt;- arraysSize 0 &lt;$> mapM lookupType arrs
  letTupExp' desc $ I.Op $ I.Stream w form lam' arrs

internaliseExp1 :: String -> E.Exp -> InternaliseM I.SubExp
internaliseExp1 desc e = do
  vs &lt;- internaliseExp desc e
  case vs of
    [se] -> return se
    _ -> error "Internalise.internaliseExp1: was passed not just a single subexpression"

-- | Promote to dimension type as appropriate for the original type.
-- Also return original type.
internaliseDimExp :: String -> E.Exp -> InternaliseM (I.SubExp, IntType)
internaliseDimExp s e = do
  e' &lt;- internaliseExp1 s e
  case E.typeOf e of
    E.Scalar (E.Prim (Signed it)) -> (,it) &lt;$> asIntS Int32 e'
    _ -> error "internaliseDimExp: bad type"

internaliseExpToVars :: String -> E.Exp -> InternaliseM [I.VName]
internaliseExpToVars desc e =
  mapM asIdent =&lt;&lt; internaliseExp desc e
  where
    asIdent (I.Var v) = return v
    asIdent se = letExp desc $ I.BasicOp $ I.SubExp se

internaliseOperation ::
  String ->
  E.Exp ->
  (I.VName -> InternaliseM I.BasicOp) ->
  InternaliseM [I.SubExp]
internaliseOperation s e op = do
  vs &lt;- internaliseExpToVars s e
  letSubExps s =&lt;&lt; mapM (fmap I.BasicOp . op) vs

certifyingNonzero ::
  SrcLoc ->
  IntType ->
  SubExp ->
  InternaliseM a ->
  InternaliseM a
certifyingNonzero loc t x m = do
  zero &lt;-
    letSubExp "zero" $
      I.BasicOp $
        CmpOp (CmpEq (IntType t)) x (intConst t 0)
  nonzero &lt;- letSubExp "nonzero" $ I.BasicOp $ UnOp Not zero
  c &lt;- assert "nonzero_cert" nonzero "division by zero" loc
  certifying c m

certifyingNonnegative ::
  SrcLoc ->
  IntType ->
  SubExp ->
  InternaliseM a ->
  InternaliseM a
certifyingNonnegative loc t x m = do
  nonnegative &lt;-
    letSubExp "nonnegative" $
      I.BasicOp $
        CmpOp (CmpSle t) (intConst t 0) x
  c &lt;- assert "nonzero_cert" nonnegative "negative exponent" loc
  certifying c m

internaliseBinOp ::
  SrcLoc ->
  String ->
  E.BinOp ->
  I.SubExp ->
  I.SubExp ->
  E.PrimType ->
  E.PrimType ->
  InternaliseM [I.SubExp]
internaliseBinOp _ desc E.Plus x y (E.Signed t) _ =
  simpleBinOp desc (I.Add t I.OverflowWrap) x y
internaliseBinOp _ desc E.Plus x y (E.Unsigned t) _ =
  simpleBinOp desc (I.Add t I.OverflowWrap) x y
internaliseBinOp _ desc E.Plus x y (E.FloatType t) _ =
  simpleBinOp desc (I.FAdd t) x y
internaliseBinOp _ desc E.Minus x y (E.Signed t) _ =
  simpleBinOp desc (I.Sub t I.OverflowWrap) x y
internaliseBinOp _ desc E.Minus x y (E.Unsigned t) _ =
  simpleBinOp desc (I.Sub t I.OverflowWrap) x y
internaliseBinOp _ desc E.Minus x y (E.FloatType t) _ =
  simpleBinOp desc (I.FSub t) x y
internaliseBinOp _ desc E.Times x y (E.Signed t) _ =
  simpleBinOp desc (I.Mul t I.OverflowWrap) x y
internaliseBinOp _ desc E.Times x y (E.Unsigned t) _ =
  simpleBinOp desc (I.Mul t I.OverflowWrap) x y
internaliseBinOp _ desc E.Times x y (E.FloatType t) _ =
  simpleBinOp desc (I.FMul t) x y
internaliseBinOp loc desc E.Divide x y (E.Signed t) _ =
  certifyingNonzero loc t y $
    simpleBinOp desc (I.SDiv t I.Unsafe) x y
internaliseBinOp loc desc E.Divide x y (E.Unsigned t) _ =
  certifyingNonzero loc t y $
    simpleBinOp desc (I.UDiv t I.Unsafe) x y
internaliseBinOp _ desc E.Divide x y (E.FloatType t) _ =
  simpleBinOp desc (I.FDiv t) x y
internaliseBinOp _ desc E.Pow x y (E.FloatType t) _ =
  simpleBinOp desc (I.FPow t) x y
internaliseBinOp loc desc E.Pow x y (E.Signed t) _ =
  certifyingNonnegative loc t y $
    simpleBinOp desc (I.Pow t) x y
internaliseBinOp _ desc E.Pow x y (E.Unsigned t) _ =
  simpleBinOp desc (I.Pow t) x y
internaliseBinOp loc desc E.Mod x y (E.Signed t) _ =
  certifyingNonzero loc t y $
    simpleBinOp desc (I.SMod t I.Unsafe) x y
internaliseBinOp loc desc E.Mod x y (E.Unsigned t) _ =
  certifyingNonzero loc t y $
    simpleBinOp desc (I.UMod t I.Unsafe) x y
internaliseBinOp _ desc E.Mod x y (E.FloatType t) _ =
  simpleBinOp desc (I.FMod t) x y
internaliseBinOp loc desc E.Quot x y (E.Signed t) _ =
  certifyingNonzero loc t y $
    simpleBinOp desc (I.SQuot t I.Unsafe) x y
internaliseBinOp loc desc E.Quot x y (E.Unsigned t) _ =
  certifyingNonzero loc t y $
    simpleBinOp desc (I.UDiv t I.Unsafe) x y
internaliseBinOp loc desc E.Rem x y (E.Signed t) _ =
  certifyingNonzero loc t y $
    simpleBinOp desc (I.SRem t I.Unsafe) x y
internaliseBinOp loc desc E.Rem x y (E.Unsigned t) _ =
  certifyingNonzero loc t y $
    simpleBinOp desc (I.UMod t I.Unsafe) x y
internaliseBinOp _ desc E.ShiftR x y (E.Signed t) _ =
  simpleBinOp desc (I.AShr t) x y
internaliseBinOp _ desc E.ShiftR x y (E.Unsigned t) _ =
  simpleBinOp desc (I.LShr t) x y
internaliseBinOp _ desc E.ShiftL x y (E.Signed t) _ =
  simpleBinOp desc (I.Shl t) x y
internaliseBinOp _ desc E.ShiftL x y (E.Unsigned t) _ =
  simpleBinOp desc (I.Shl t) x y
internaliseBinOp _ desc E.Band x y (E.Signed t) _ =
  simpleBinOp desc (I.And t) x y
internaliseBinOp _ desc E.Band x y (E.Unsigned t) _ =
  simpleBinOp desc (I.And t) x y
internaliseBinOp _ desc E.Xor x y (E.Signed t) _ =
  simpleBinOp desc (I.Xor t) x y
internaliseBinOp _ desc E.Xor x y (E.Unsigned t) _ =
  simpleBinOp desc (I.Xor t) x y
internaliseBinOp _ desc E.Bor x y (E.Signed t) _ =
  simpleBinOp desc (I.Or t) x y
internaliseBinOp _ desc E.Bor x y (E.Unsigned t) _ =
  simpleBinOp desc (I.Or t) x y
internaliseBinOp _ desc E.Equal x y t _ =
  simpleCmpOp desc (I.CmpEq $ internalisePrimType t) x y
internaliseBinOp _ desc E.NotEqual x y t _ = do
  eq &lt;- letSubExp (desc ++ "true") $ I.BasicOp $ I.CmpOp (I.CmpEq $ internalisePrimType t) x y
  fmap pure $ letSubExp desc $ I.BasicOp $ I.UnOp I.Not eq
internaliseBinOp _ desc E.Less x y (E.Signed t) _ =
  simpleCmpOp desc (I.CmpSlt t) x y
internaliseBinOp _ desc E.Less x y (E.Unsigned t) _ =
  simpleCmpOp desc (I.CmpUlt t) x y
internaliseBinOp _ desc E.Leq x y (E.Signed t) _ =
  simpleCmpOp desc (I.CmpSle t) x y
internaliseBinOp _ desc E.Leq x y (E.Unsigned t) _ =
  simpleCmpOp desc (I.CmpUle t) x y
internaliseBinOp _ desc E.Greater x y (E.Signed t) _ =
  simpleCmpOp desc (I.CmpSlt t) y x -- Note the swapped x and y
internaliseBinOp _ desc E.Greater x y (E.Unsigned t) _ =
  simpleCmpOp desc (I.CmpUlt t) y x -- Note the swapped x and y
internaliseBinOp _ desc E.Geq x y (E.Signed t) _ =
  simpleCmpOp desc (I.CmpSle t) y x -- Note the swapped x and y
internaliseBinOp _ desc E.Geq x y (E.Unsigned t) _ =
  simpleCmpOp desc (I.CmpUle t) y x -- Note the swapped x and y
internaliseBinOp _ desc E.Less x y (E.FloatType t) _ =
  simpleCmpOp desc (I.FCmpLt t) x y
internaliseBinOp _ desc E.Leq x y (E.FloatType t) _ =
  simpleCmpOp desc (I.FCmpLe t) x y
internaliseBinOp _ desc E.Greater x y (E.FloatType t) _ =
  simpleCmpOp desc (I.FCmpLt t) y x -- Note the swapped x and y
internaliseBinOp _ desc E.Geq x y (E.FloatType t) _ =
  simpleCmpOp desc (I.FCmpLe t) y x -- Note the swapped x and y

-- Relational operators for booleans.
internaliseBinOp _ desc E.Less x y E.Bool _ =
  simpleCmpOp desc I.CmpLlt x y
internaliseBinOp _ desc E.Leq x y E.Bool _ =
  simpleCmpOp desc I.CmpLle x y
internaliseBinOp _ desc E.Greater x y E.Bool _ =
  simpleCmpOp desc I.CmpLlt y x -- Note the swapped x and y
internaliseBinOp _ desc E.Geq x y E.Bool _ =
  simpleCmpOp desc I.CmpLle y x -- Note the swapped x and y
internaliseBinOp _ _ op _ _ t1 t2 =
  error $
    "Invalid binary operator " ++ pretty op
      ++ " with operand types "
      ++ pretty t1
      ++ ", "
      ++ pretty t2

simpleBinOp ::
  String ->
  I.BinOp ->
  I.SubExp ->
  I.SubExp ->
  InternaliseM [I.SubExp]
simpleBinOp desc bop x y =
  letTupExp' desc $ I.BasicOp $ I.BinOp bop x y

simpleCmpOp ::
  String ->
  I.CmpOp ->
  I.SubExp ->
  I.SubExp ->
  InternaliseM [I.SubExp]
simpleCmpOp desc op x y =
  letTupExp' desc $ I.BasicOp $ I.CmpOp op x y

findFuncall ::
  E.Exp ->
  InternaliseM
    ( E.QualName VName,
      [(E.Exp, Maybe VName)],
      E.StructType,
      [VName]
    )
findFuncall (E.Var fname (Info t) _) =
  return (fname, [], E.toStruct t, [])
findFuncall (E.Apply f arg (Info (_, argext)) (Info ret, Info retext) _) = do
  (fname, args, _, _) &lt;- findFuncall f
  return (fname, args ++ [(arg, argext)], E.toStruct ret, retext)
findFuncall e =
  error $ "Invalid function expression in application: " ++ pretty e

internaliseLambda :: InternaliseLambda
internaliseLambda (E.Parens e _) rowtypes =
  internaliseLambda e rowtypes
internaliseLambda (E.Lambda params body _ (Info (_, rettype)) _) rowtypes =
  bindingLambdaParams params rowtypes $ \params' -> do
    body' &lt;- internaliseBody body
    rettype' &lt;- internaliseLambdaReturnType rettype
    return (params', body', rettype')
internaliseLambda e _ = error $ "internaliseLambda: unexpected expression:\n" ++ pretty e

-- | Some operators and functions are overloaded or otherwise special
-- - we detect and treat them here.
isOverloadedFunction ::
  E.QualName VName ->
  [E.Exp] ->
  SrcLoc ->
  Maybe (String -> InternaliseM [SubExp])
isOverloadedFunction qname args loc = do
  guard $ baseTag (qualLeaf qname) &lt;= maxIntrinsicTag
  let handlers =
        [ handleSign,
          handleIntrinsicOps,
          handleOps,
          handleSOACs,
          handleRest
        ]
  msum [h args $ baseString $ qualLeaf qname | h &lt;- handlers]
  where
    handleSign [x] "sign_i8" = Just $ toSigned I.Int8 x
    handleSign [x] "sign_i16" = Just $ toSigned I.Int16 x
    handleSign [x] "sign_i32" = Just $ toSigned I.Int32 x
    handleSign [x] "sign_i64" = Just $ toSigned I.Int64 x
    handleSign [x] "unsign_i8" = Just $ toUnsigned I.Int8 x
    handleSign [x] "unsign_i16" = Just $ toUnsigned I.Int16 x
    handleSign [x] "unsign_i32" = Just $ toUnsigned I.Int32 x
    handleSign [x] "unsign_i64" = Just $ toUnsigned I.Int64 x
    handleSign _ _ = Nothing

    handleIntrinsicOps [x] s
      | Just unop &lt;- find ((== s) . pretty) allUnOps = Just $ \desc -> do
        x' &lt;- internaliseExp1 "x" x
        fmap pure $ letSubExp desc $ I.BasicOp $ I.UnOp unop x'
    handleIntrinsicOps [TupLit [x, y] _] s
      | Just bop &lt;- find ((== s) . pretty) allBinOps = Just $ \desc -> do
        x' &lt;- internaliseExp1 "x" x
        y' &lt;- internaliseExp1 "y" y
        fmap pure $ letSubExp desc $ I.BasicOp $ I.BinOp bop x' y'
      | Just cmp &lt;- find ((== s) . pretty) allCmpOps = Just $ \desc -> do
        x' &lt;- internaliseExp1 "x" x
        y' &lt;- internaliseExp1 "y" y
        fmap pure $ letSubExp desc $ I.BasicOp $ I.CmpOp cmp x' y'
    handleIntrinsicOps [x] s
      | Just conv &lt;- find ((== s) . pretty) allConvOps = Just $ \desc -> do
        x' &lt;- internaliseExp1 "x" x
        fmap pure $ letSubExp desc $ I.BasicOp $ I.ConvOp conv x'
    handleIntrinsicOps _ _ = Nothing

    -- Short-circuiting operators are magical.
    handleOps [x, y] "&amp;&amp;" = Just $ \desc ->
      internaliseExp desc $
        E.If x y (E.Literal (E.BoolValue False) mempty) (Info $ E.Scalar $ E.Prim E.Bool, Info []) mempty
    handleOps [x, y] "||" = Just $ \desc ->
      internaliseExp desc $
        E.If x (E.Literal (E.BoolValue True) mempty) y (Info $ E.Scalar $ E.Prim E.Bool, Info []) mempty
    -- Handle equality and inequality specially, to treat the case of
    -- arrays.
    handleOps [xe, ye] op
      | Just cmp_f &lt;- isEqlOp op = Just $ \desc -> do
        xe' &lt;- internaliseExp "x" xe
        ye' &lt;- internaliseExp "y" ye
        rs &lt;- zipWithM (doComparison desc) xe' ye'
        cmp_f desc =&lt;&lt; letSubExp "eq" =&lt;&lt; eAll rs
      where
        isEqlOp "!=" = Just $ \desc eq ->
          letTupExp' desc $ I.BasicOp $ I.UnOp I.Not eq
        isEqlOp "==" = Just $ \_ eq ->
          return [eq]
        isEqlOp _ = Nothing

        doComparison desc x y = do
          x_t &lt;- I.subExpType x
          y_t &lt;- I.subExpType y
          case x_t of
            I.Prim t -> letSubExp desc $ I.BasicOp $ I.CmpOp (I.CmpEq t) x y
            _ -> do
              let x_dims = I.arrayDims x_t
                  y_dims = I.arrayDims y_t
              dims_match &lt;- forM (zip x_dims y_dims) $ \(x_dim, y_dim) ->
                letSubExp "dim_eq" $ I.BasicOp $ I.CmpOp (I.CmpEq int32) x_dim y_dim
              shapes_match &lt;- letSubExp "shapes_match" =&lt;&lt; eAll dims_match
              compare_elems_body &lt;- runBodyBinder $ do
                -- Flatten both x and y.
                x_num_elems &lt;-
                  letSubExp "x_num_elems"
                    =&lt;&lt; foldBinOp (I.Mul Int32 I.OverflowUndef) (constant (1 :: Int32)) x_dims
                x' &lt;- letExp "x" $ I.BasicOp $ I.SubExp x
                y' &lt;- letExp "x" $ I.BasicOp $ I.SubExp y
                x_flat &lt;- letExp "x_flat" $ I.BasicOp $ I.Reshape [I.DimNew x_num_elems] x'
                y_flat &lt;- letExp "y_flat" $ I.BasicOp $ I.Reshape [I.DimNew x_num_elems] y'

                -- Compare the elements.
                cmp_lam &lt;- cmpOpLambda $ I.CmpEq (elemType x_t)
                cmps &lt;-
                  letExp "cmps" $
                    I.Op $
                      I.Screma x_num_elems (I.mapSOAC cmp_lam) [x_flat, y_flat]

                -- Check that all were equal.
                and_lam &lt;- binOpLambda I.LogAnd I.Bool
                reduce &lt;- I.reduceSOAC [Reduce Commutative and_lam [constant True]]
                all_equal &lt;- letSubExp "all_equal" $ I.Op $ I.Screma x_num_elems reduce [cmps]
                return $ resultBody [all_equal]

              letSubExp "arrays_equal" $
                I.If shapes_match compare_elems_body (resultBody [constant False]) $
                  ifCommon [I.Prim I.Bool]
    handleOps [x, y] name
      | Just bop &lt;- find ((name ==) . pretty) [minBound .. maxBound :: E.BinOp] =
        Just $ \desc -> do
          x' &lt;- internaliseExp1 "x" x
          y' &lt;- internaliseExp1 "y" y
          case (E.typeOf x, E.typeOf y) of
            (E.Scalar (E.Prim t1), E.Scalar (E.Prim t2)) ->
              internaliseBinOp loc desc bop x' y' t1 t2
            _ -> error "Futhark.Internalise.internaliseExp: non-primitive type in BinOp."
    handleOps _ _ = Nothing

    handleSOACs [TupLit [lam, arr] _] "map" = Just $ \desc -> do
      arr' &lt;- internaliseExpToVars "map_arr" arr
      lam' &lt;- internaliseMapLambda internaliseLambda lam $ map I.Var arr'
      w &lt;- arraysSize 0 &lt;$> mapM lookupType arr'
      letTupExp' desc $
        I.Op $
          I.Screma w (I.mapSOAC lam') arr'
    handleSOACs [TupLit [k, lam, arr] _] "partition" = do
      k' &lt;- fromIntegral &lt;$> fromInt32 k
      Just $ \_desc -> do
        arrs &lt;- internaliseExpToVars "partition_input" arr
        lam' &lt;- internalisePartitionLambda internaliseLambda k' lam $ map I.Var arrs
        uncurry (++) &lt;$> partitionWithSOACS k' lam' arrs
      where
        fromInt32 (Literal (SignedValue (Int32Value k')) _) = Just k'
        fromInt32 (IntLit k' (Info (E.Scalar (E.Prim (Signed Int32)))) _) = Just $ fromInteger k'
        fromInt32 _ = Nothing
    handleSOACs [TupLit [lam, ne, arr] _] "reduce" = Just $ \desc ->
      internaliseScanOrReduce desc "reduce" reduce (lam, ne, arr, loc)
      where
        reduce w red_lam nes arrs =
          I.Screma w
            &lt;$> I.reduceSOAC [Reduce Noncommutative red_lam nes] &lt;*> pure arrs
    handleSOACs [TupLit [lam, ne, arr] _] "reduce_comm" = Just $ \desc ->
      internaliseScanOrReduce desc "reduce" reduce (lam, ne, arr, loc)
      where
        reduce w red_lam nes arrs =
          I.Screma w
            &lt;$> I.reduceSOAC [Reduce Commutative red_lam nes] &lt;*> pure arrs
    handleSOACs [TupLit [lam, ne, arr] _] "scan" = Just $ \desc ->
      internaliseScanOrReduce desc "scan" reduce (lam, ne, arr, loc)
      where
        reduce w scan_lam nes arrs =
          I.Screma w &lt;$> I.scanSOAC [Scan scan_lam nes] &lt;*> pure arrs
    handleSOACs [TupLit [op, f, arr] _] "reduce_stream" = Just $ \desc ->
      internaliseStreamRed desc InOrder Noncommutative op f arr
    handleSOACs [TupLit [op, f, arr] _] "reduce_stream_per" = Just $ \desc ->
      internaliseStreamRed desc Disorder Commutative op f arr
    handleSOACs [TupLit [f, arr] _] "map_stream" = Just $ \desc ->
      internaliseStreamMap desc InOrder f arr
    handleSOACs [TupLit [f, arr] _] "map_stream_per" = Just $ \desc ->
      internaliseStreamMap desc Disorder f arr
    handleSOACs [TupLit [rf, dest, op, ne, buckets, img] _] "hist" = Just $ \desc ->
      internaliseHist desc rf dest op ne buckets img loc
    handleSOACs _ _ = Nothing

    handleRest [x] "!" = Just $ complementF x
    handleRest [x] "opaque" = Just $ \desc ->
      mapM (letSubExp desc . BasicOp . Opaque) =&lt;&lt; internaliseExp "opaque_arg" x
    handleRest [E.TupLit [a, si, v] _] "scatter" = Just $ scatterF a si v
    handleRest [E.TupLit [n, m, arr] _] "unflatten" = Just $ \desc -> do
      arrs &lt;- internaliseExpToVars "unflatten_arr" arr
      n' &lt;- internaliseExp1 "n" n
      m' &lt;- internaliseExp1 "m" m
      -- The unflattened dimension needs to have the same number of elements
      -- as the original dimension.
      old_dim &lt;- I.arraysSize 0 &lt;$> mapM lookupType arrs
      dim_ok &lt;-
        letSubExp "dim_ok"
          =&lt;&lt; eCmpOp
            (I.CmpEq I.int32)
            (eBinOp (I.Mul Int32 I.OverflowUndef) (eSubExp n') (eSubExp m'))
            (eSubExp old_dim)
      dim_ok_cert &lt;-
        assert
          "dim_ok_cert"
          dim_ok
          "new shape has different number of elements than old shape"
          loc
      certifying dim_ok_cert $
        forM arrs $ \arr' -> do
          arr_t &lt;- lookupType arr'
          letSubExp desc $
            I.BasicOp $
              I.Reshape (reshapeOuter [DimNew n', DimNew m'] 1 $ I.arrayShape arr_t) arr'
    handleRest [arr] "flatten" = Just $ \desc -> do
      arrs &lt;- internaliseExpToVars "flatten_arr" arr
      forM arrs $ \arr' -> do
        arr_t &lt;- lookupType arr'
        let n = arraySize 0 arr_t
            m = arraySize 1 arr_t
        k &lt;- letSubExp "flat_dim" $ I.BasicOp $ I.BinOp (Mul Int32 I.OverflowUndef) n m
        letSubExp desc $
          I.BasicOp $
            I.Reshape (reshapeOuter [DimNew k] 2 $ I.arrayShape arr_t) arr'
    handleRest [TupLit [x, y] _] "concat" = Just $ \desc -> do
      xs &lt;- internaliseExpToVars "concat_x" x
      ys &lt;- internaliseExpToVars "concat_y" y
      outer_size &lt;- arraysSize 0 &lt;$> mapM lookupType xs
      let sumdims xsize ysize =
            letSubExp "conc_tmp" $
              I.BasicOp $
                I.BinOp (I.Add I.Int32 I.OverflowUndef) xsize ysize
      ressize &lt;-
        foldM sumdims outer_size
          =&lt;&lt; mapM (fmap (arraysSize 0) . mapM lookupType) [ys]

      let conc xarr yarr =
            I.BasicOp $ I.Concat 0 xarr [yarr] ressize
      letSubExps desc $ zipWith conc xs ys
    handleRest [TupLit [offset, e] _] "rotate" = Just $ \desc -> do
      offset' &lt;- internaliseExp1 "rotation_offset" offset
      internaliseOperation desc e $ \v -> do
        r &lt;- I.arrayRank &lt;$> lookupType v
        let zero = intConst Int32 0
            offsets = offset' : replicate (r -1) zero
        return $ I.Rotate offsets v
    handleRest [e] "transpose" = Just $ \desc ->
      internaliseOperation desc e $ \v -> do
        r &lt;- I.arrayRank &lt;$> lookupType v
        return $ I.Rearrange ([1, 0] ++ [2 .. r -1]) v
    handleRest [TupLit [x, y] _] "zip" = Just $ \desc ->
      (++) &lt;$> internaliseExp (desc ++ "_zip_x") x
        &lt;*> internaliseExp (desc ++ "_zip_y") y
    handleRest [x] "unzip" = Just $ flip internaliseExp x
    handleRest [x] "trace" = Just $ flip internaliseExp x
    handleRest [x] "break" = Just $ flip internaliseExp x
    handleRest _ _ = Nothing

    toSigned int_to e desc = do
      e' &lt;- internaliseExp1 "trunc_arg" e
      case E.typeOf e of
        E.Scalar (E.Prim E.Bool) ->
          letTupExp' desc $
            I.If
              e'
              (resultBody [intConst int_to 1])
              (resultBody [intConst int_to 0])
              $ ifCommon [I.Prim $ I.IntType int_to]
        E.Scalar (E.Prim (E.Signed int_from)) ->
          letTupExp' desc $ I.BasicOp $ I.ConvOp (I.SExt int_from int_to) e'
        E.Scalar (E.Prim (E.Unsigned int_from)) ->
          letTupExp' desc $ I.BasicOp $ I.ConvOp (I.ZExt int_from int_to) e'
        E.Scalar (E.Prim (E.FloatType float_from)) ->
          letTupExp' desc $ I.BasicOp $ I.ConvOp (I.FPToSI float_from int_to) e'
        _ -> error "Futhark.Internalise: non-numeric type in ToSigned"

    toUnsigned int_to e desc = do
      e' &lt;- internaliseExp1 "trunc_arg" e
      case E.typeOf e of
        E.Scalar (E.Prim E.Bool) ->
          letTupExp' desc $
            I.If
              e'
              (resultBody [intConst int_to 1])
              (resultBody [intConst int_to 0])
              $ ifCommon [I.Prim $ I.IntType int_to]
        E.Scalar (E.Prim (E.Signed int_from)) ->
          letTupExp' desc $ I.BasicOp $ I.ConvOp (I.ZExt int_from int_to) e'
        E.Scalar (E.Prim (E.Unsigned int_from)) ->
          letTupExp' desc $ I.BasicOp $ I.ConvOp (I.ZExt int_from int_to) e'
        E.Scalar (E.Prim (E.FloatType float_from)) ->
          letTupExp' desc $ I.BasicOp $ I.ConvOp (I.FPToUI float_from int_to) e'
        _ -> error "Futhark.Internalise.internaliseExp: non-numeric type in ToUnsigned"

    complementF e desc = do
      e' &lt;- internaliseExp1 "complement_arg" e
      et &lt;- subExpType e'
      case et of
        I.Prim (I.IntType t) ->
          letTupExp' desc $ I.BasicOp $ I.UnOp (I.Complement t) e'
        I.Prim I.Bool ->
          letTupExp' desc $ I.BasicOp $ I.UnOp I.Not e'
        _ ->
          error "Futhark.Internalise.internaliseExp: non-int/bool type in Complement"

    scatterF a si v desc = do
      si' &lt;- letExp "write_si" . BasicOp . SubExp =&lt;&lt; internaliseExp1 "write_arg_i" si
      svs &lt;- internaliseExpToVars "write_arg_v" v
      sas &lt;- internaliseExpToVars "write_arg_a" a

      si_shape &lt;- I.arrayShape &lt;$> lookupType si'
      let si_w = shapeSize 0 si_shape
      sv_ts &lt;- mapM lookupType svs

      svs' &lt;- forM (zip svs sv_ts) $ \(sv, sv_t) -> do
        let sv_shape = I.arrayShape sv_t
            sv_w = arraySize 0 sv_t

        -- Generate an assertion and reshapes to ensure that sv and si' are the same
        -- size.
        cmp &lt;-
          letSubExp "write_cmp" $
            I.BasicOp $
              I.CmpOp (I.CmpEq I.int32) si_w sv_w
        c &lt;-
          assert
            "write_cert"
            cmp
            "length of index and value array does not match"
            loc
        certifying c $
          letExp (baseString sv ++ "_write_sv") $
            I.BasicOp $ I.Reshape (reshapeOuter [DimCoercion si_w] 1 sv_shape) sv

      indexType &lt;- rowType &lt;$> lookupType si'
      indexName &lt;- newVName "write_index"
      valueNames &lt;- replicateM (length sv_ts) $ newVName "write_value"

      sa_ts &lt;- mapM lookupType sas
      let bodyTypes = replicate (length sv_ts) indexType ++ map rowType sa_ts
          paramTypes = indexType : map rowType sv_ts
          bodyNames = indexName : valueNames
          bodyParams = zipWith I.Param bodyNames paramTypes

      -- This body is pretty boring right now, as every input is exactly the output.
      -- But it can get funky later on if fused with something else.
      body &lt;- localScope (scopeOfLParams bodyParams) $
        insertStmsM $ do
          let outs = replicate (length valueNames) indexName ++ valueNames
          results &lt;- forM outs $ \name ->
            letSubExp "write_res" $ I.BasicOp $ I.SubExp $ I.Var name
          ensureResultShape
            "scatter value has wrong size"
            loc
            bodyTypes
            $ resultBody results

      let lam =
            I.Lambda
              { I.lambdaParams = bodyParams,
                I.lambdaReturnType = bodyTypes,
                I.lambdaBody = body
              }
          sivs = si' : svs'

      let sa_ws = map (arraySize 0) sa_ts
      letTupExp' desc $ I.Op $ I.Scatter si_w lam sivs $ zip3 sa_ws (repeat 1) sas

funcall ::
  String ->
  QualName VName ->
  [SubExp] ->
  SrcLoc ->
  InternaliseM ([SubExp], [I.ExtType])
funcall desc (QualName _ fname) args loc = do
  (fname', closure, shapes, value_paramts, fun_params, rettype_fun) &lt;-
    lookupFunction fname
  argts &lt;- mapM subExpType args

  shapeargs &lt;- argShapes shapes fun_params argts
  let diets =
        replicate (length closure + length shapeargs) I.ObservePrim
          ++ map I.diet value_paramts
  args' &lt;-
    ensureArgShapes
      "function arguments of wrong shape"
      loc
      (map I.paramName fun_params)
      (map I.paramType fun_params)
      (map I.Var closure ++ shapeargs ++ args)
  argts' &lt;- mapM subExpType args'
  case rettype_fun $ zip args' argts' of
    Nothing ->
      error $
        "Cannot apply " ++ pretty fname ++ " to arguments\n "
          ++ pretty args'
          ++ "\nof types\n "
          ++ pretty argts'
          ++ "\nFunction has parameters\n "
          ++ pretty fun_params
    Just ts -> do
      safety &lt;- askSafety
      attrs &lt;- asks envAttrs
      ses &lt;-
        attributing attrs $
          letTupExp' desc $
            I.Apply fname' (zip args' diets) ts (safety, loc, mempty)
      return (ses, map I.fromDecl ts)

-- Bind existential names defined by an expression, based on the
-- concrete values that expression evaluated to.  This most
-- importantly should be done after function calls, but also
-- everything else that can produce existentials in the source
-- language.
bindExtSizes :: E.StructType -> [VName] -> [SubExp] -> InternaliseM ()
bindExtSizes ret retext ses = do
  ts &lt;- internaliseType ret
  ses_ts &lt;- mapM subExpType ses

  let combine t1 t2 =
        mconcat $ zipWith combine' (arrayExtDims t1) (arrayDims t2)
      combine' (I.Free (I.Var v)) se
        | v `elem` retext = M.singleton v se
      combine' _ _ = mempty

  forM_ (M.toList $ mconcat $ zipWith combine ts ses_ts) $ \(v, se) ->
    letBindNames [v] $ BasicOp $ SubExp se

askSafety :: InternaliseM Safety
askSafety = do
  check &lt;- asks envDoBoundsChecks
  return $ if check then I.Safe else I.Unsafe

-- Implement partitioning using maps, scans and writes.
partitionWithSOACS :: Int -> I.Lambda -> [I.VName] -> InternaliseM ([I.SubExp], [I.SubExp])
partitionWithSOACS k lam arrs = do
  arr_ts &lt;- mapM lookupType arrs
  let w = arraysSize 0 arr_ts
  classes_and_increments &lt;- letTupExp "increments" $ I.Op $ I.Screma w (mapSOAC lam) arrs
  (classes, increments) &lt;- case classes_and_increments of
    classes : increments -> return (classes, take k increments)
    _ -> error "partitionWithSOACS"

  add_lam_x_params &lt;-
    replicateM k $ I.Param &lt;$> newVName "x" &lt;*> pure (I.Prim int32)
  add_lam_y_params &lt;-
    replicateM k $ I.Param &lt;$> newVName "y" &lt;*> pure (I.Prim int32)
  add_lam_body &lt;- runBodyBinder $
    localScope (scopeOfLParams $ add_lam_x_params ++ add_lam_y_params) $
      fmap resultBody $
        forM (zip add_lam_x_params add_lam_y_params) $ \(x, y) ->
          letSubExp "z" $
            I.BasicOp $
              I.BinOp
                (I.Add Int32 I.OverflowUndef)
                (I.Var $ I.paramName x)
                (I.Var $ I.paramName y)
  let add_lam =
        I.Lambda
          { I.lambdaBody = add_lam_body,
            I.lambdaParams = add_lam_x_params ++ add_lam_y_params,
            I.lambdaReturnType = replicate k $ I.Prim int32
          }
      nes = replicate (length increments) $ constant (0 :: Int32)

  scan &lt;- I.scanSOAC [I.Scan add_lam nes]
  all_offsets &lt;- letTupExp "offsets" $ I.Op $ I.Screma w scan increments

  -- We have the offsets for each of the partitions, but we also need
  -- the total sizes, which are the last elements in the offests.  We
  -- just have to be careful in case the array is empty.
  last_index &lt;- letSubExp "last_index" $ I.BasicOp $ I.BinOp (I.Sub Int32 OverflowUndef) w $ constant (1 :: Int32)
  nonempty_body &lt;- runBodyBinder $
    fmap resultBody $
      forM all_offsets $ \offset_array ->
        letSubExp "last_offset" $ I.BasicOp $ I.Index offset_array [I.DimFix last_index]
  let empty_body = resultBody $ replicate k $ constant (0 :: Int32)
  is_empty &lt;- letSubExp "is_empty" $ I.BasicOp $ I.CmpOp (CmpEq int32) w $ constant (0 :: Int32)
  sizes &lt;-
    letTupExp "partition_size" $
      I.If is_empty empty_body nonempty_body $
        ifCommon $ replicate k $ I.Prim int32

  -- The total size of all partitions must necessarily be equal to the
  -- size of the input array.

  -- Create scratch arrays for the result.
  blanks &lt;- forM arr_ts $ \arr_t ->
    letExp "partition_dest" $
      I.BasicOp $
        Scratch (elemType arr_t) (w : drop 1 (I.arrayDims arr_t))

  -- Now write into the result.
  write_lam &lt;- do
    c_param &lt;- I.Param &lt;$> newVName "c" &lt;*> pure (I.Prim int32)
    offset_params &lt;- replicateM k $ I.Param &lt;$> newVName "offset" &lt;*> pure (I.Prim int32)
    value_params &lt;- forM arr_ts $ \arr_t ->
      I.Param &lt;$> newVName "v" &lt;*> pure (I.rowType arr_t)
    (offset, offset_stms) &lt;-
      collectStms $
        mkOffsetLambdaBody
          (map I.Var sizes)
          (I.Var $ I.paramName c_param)
          0
          offset_params
    return
      I.Lambda
        { I.lambdaParams = c_param : offset_params ++ value_params,
          I.lambdaReturnType =
            replicate (length arr_ts) (I.Prim int32)
              ++ map I.rowType arr_ts,
          I.lambdaBody =
            mkBody offset_stms $
              replicate (length arr_ts) offset
                ++ map (I.Var . I.paramName) value_params
        }
  results &lt;-
    letTupExp "partition_res" $
      I.Op $
        I.Scatter
          w
          write_lam
          (classes : all_offsets ++ arrs)
          $ zip3 (repeat w) (repeat 1) blanks
  sizes' &lt;-
    letSubExp "partition_sizes" $
      I.BasicOp $
        I.ArrayLit (map I.Var sizes) $ I.Prim int32
  return (map I.Var results, [sizes'])
  where
    mkOffsetLambdaBody ::
      [SubExp] ->
      SubExp ->
      Int ->
      [I.LParam] ->
      InternaliseM SubExp
    mkOffsetLambdaBody _ _ _ [] =
      return $ constant (-1 :: Int32)
    mkOffsetLambdaBody sizes c i (p : ps) = do
      is_this_one &lt;-
        letSubExp "is_this_one" $
          I.BasicOp $
            I.CmpOp (CmpEq int32) c $
              intConst Int32 $ toInteger i
      next_one &lt;- mkOffsetLambdaBody sizes c (i + 1) ps
      this_one &lt;-
        letSubExp "this_offset"
          =&lt;&lt; foldBinOp
            (Add Int32 OverflowUndef)
            (constant (-1 :: Int32))
            (I.Var (I.paramName p) : take i sizes)
      letSubExp "total_res" $
        I.If
          is_this_one
          (resultBody [this_one])
          (resultBody [next_one])
          $ ifCommon [I.Prim int32]

typeExpForError :: E.TypeExp VName -> InternaliseM [ErrorMsgPart SubExp]
typeExpForError (E.TEVar qn _) =
  return [ErrorString $ pretty qn]
typeExpForError (E.TEUnique te _) =
  ("*" :) &lt;$> typeExpForError te
typeExpForError (E.TEArray te d _) = do
  d' &lt;- dimExpForError d
  te' &lt;- typeExpForError te
  return $ ["[", d', "]"] ++ te'
typeExpForError (E.TETuple tes _) = do
  tes' &lt;- mapM typeExpForError tes
  return $ ["("] ++ intercalate [", "] tes' ++ [")"]
typeExpForError (E.TERecord fields _) = do
  fields' &lt;- mapM onField fields
  return $ ["{"] ++ intercalate [", "] fields' ++ ["}"]
  where
    onField (k, te) =
      (ErrorString (pretty k ++ ": ") :) &lt;$> typeExpForError te
typeExpForError (E.TEArrow _ t1 t2 _) = do
  t1' &lt;- typeExpForError t1
  t2' &lt;- typeExpForError t2
  return $ t1' ++ [" -> "] ++ t2'
typeExpForError (E.TEApply t arg _) = do
  t' &lt;- typeExpForError t
  arg' &lt;- case arg of
    TypeArgExpType argt -> typeExpForError argt
    TypeArgExpDim d _ -> pure &lt;$> dimExpForError d
  return $ t' ++ [" "] ++ arg'
typeExpForError (E.TESum cs _) = do
  cs' &lt;- mapM (onClause . snd) cs
  return $ intercalate [" | "] cs'
  where
    onClause c = do
      c' &lt;- mapM typeExpForError c
      return $ intercalate [" "] c'

dimExpForError :: E.DimExp VName -> InternaliseM (ErrorMsgPart SubExp)
dimExpForError (DimExpNamed d _) = do
  substs &lt;- lookupSubst $ E.qualLeaf d
  d' &lt;- case substs of
    Just [v] -> return v
    _ -> return $ I.Var $ E.qualLeaf d
  return $ ErrorInt32 d'
dimExpForError (DimExpConst d _) =
  return $ ErrorString $ pretty d
dimExpForError DimExpAny = return ""

-- A smart constructor that compacts neighbouring literals for easier
-- reading in the IR.
errorMsg :: [ErrorMsgPart a] -> ErrorMsg a
errorMsg = ErrorMsg . compact
  where
    compact [] = []
    compact (ErrorString x : ErrorString y : parts) =
      compact (ErrorString (x ++ y) : parts)
    compact (x : y) = x : compact y
</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="10"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">A new book has been published on Hindi movie music, called "Gaata Rahe Mera Dil". It is written by Anirudha Bhattacharjee and Balaji Vittal, who had earlier written a book called "R D Burman- the man and the music".

The book discusss 50 classic songs from the history of Hindi movies. The oldest song is from" Street Singer" ( 1937) sung by K L Saigal. The latest is "Ae ajnabi tu bhi kabhi" (Dil Se). The 300 page book published by Harper Collins discusses the history and other information behind the making of the songs.

This book is getting good reviews. Unfortunately this book is not available in small towns (I am a small town person living in a small town). From the review of this book as well as from what I read in the earlier book on R D Burman, I find that the "Technical" details that the authors discuss about the songs is nothing but bullcrap. Here is what the authors say about the "Dosti" (1964) song- Mera toh jo bhi kadam hai.

The composers use two Komal notes—Dha and Ni—in the mukhra where all the other five shudh notes give the song a major-scale colour. The antara, with the emphasis shifting to a Komal Re, creates the transitory feel of a change in scale. The use of Komal notes—the Ga and Ni—creates an aura of unconventiality and underlines the desolate cry of grief…”

I feel that the above "technical" discussion makes no sense whatsoever. I request SL, our technical guru, to tell us what he thinks of the above comment on the song. S L, if you can get hold of this book, please give us your review of this book.

Will do. FIrst I am unable to recollect this song. Have to hear it.The book I will have to order over amazon I guess given I am in a smaller town than what you are in.. I certainly will do the prelims as far as this song is concerned. The extract you have given itself is sort of iffy there..

My preliminary thoughts. First off, this song is in rag Yaman Kalayan. Mood for this raga is "serene" and "haunting" (depending on the rendition) but I would not necessarily call it grief.. a more appropriate word would be feeling lost, or feeling of longing but not grief.

The "haunting" nature comes from the mM (yes mM and not M) rather than anything else which makes in yaman kalyan instead of pure yaman (which would have a "M" instead. ). Compare that to Koi jab tumhara hriday tod de, tadapta hua jab koi chod de.. (Kalyan) which is again 'haunting' not sad.. I think the author intended to use the term melancholous instead of "sad" as in tragic or rondu as we would say in hindi.

(cos of my leg, I cannot really play my KB right now (position of the foot pedals pls the distance were the KB will have to be cos of my leg and my back posture etc, and so cannot really "judge" by ear alone the impact of the komal dha and ni as the author suggests.. so I will not say they are wrong but my priliminary thought suggest the mM being more uumphaatic than anything else.)

m=Pure maM=Dirgh/tivra Ma (ma does not have a komal).

(Note: Modern musicians consider Yaman, Kalyan (carnatic eq Kalyani) and Yaman-kalyan as one and the same but traditionalists consider them three distinct ragas).

Also given it is Yaman-Kalyan (I am 100% certain) there is no room for any kind of komal dha or ni there!! where did the author hear that is a big question for me. The raga has all shuddha swars except for the tivra Ma!

BTW kalyan can be romantic and very at that. Yaad rahega payaar ka ye, rangeen zamaana yaad rahega. While songs like Tasvir Banaata Hun, Tasvir Nahin Banati are in raag pahaadi) are extremely haunting.. so it is more of the lyrics plus progression rather than the scale that gives the "feel" even though the notes have about 50% contribution. In some cases, it can be complete opposite feel.. same raga..eg Nache Man Mora Magan Dhig Dha Dhigi Dhigi (Bhairavi) vs Mujhko is raat ki tanhahi mein aawaaz na do... or Tera jaana dil ke armanon ka (both bhairavi again).

(I know raja pai would have my pants off if not for this disclaimer!! He knows his music stuff).

Thanks for your prompt impromptu technical review. And what about the authors going technobabble viz. "... give the song a major-scale colour." There is not concept of major scale or its equivalent in Hindustani classical music. We have "raag" in Hindustani classical music instead. And also "....creates the transitory feel of a change in scale. " Do they mean anything whatsoever, or they are supposed to impress the ignorants.

Honestly I have never come across such jargon ever. Trasitionary nature basically means nothing.. there is no such thing. You change scales as in a ragamalika but what exactly a transitionary nature of a scale is foreign to me. And another thing, the major and minor "nature" of a scale is determined by its aroha avaroha progression (pakad) and not by gamaks at all. I am not sure I understand that piece of gobledygook at all.

And another point.. Major scale usually signifies (in western jargon), an upbeat song.. like lungi dance lungi dance.. the one that gets your blood pumping and a minor scale is more serene, romatic and all those soft feel (hotel california).. so how can a minor scale impart a Major scale color is beyond my technical know how.

I editied a few posts above for accuracy (I type as thoughts come to me). Change of raga or mix of them is raga malika. But shift of scales does not change the raga or the feel.. for instance Jai ho.. in the ending crescendo, the scale shifts up by half a note but the ENTIRE progression shifts up. It only adds the "fervor" part or emphasis to the feel.. like say from fan to a die hard fan kinds... same is there in the MJ number man in the mirror in the ending stages.

One can argue that it might shift moods.. like in case of "pyarr hamen kis mod pe le aaya ke dil kare hai, koi ye bataye kyaa hoga".. when it becomes a fast dance number in the end.. but notice it starts out as a COMICAL/frivolous/chewtiyaagiri song at the outset (only pretending to be a sad song).. and becomes ultra comic by the end (movie satte pe satta).

The authors were expecting that people will not question all this technobabble rather get "impressed" by it. I suspect that they have come up with similar "technical" analysis in case of all the 50 songs that they have discussed in the book. That should make it a very interesting read, though not in a manner that the authors intended.

peaceful wrote:Can you teach me how to download only one song from you tube? Because when I post certain song, others already open on right hand side.I want to learn more.I heard you are my technical gurus.

Yes SC, it would be fun to see their treatment of rather esoteric ragas like bilaval, asavari etc.. those are dyamic and the most dynamic (Strictly in my opinion) is malkauns. I think they will use rather quixotic phrases.. like blanket ones to suggest something very exotic but then would not really be saying anything... I love such highly educational pieces

A review of this book was posted in a blog by someone who is my facebook friend as well as the facebook friend of the author of this book. I have questioned the "technical" analysis of this song as mentioned in the review. The author refused to accept that the song is in Yaman Kalyan. Please have a look at the vehement denial by the author in his comments in this post:

Well then what raga is it based on? I am willing to be proven wrong but with my limited and rusty knowledge, I am almost willing to bet a bit that it is YAMAN KALYAN. what else is that? I cannot think of any other raga that it may belong to.

Also the argument "Tonic does not change" hmm.. what does he mean by that? Modulation or something else

See, ragas are based on notes and both komal and shuddh and teevra are notes by their own right. Changing from the shudh to komal or dirga, usually will NOT change the tonic (And note tonic can be loosely termed as vadi in hindustani).. modulation is a tonic shift and that also is not quite the same as a raga jump... instances of that happen all the time with NO shift in raga at all (abrupt in kind) (Mozarts K160). But lets not get into all that. I think the authors want a reasonable book to sell.. Let them. Why pee in their party man. People will read it with passing facination, remember some old songs, feel educated and they get some money..all is well.. no harm done.

Intrsting. I will have to play it to confirm then. Patdeep ka ek gaana hai megha chaye aadhi raat baran ban gayi niniyaa.. trying to hum those together does not give me the feel.. I will have to play it on the kb to be sure. I am still going to stick to yaman kalyan for the interim (apne aap ko wrong bolne me sharm aata hai naa khud ko..).

Madhuvanti mein even if not a good example I can think of only one song and that is way obscure one.. Rasm-e-Ulfat Ko Nibhaen To Nibhaen Kaise from movie Dil Ki Rahen

and hindustani/carnatic music is an ocean.. I got trained for a few years and that in a mixed martial arts style.. a little boxing and karate and taikwando thrown in.. i.e hindustani, carnatic and western theory.. so it is impossible that I will be an "expert" to know all the ragas out there and recognize them(jack of all perhaps but master not at all ). There are tons of ragas that I might not even heard or or styles there of.. It is highly possible that I am wrong here but my gut feel stll leans towards yaman-kalyan or its variant. But I will not say now that it is a 100% sure case as I did earlier. Ab your other friend has firmly planted that doubt in my bird brain.

Yaar re to hai aaroha mein.. which both patdeep and madhuvanti do not have as far as I can recall! Jara confirm karoge from your friend? But hindi movies do not conform to the rules of classical music strictly. So vo bhi ek locha hai.</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="11"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">Predictors of neurobehavioral symptoms in a university population: a multivariate approach using a postconcussive symptom questionnaire.
Several factors have been linked to severity of postconcussive-type (neurobehavioral) symptoms. In this study, predictors of neurobehavioral symptoms were examined using multivariate methods to determine the relative importance of each. Data regarding demographics, symptoms, current alcohol use, history of traumatic brain injury (TBI), orthopedic injuries, and psychiatric/developmental diagnoses were collected via questionnaire from 3027 university students. The most prominent predictors of symptoms were gender, history of depression or anxiety, history of attention-deficit/hyperactivity disorder or learning disability diagnosis, and frequency of alcohol use. Prior mild TBI was significantly related to overall symptoms, but this effect was small in comparison to other predictors. These results provide further evidence that neurobehavioral symptoms are multi-determined phenomena, and highlight the importance of psychiatric comorbidity, demographic factors, and health behaviors to neurobehavioral symptom presentation after mild TBI.</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="12"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">The Difficult Crossing

The Difficult Crossing (La traversée difficile) is the name given to two oil-on-canvas paintings by the Belgian surrealist René Magritte. The original version was completed in 1926 during Magritte's early prolific years of surrealism and is currently held in a private collection. A later version was completed in 1963 and is also held in a private collection.

The 1926 version 

The 1926 version contains a number of curious elements, some of which are common to many of Magritte's works.

The bilboquet or baluster (the object which looks like the bishop from a chess set) first appears in the painting The Lost Jockey (1926). In this and some other works—for example The Secret Player (1927) and The Art of Conversation (1961)—the bilboquet seems to play an inanimate role analogous to a tree or plant. In other instances, such as here with The Difficult Crossing, the bilboquet is given the anthropomorphic feature of a single eye.

Another common feature of Magritte's works seen here is the ambiguity between windows and paintings. The back of the room shows a boat in a thunderstorm, but the viewer is left to wonder if the depiction is a painting or the view out a window. Magritte elevated the idea to another level in his series of works based on The Human Condition where "outdoor" paintings and windows both appear and even overlap.

Near the bilboquet stands a table. On the top, a disembodied hand is holding a red bird, as if clutching it. The front right leg of the table resembles a human leg.

The 1963 version 

In the 1963 version, a number of elements have changed or disappeared. Instead of taking place in a room, the action has moved outside. There is no table or hand clutching a bird and the scene of the rough sea in the ambiguous window/painting at the rear becomes the entire new background. Near the front a low brick wall is seen with a bilboquet behind and a suited figure with an eyeball for a head in front.

There is ambiguity as to whether the suited figure is a man or another bilboquet. Some bilboquet figures, for example those in The Encounter (1929), have similar eyeball heads, however the suit covers the body and no clear identification can be made. If the suited figure is a man, it could be a self-portrait, which means that the eyeball is covering his face. Covering Magritte's face with an object was another common theme for himself, Son of Man being a good example.

Relation to other paintings 

Both versions of The Difficult Crossing show a strong similarity to Magritte's painting The Birth of the Idol, also from 1926. The scene is outside and depicts a rough sea in the background (this time without ship). Objects which appear include a bilboquet (the non-anthropomorphic variety), a mannequin arm (similar to the hand which clutches the bird) and a wooden board with window-like holes cut out which is nearly identical to those flanking both sides of the room in earlier version.

All three paintings may have been inspired by Giorgio de Chirico's Metaphysical Interior (1916) which features a room with a number of strange objects and an ambiguous window/painting showing a boat. Magritte was certainly aware of De Chirico's work and was emotionally moved by his first viewing of a reproduction of Song of Love (1913–14).

References 

Category:Paintings by René Magritte
Category:Surrealist paintings
Category:1926 paintings
Category:1963 paintings
Category:Maritime paintings</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="13"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">God’s 4 Signs to Moses: The Staff That Turned into a Serpent

The LORD said to him, “What is that in your hand?” And he said, “A staff.” Then He said, “Throw it on the ground.” So he threw it on the ground, and it became a serpent; and Moses fled from it. But the LORD said to Moses, “Stretch out your hand and grasp it by its tail”—so he stretched out his hand and caught it, and it became a staff in his hand… – Exodus 4:2-4

Oh Father, our heavenly Father, wash us in the blood of Your Son again today. Let us come to you with a clean conscious. Wash us in the Water of your Word. Open the eyes of our hearts to see Christ, receive Christ, and enjoy Christ. In Jesus’ Name, which is above all names, Amen!

In Egypt, Moses had the highest education and was skilled in speech (Acts 7:22). When the Lord came to give Moses the revelation that He would free the Israelites, Moses tried to achieve the Lord’s will in his own strength and ended up killing an Egyptian. Trying in his own strength, just led to death.

The Lord took Moses through 40 years of death in the wilderness. Moses was a broken man when the Lord appeared to him again. Moses could no longer speak well (Exodus 4:10) and he needed a staff for walking.

We all have many staffs that we rely on. Every earthly thing that you rely on for your daily living is a staff. Your career is a staff. Your education is a staff. Your news is a staff. Your hobby is a staff. Your caffeine is a staff. Your sweets are a staff. Your family is a staff. Your car is a staff. Your intellect is a staff. Your emotions are a staff. Your television is a staff. Your video games are a staff. Your internet is a staff.

There is no Life in these staffs. These staffs are dead wood. When Moses threw his staff down it became a serpent. Not only is your staff dead, but it is also a serpent.

Whatever you rely on, other than the Lord, becomes a serpent.

Your staffs must be thrown down and put to death. Only then, by the Lord’s command, can you grasp the serpent by the tail, and lift the staff up in resurrection.

Don’t abandon your family. Don’t set up a law in your heart on what you may eat or drink. But turn to the Lord, beholding Him and giving Him your ear. Give everything that you rely on to Him and let Him give you back what you need in resurrection.

In resurrection, you are no longer reliant upon the staff, you are reliant on God alone.

Father, we cast our staffs down before you. Open our eyes to see the things that your enemy uses to usurp your rightful throne in our hearts. You provide everything we need as we seek Your Kingdom and Your Righteousness first. Let us grasp the enemy by the tail in Your Resurrection Life, that we may be overcomers in Your Victory. In Jesus’ Name, Amen.

1

If I’d know Christ’s risen power.
I must ever love the Cross;
Life from death alone arises;
There’s no gain except by loss.

Chorus

If no death, no life,
If no death, no life;
Life from death alone arises;
If no death, no life.

2

If I’d have Christ formed within me,
I must breathe my final breath,
Live within the Cross’s shadow,
Put my soul-life e’er to death.

3

If God thru th’ Eternal Spirit
Nail me ever with the Lord;
Only then as death is working
Will His life thru me be poured.</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="14"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class=""># -*- coding: utf-8 -*-

from ... import OratorTestCase
from orator import Model as BaseModel
from orator.orm import (
    morph_to,
    has_one,
    has_many,
    belongs_to_many,
    morph_many,
    belongs_to,
)
from orator.orm.model import ModelRegister
from orator.connections import SQLiteConnection
from orator.connectors.sqlite_connector import SQLiteConnector


class DecoratorsTestCase(OratorTestCase):
    @classmethod
    def setUpClass(cls):
        Model.set_connection_resolver(DatabaseIntegrationConnectionResolver())

    @classmethod
    def tearDownClass(cls):
        Model.unset_connection_resolver()

    def setUp(self):
        with self.schema().create("test_users") as table:
            table.increments("id")
            table.string("email").unique()
            table.timestamps()

        with self.schema().create("test_friends") as table:
            table.increments("id")
            table.integer("user_id")
            table.integer("friend_id")

        with self.schema().create("test_posts") as table:
            table.increments("id")
            table.integer("user_id")
            table.string("name")
            table.timestamps()
            table.soft_deletes()

        with self.schema().create("test_photos") as table:
            table.increments("id")
            table.morphs("imageable")
            table.string("name")
            table.timestamps()

    def tearDown(self):
        self.schema().drop("test_users")
        self.schema().drop("test_friends")
        self.schema().drop("test_posts")
        self.schema().drop("test_photos")

    def test_extra_queries_are_properly_set_on_relations(self):
        self.create()

        # With eager loading
        user = OratorTestUser.with_("friends", "posts", "post", "photos").find(1)
        post = OratorTestPost.with_("user", "photos").find(1)
        self.assertEqual(1, len(user.friends))
        self.assertEqual(2, len(user.posts))
        self.assertIsInstance(user.post, OratorTestPost)
        self.assertEqual(3, len(user.photos))
        self.assertIsInstance(post.user, OratorTestUser)
        self.assertEqual(2, len(post.photos))
        self.assertEqual(
            'SELECT * FROM "test_users" INNER JOIN "test_friends" ON "test_users"."id" = "test_friends"."friend_id" '
            'WHERE "test_friends"."user_id" = ? ORDER BY "friend_id" ASC',
            user.friends().to_sql(),
        )
        self.assertEqual(
            'SELECT * FROM "test_posts" WHERE "deleted_at" IS NULL AND "test_posts"."user_id" = ?',
            user.posts().to_sql(),
        )
        self.assertEqual(
            'SELECT * FROM "test_posts" WHERE "test_posts"."user_id" = ? ORDER BY "name" DESC',
            user.post().to_sql(),
        )
        self.assertEqual(
            'SELECT * FROM "test_photos" WHERE "name" IS NOT NULL AND "test_photos"."imageable_id" = ? AND "test_photos"."imageable_type" = ?',
            user.photos().to_sql(),
        )
        self.assertEqual(
            'SELECT * FROM "test_users" WHERE "test_users"."id" = ? ORDER BY "id" ASC',
            post.user().to_sql(),
        )
        self.assertEqual(
            'SELECT * FROM "test_photos" WHERE "test_photos"."imageable_id" = ? AND "test_photos"."imageable_type" = ?',
            post.photos().to_sql(),
        )

        # Without eager loading
        user = OratorTestUser.find(1)
        post = OratorTestPost.find(1)
        self.assertEqual(1, len(user.friends))
        self.assertEqual(2, len(user.posts))
        self.assertIsInstance(user.post, OratorTestPost)
        self.assertEqual(3, len(user.photos))
        self.assertIsInstance(post.user, OratorTestUser)
        self.assertEqual(2, len(post.photos))
        self.assertEqual(
            'SELECT * FROM "test_users" INNER JOIN "test_friends" ON "test_users"."id" = "test_friends"."friend_id" '
            'WHERE "test_friends"."user_id" = ? ORDER BY "friend_id" ASC',
            user.friends().to_sql(),
        )
        self.assertEqual(
            'SELECT * FROM "test_posts" WHERE "deleted_at" IS NULL AND "test_posts"."user_id" = ?',
            user.posts().to_sql(),
        )
        self.assertEqual(
            'SELECT * FROM "test_posts" WHERE "test_posts"."user_id" = ? ORDER BY "name" DESC',
            user.post().to_sql(),
        )
        self.assertEqual(
            'SELECT * FROM "test_photos" WHERE "name" IS NOT NULL AND "test_photos"."imageable_id" = ? AND "test_photos"."imageable_type" = ?',
            user.photos().to_sql(),
        )
        self.assertEqual(
            'SELECT * FROM "test_users" WHERE "test_users"."id" = ? ORDER BY "id" ASC',
            post.user().to_sql(),
        )
        self.assertEqual(
            'SELECT * FROM "test_photos" WHERE "test_photos"."imageable_id" = ? AND "test_photos"."imageable_type" = ?',
            post.photos().to_sql(),
        )

        self.assertEqual(
            'SELECT DISTINCT * FROM "test_posts" WHERE "deleted_at" IS NULL AND "test_posts"."user_id" = ? ORDER BY "user_id" ASC',
            user.posts().order_by("user_id").distinct().to_sql(),
        )

    def create(self):
        user = OratorTestUser.create(id=1, email="john@doe.com")
        friend = OratorTestUser.create(id=2, email="jane@doe.com")
        user.friends().attach(friend)

        post1 = user.posts().create(name="First Post")
        post2 = user.posts().create(name="Second Post")

        user.photos().create(name="Avatar 1")
        user.photos().create(name="Avatar 2")
        user.photos().create(name="Avatar 3")

        post1.photos().create(name="Hero 1")
        post1.photos().create(name="Hero 2")

    def connection(self):
        return Model.get_connection_resolver().connection()

    def schema(self):
        return self.connection().get_schema_builder()


class Model(BaseModel):

    _register = ModelRegister()


class OratorTestUser(Model):

    __table__ = "test_users"
    __guarded__ = []

    @belongs_to_many("test_friends", "user_id", "friend_id", with_pivot=["id"])
    def friends(self):
        return OratorTestUser.order_by("friend_id")

    @has_many("user_id")
    def posts(self):
        return OratorTestPost.where_null("deleted_at")

    @has_one("user_id")
    def post(self):
        return OratorTestPost.order_by("name", "desc")

    @morph_many("imageable")
    def photos(self):
        return OratorTestPhoto.where_not_null("name")


class OratorTestPost(Model):

    __table__ = "test_posts"
    __guarded__ = []

    @belongs_to("user_id")
    def user(self):
        return OratorTestUser.order_by("id")

    @morph_many("imageable")
    def photos(self):
        return "test_photos"


class OratorTestPhoto(Model):

    __table__ = "test_photos"
    __guarded__ = []

    @morph_to
    def imageable(self):
        return


class DatabaseIntegrationConnectionResolver(object):

    _connection = None

    def connection(self, name=None):
        if self._connection:
            return self._connection

        self._connection = SQLiteConnection(
            SQLiteConnector().connect({"database": ":memory:"})
        )

        return self._connection

    def get_default_connection(self):
        return "default"

    def set_default_connection(self, name):
        pass
</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="15"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">Saturday, May 30, 2009

On solid grounds: Campground owners hope that spending on improvements pays off with more visitors in slumping economy

From the Wisconsin State Journal

By Marv Balousek

While some businesses may be making cutbacks because of the recession, Wisconsin's private campground owners have been spending money to make their properties more attractive to prospective customers this year.

They've invested hundreds of thousands of dollars to improve their facilities even without the benefit of federal stimulus dollars.

The owners expect to cash in as families scale back their Disney World plans this summer in favor of less-expensive weekend camping trips. Reservations are up this year for the 16-week season that began on Memorial Day weekend, according to two Wisconsin campground owners.

"Camping, even in stressful times, can be the outdoor activity of choice,"said Bud Styer, who operates five Wisconsin campgrounds. "People with families especially are still going to recreate and they're going to do something with their kids."

Styer said he is spending $565,000 this year at his five campgrounds and expects to recoup that investment in three to five years through camping fees.

He's spent money on things such as a Jumping Pillow for Baraboo Hills Campground north of Baraboo, blacktop for a circle around the pond at Merry Mac's Campground near Merrimac and a remodeled camp store at River Bend Campground, which he manages but doesn't own, west of Watertown.

River Bend, which features a 300-foot water slide, was closed last summer because of extensive flooding when the Crawfish River overflowed its banks. It didn't reopen until August. Styer said the campground had to be cleaned before improvements were made.

He also has upgraded Smokey Hollow Campground near Lodi and Tilleda Falls Campground west of Shawano.

Water-related features such as Water Wars -- a competition with water balloons -- or floating water slides and climbing walls are popular improvements at many parks.

"Years ago, we camped in a Coleman tent with a kerosene lantern," Styer said. "Nowadays, everybody's got to have electric, water, box fans and rope lights."

Styer said he's a great believer in "stuff" and that the more stuff you have, the more you can charge for campsites. A private Wisconsin campground with amenities can charge $39 to $50 a night, he said, compared to $25 to $35 a night for a standard campground.

"If you want to expand your business and generate additional revenues, then you have to have a better facility,"he said. "It has to have the bells and whistles. People are going to camp closer to home and look for the best value."

Upgrading campground facilities this year is a national trend, said Linda Pfofaizer, president of the National Association of RV Parks and Campgrounds in Larkspur, Colo. The association represents 8,000 private campground owners.

Although the investments could benefit them this summer, she said, most campground owners also are looking beyond the recession,

"The recession is temporary," she said. "Most campground and RV park operators believe that it behooves them to move forward with their improvement plans to remain competitive with other travel and tourism options."

"We try to keep adding what the customers are asking for," he said. "A few years ago, during a downturn, there were many people who didn't travel West or take a large vacation, and we're seeing that again."

At Fox Hill RV Park south of Wisconsin Dells near Ho Chunk Casino, roads have been repaved with recycled asphalt, the pool was retiled, the bath house was remodeled and a disc golf course was added, said owner Jim Tracy.

He said the overall construction slowdown helped him negotiate a good deal on the bath house remodeling.

"I'm still pretty bullish on the summer," Tracy said. "I want to give (campers) reasons to come back and talk me up to their friends and families."

Bud Styer Media

Bud Styer, left, and Keith Stachurski, manager of Smokey Hollow Campground near Lodi, confer at a beach area of the campground. Styer has invested $565,000 this year in improvements at the five campgrounds he operates.

Zachary Zirbel cuts the grass at Smokey Hollow Campground as he prepares the sites for another influx of weekend campers.

Stachurski patrols Smokey Hollow on a Segway, a small electric vehicle. He also offers riding lessons to campers. The red structure behind him is used for Spaceball, a game that combines the skills of trampoline and basketball.

Furnished conastoga wagons and beachfront yurts are among the camping options at Smokey Hollow Campground near Lodi.

Children play on a Jumping Pillow at Chetek River Campground near Chetek, north of Eau Claire.

A row of furnished yurts, or circular tents, is another camping option at Merry Mac's Campground in Merrimac.</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="16"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">Q:

Drag and drop in jquery

I didn't get the id of dropped div on dropping on another div
i get the id_droppable i but didn't get the id_dropped div 
The alert id_dropped give undefined as result
Please help me verify my code and correct my error.
$(".full-circle").droppable({
    accept: ".unseated_guest",
    drop: function(event, ui) {
        var id_droppable = this.id;
        alert(id_droppable);
        var id_dropped = ui.id;
        alert(id_dropped);
        var name=document.getElementById("div_name_0").value;
        $(this).css("background-color","red");
        $(this).append(ui.draggable);
        //$(this).draggable('disable');
        }

    });

A:

The ui parameter does not have an id attribute, as it is a reference to the element being drug. You need to get the id like ui.draggable.attr('id'), or whatever method you prefer to get the id of an element.
$(".full-circle").droppable({
    accept: ".unseated_guest",
    drop: function(event, ui) {
        //Stuff above
        var id_dropped = ui.draggable.attr('id');
        alert(id_dropped);
        //Stuff below
        }

    });

</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="17"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">Girmal Falls

General

This waterfall extends to a height of up to 100 feet, making it the highest waterfall of Gujarat. The picturesque beauty of this site makes it popular among visitors and people of the region alike. The water swiftly falls from a great height, creating a fog like condition that’s eye catching.

The government of this state is working on many projects to make this place an ideal picnic spot and a tourist attraction. The fall comes to its best form at the time of monsoon and provides an immensely striking appearance. Some of the best natural features of Gujarat can be explored in this place. This place is a nice and refreshing retreat for any traveler.</span></div></div>
							</td>
					</tr><tr class="group cursor-pointer space-x-4 divide-x border-b outline-offset-[-2px] odd:bg-gray-50 hover:bg-gray-100 dark:odd:bg-gray-925 dark:hover:bg-gray-850  last:border-none" tabindex="0" data-row-idx="18"><td class="min-w-fit max-w-sm break-words p-2 "><div class="line-clamp-2 "><div class="" dir="auto"><span class="">Be afraid, England and Wales 2019. The Aussies are coming. Or rather, the Aussies are still coming, after an 86-run defeat of a New Zealand team who seemed consumed by the occasion at Lord’s.

At times in the Black Caps’ attempts to chase 243 this felt a bit like a Sunday morning junior age group game. Steve Smith sent down some weird, wonky all-sorts. Wickets were greeted with jokey huddles. It took the return of Mitchell Starc to restore a sense of World Cup order, figures of five for 26 reflecting a spell of brutal, high-grade, white-ball fast-bowling that blew away the tail.

Pakistan’s Imad Wasim holds nerve to see off Afghanistan in thriller Read more

Victory leaves Australia on their own at the top of the group stage table with seven wins from eight, and with some of their own question marks finding an answer or two. They had some help along the way, not least from Kane Williamson’s diffident captaincy.

On a sun-baked north London day New Zealand had first shown how to beat Australia; then almost immediately they showed how to fail to beat Australia. Exposing that thin-looking middle order had always looked a plan. Failing to punch through by taking off your best bowlers was where the game got away, captured by the sight of the skipper wheeling out seven overs of mid-innings part-time leg-spin.

Trent Boult even had time at the end of Australia’s innings to conjure a largely pointless World Cup hat-trick. Instead it was a gutsy, occasionally streaky 107-run sixth-wicket partnership between Usman Khawaja and Alex Carey that decided this game.

From the start Lord’s was a place of Trans-Tasman good cheer as the grey shroud of the last few weeks lifted. Australia had won the toss and elected to bat. In any list of David Warner’s top five career sledges, the line “You’re not f-ing facing Trent Boult’s 80mph half-volleys now, mate” – yelled at Joe Root as he took guard during the Cardiff Ashes Test of 2015 – might just make it on grounds of subtlety alone.

This time it was Warner’s turn to face the Boult music, a tricky prospect at the start of a heat-hazed day. Boult’s third over saw Aaron Finch out lbw falling over an inswinger.

Colin de Grandhomme shared the new ball, toiling in manfully from the nursery end like a man with a two-seat sofa strapped to his back. But it was Lockie Ferguson who made the most telling incision. Ferguson was a joy to watch, a thrillingly athletic fast bowler with an air of the old school adventurer about him, so much so you half expect to see him handing the umpire his fedora and bull-whip before every over.

Here Ferguson took out Warner and Steve Smith for two runs in seven balls. First he bounced out Warner. Smith was booed on. And Ferguson soon did for him too, thanks to another moment of brilliance.

Smith pulled another short one, middling it with a lovely, sweet clump. At short backward square leg Martin Guptill dived full length and stuck out a hand. Eventually he stood up, raised his hand and threw a ball – apparently the same one – into the sky. It was a catch that will look good in replay. In real time it was a moment to stop the days and spin it back on its axis. James Neesham entered the attack and 81 for three became 81 for four as Marcus Stoinis was caught behind, before Neesham held a one-handed caught and bowled just above the grass to get rid of Glenn Maxwell.

New Zealand had Australia wobbling around the ring at five for 92 after 21 overs. But Khawaja found a partner in Carey, who clipped and carved at assorted short-pitch offerings as New Zealand struggled to adapt their length to his punchy style. The fifty partnership arrived off 51 balls, at the same time as Khawaja’s own half-century, an innings that will be doubly satisfying on a day when no one else in Australia’s top six got to 25.

Carey inside-edged to the pavilion fence to reach a battling 51 off 41 balls. There is a jaunty fearlessness to his cricket. Best of all he averages 50 now at No 7 for Australia and has made that tricky slot a position of strength in the last month.

There will be regrets for New Zealand. Not least in Boult’s disappearance from the attack until the 42nd over. Their chase never really got started. Jason Behrendorff dismissed both openers and a 20-over score of 61 for two deteriorated to 157 all out as only Williamson seemed to have the skill to score on a crabby pitch.

Australia were talked down at the World Cup’s start as a team overly reliant on five star players. At Lord’s it was the underrated back-up cast who dug in to turn this game, maintaining the air of a team finding other gears as this tournament narrows towards its end point.</span></div></div>
							</td>
					</tr></tbody></table>
		<div class="bg-linear-to-b sticky left-0 border-t border-dashed border-gray-300 from-gray-100 to-white py-3 text-center font-mono text-xs dark:border-gray-700 dark:from-gray-950 dark:to-gray-900">End of preview. <a href="/datasets/JeanKaddour/minipile/viewer/default/train" class="group"><span class="underline decoration-gray-300 group-hover:decoration-gray-400 dark:decoration-gray-500 dark:group-hover:decoration-gray-300">Expand</span>
						in <svg class="text-lg mr-0.5 inline -translate-y-px text-red-500" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 12 12"><path fill="currentColor" d="M2.5 2h7a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-7a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1Zm0 2v2h3V4h-3Zm4 0v2h3V4h-3Zm-4 3v2h3V7h-3Zm4 0v2h3V7h-3Z"></path></svg>Data Studio
					</a></div></div>




			<div class="bg-linear-to-b from-gray-100 to-white dark:from-gray-950 dark:to-gray-900 "><hr class="flex-none -translate-y-px border-t border-dashed border-gray-300 bg-white dark:border-gray-700 dark:bg-gray-950">
					<nav><ul class="flex select-none items-center justify-between space-x-2 text-gray-700 sm:justify-center py-1 text-center font-mono text-xs rounded-b-lg"><li><a class="flex items-center rounded-lg px-2.5 py-1 hover:bg-gray-50 dark:hover:bg-gray-800 pointer-events-none cursor-default text-gray-400 hover:text-gray-700" href=""><svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M10 16L20 6l1.4 1.4l-8.6 8.6l8.6 8.6L20 26z" fill="currentColor"></path></svg>
		Previous</a></li>
			<li class="hidden sm:block"><a class="rounded-lg px-2.5 py-1 bg-gray-50 font-semibold ring-1 ring-inset ring-gray-200 dark:bg-gray-900 dark:text-yellow-500 dark:ring-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800" href="/datasets/JeanKaddour/minipile/viewer/default/train?p=0">1</a>
				</li><li class="hidden sm:block"><a class="rounded-lg px-2.5 py-1  hover:bg-gray-50 dark:hover:bg-gray-800" href="/datasets/JeanKaddour/minipile/viewer/default/train?p=1">2</a>
				</li><li class="hidden sm:block"><a class="rounded-lg px-2.5 py-1  hover:bg-gray-50 dark:hover:bg-gray-800" href="/datasets/JeanKaddour/minipile/viewer/default/train?p=2">3</a>
				</li><li class="hidden sm:block"><a class="rounded-lg px-2.5 py-1  pointer-events-none cursor-default" href="#">...</a>
				</li><li class="hidden sm:block"><a class="rounded-lg px-2.5 py-1  hover:bg-gray-50 dark:hover:bg-gray-800" href="/datasets/JeanKaddour/minipile/viewer/default/train?p=9999">10,000</a>
				</li>
			<li><a class="flex items-center rounded-lg px-2.5 py-1 hover:bg-gray-50 dark:hover:bg-gray-800 " href="/datasets/JeanKaddour/minipile/viewer/default/train?p=1">Next
		<svg class="ml-1.5 transform rotate-180" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M10 16L20 6l1.4 1.4l-8.6 8.6l8.6 8.6L20 26z" fill="currentColor"></path></svg></a></li></ul></nav></div></div>






</div></div></div></div></div></div></div>

				
					<div class="SVELTE_HYDRATER contents" data-target="RepoCodeCopy" data-props="{}"><div></div></div>
					

					<div class="SVELTE_HYDRATER contents" data-target="SideNavigation" data-props="{&quot;titleTree&quot;:[{&quot;id&quot;:&quot;dataset-description&quot;,&quot;label&quot;:&quot;Dataset Description&quot;,&quot;children&quot;:[{&quot;id&quot;:&quot;dataset-summary&quot;,&quot;label&quot;:&quot;Dataset Summary&quot;,&quot;children&quot;:[],&quot;isValid&quot;:true,&quot;title&quot;:&quot;Dataset Summary&quot;},{&quot;id&quot;:&quot;languages&quot;,&quot;label&quot;:&quot;Languages&quot;,&quot;children&quot;:[],&quot;isValid&quot;:true,&quot;title&quot;:&quot;Languages&quot;}],&quot;isValid&quot;:true,&quot;title&quot;:&quot;Dataset Description&quot;},{&quot;id&quot;:&quot;additional-information&quot;,&quot;label&quot;:&quot;Additional Information&quot;,&quot;children&quot;:[{&quot;id&quot;:&quot;dataset-curators&quot;,&quot;label&quot;:&quot;Dataset Curators&quot;,&quot;children&quot;:[],&quot;isValid&quot;:true,&quot;title&quot;:&quot;Dataset Curators&quot;},{&quot;id&quot;:&quot;licensing-information&quot;,&quot;label&quot;:&quot;Licensing Information&quot;,&quot;children&quot;:[],&quot;isValid&quot;:true,&quot;title&quot;:&quot;Licensing Information&quot;},{&quot;id&quot;:&quot;citation-information&quot;,&quot;label&quot;:&quot;Citation Information&quot;,&quot;children&quot;:[],&quot;isValid&quot;:true,&quot;title&quot;:&quot;Citation Information&quot;}],&quot;isValid&quot;:true,&quot;title&quot;:&quot;Additional Information&quot;}],&quot;classNames&quot;:&quot;top-6&quot;}">

<div class="absolute -left-12 bottom-0 top-0 z-10 top-6"><div class="sticky top-4 flex"><div class="h-7 pt-[0.175rem]">
				<span class="peer" tabindex="0"><button class="select-none hover:cursor-pointer"><svg width="1em" height="1em" viewBox="0 0 10 10" class="text-lg opacity-80 hover:opacity-100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" preserveAspectRatio="xMidYMid meet" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.65039 2.9999C1.65039 2.8066 1.80709 2.6499 2.00039 2.6499H8.00039C8.19369 2.6499 8.35039 2.8066 8.35039 2.9999C8.35039 3.1932 8.19369 3.3499 8.00039 3.3499H2.00039C1.80709 3.3499 1.65039 3.1932 1.65039 2.9999ZM1.65039 4.9999C1.65039 4.8066 1.80709 4.6499 2.00039 4.6499H8.00039C8.19369 4.6499 8.35039 4.8066 8.35039 4.9999C8.35039 5.1932 8.19369 5.3499 8.00039 5.3499H2.00039C1.80709 5.3499 1.65039 5.1932 1.65039 4.9999ZM2.00039 6.6499C1.80709 6.6499 1.65039 6.8066 1.65039 6.9999C1.65039 7.1932 1.80709 7.3499 2.00039 7.3499H8.00039C8.19369 7.3499 8.35039 7.1932 8.35039 6.9999C8.35039 6.8066 8.19369 6.6499 8.00039 6.6499H2.00039Z"></path></svg></button></span>
				<div class="invisible w-0 -translate-x-24 -translate-y-6 overflow-hidden rounded-xl border bg-white transition-transform hover:visible hover:w-52 hover:translate-x-0 peer-focus-within:visible peer-focus-within:w-52 peer-focus-within:translate-x-0"><nav aria-label="Secondary" class="max-h-[550px] overflow-y-auto p-3"><ul><li class="mb-3 text-sm last:mb-0"><a class="mb-1 block break-words font-semibold text-gray-700 *:break-words hover:underline active:text-gray-900 dark:active:text-gray-200" href="#dataset-description" title="Dataset Description"><!-- HTML_TAG_START -->Dataset Description<!-- HTML_TAG_END --></a>
									<ul class="pl-1"><li><a class="mb-0.5 block break-words hover:underline active:text-gray-700 dark:active:text-gray-300 text-gray-500" href="#dataset-summary" title="Dataset Summary"><!-- HTML_TAG_START -->Dataset Summary<!-- HTML_TAG_END --></a>
												<ul class="pl-2"></ul>
											</li><li><a class="mb-0.5 block break-words hover:underline active:text-gray-700 dark:active:text-gray-300 text-gray-500" href="#languages" title="Languages"><!-- HTML_TAG_START -->Languages<!-- HTML_TAG_END --></a>
												<ul class="pl-2"></ul>
											</li></ul>
								</li><li class="mb-3 text-sm last:mb-0"><a class="mb-1 block break-words font-semibold text-gray-700 *:break-words hover:underline active:text-gray-900 dark:active:text-gray-200" href="#additional-information" title="Additional Information"><!-- HTML_TAG_START -->Additional Information<!-- HTML_TAG_END --></a>
									<ul class="pl-1"><li><a class="mb-0.5 block break-words hover:underline active:text-gray-700 dark:active:text-gray-300 text-gray-500" href="#dataset-curators" title="Dataset Curators"><!-- HTML_TAG_START -->Dataset Curators<!-- HTML_TAG_END --></a>
												<ul class="pl-2"></ul>
											</li><li><a class="mb-0.5 block break-words hover:underline active:text-gray-700 dark:active:text-gray-300 text-gray-500" href="#licensing-information" title="Licensing Information"><!-- HTML_TAG_START -->Licensing Information<!-- HTML_TAG_END --></a>
												<ul class="pl-2"></ul>
											</li><li><a class="mb-0.5 block break-words hover:underline active:text-gray-700 dark:active:text-gray-300 text-gray-500" href="#citation-information" title="Citation Information"><!-- HTML_TAG_START -->Citation Information<!-- HTML_TAG_END --></a>
												<ul class="pl-2"></ul>
											</li></ul>
								</li></ul></nav></div></div></div></div></div>
					<div class="2xl:pr-6"><div class="prose pl-6 -ml-6 hf-sanitized hf-sanitized-0hqPFVtX26u_5hJZ3EsuA">
	<!-- HTML_TAG_START --><h1 class="relative group flex items-center">
	<a rel="nofollow" href="#dataset-card-for-minipile" class="block pr-1.5 text-lg md:absolute md:p-1.5 md:opacity-0 md:group-hover:opacity-100 md:right-full" id="dataset-card-for-minipile">
		<span class="header-link"><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" class="text-gray-500 hover:text-black dark:hover:text-gray-200 w-4"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Dataset Card for MiniPile
	</span>
</h1>
<h2 class="relative group flex items-center">
	<a rel="nofollow" href="#dataset-description" class="block pr-1.5 text-lg md:absolute md:p-1.5 md:opacity-0 md:group-hover:opacity-100 md:right-full" id="dataset-description">
		<span class="header-link"><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" class="text-gray-500 hover:text-black dark:hover:text-gray-200 w-4"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Dataset Description
	</span>
</h2>
<p><a rel="nofollow" href="https://arxiv.org/abs/2304.08442">The MiniPile Challenge for Data-Efficient Language Models</a></p>
<h3 class="relative group flex items-center">
	<a rel="nofollow" href="#dataset-summary" class="block pr-1.5 text-lg md:absolute md:p-1.5 md:opacity-0 md:group-hover:opacity-100 md:right-full" id="dataset-summary">
		<span class="header-link"><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" class="text-gray-500 hover:text-black dark:hover:text-gray-200 w-4"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Dataset Summary
	</span>
</h3>
<p>MiniPile is a 6GB subset of the <a rel="nofollow" href="https://huggingface.co/datasets/EleutherAI/the_pile_deduplicated">deduplicated The Pile corpus</a>. To curate MiniPile, we perform a simple, three-step data filtering process: we (1) infer embeddings for all documents of the Pile, (2) cluster the embedding space using k-means, and (3) filter out low-quality clusters.</p>
<p>The primary motivation for curating MiniPile is that (i) diverse pre-training datasets (like the Pile) are often too large for academic budgets and (ii) most smaller-scale datasets are fairly homogeneous and thereby unrepresentative of contemporary general-purpose language models. MiniPile aims to fill this gap and thereby facilitate data-efficient research on model architectures, training procedures, optimizers, etc.</p>
<p>More details on the MiniPile curation procedure and some pre-training results be found in the <a rel="nofollow" href="https://arxiv.org/abs/2304.08442">MiniPile paper</a>.</p>
<p>For more details on the Pile corpus, we refer the reader to <a rel="nofollow" href="https://arxiv.org/abs/2201.07311">the Pile datasheet</a>.</p>
<h3 class="relative group flex items-center">
	<a rel="nofollow" href="#languages" class="block pr-1.5 text-lg md:absolute md:p-1.5 md:opacity-0 md:group-hover:opacity-100 md:right-full" id="languages">
		<span class="header-link"><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" class="text-gray-500 hover:text-black dark:hover:text-gray-200 w-4"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Languages
	</span>
</h3>
<p>English (<code>EN</code>)</p>
<h2 class="relative group flex items-center">
	<a rel="nofollow" href="#additional-information" class="block pr-1.5 text-lg md:absolute md:p-1.5 md:opacity-0 md:group-hover:opacity-100 md:right-full" id="additional-information">
		<span class="header-link"><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" class="text-gray-500 hover:text-black dark:hover:text-gray-200 w-4"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Additional Information
	</span>
</h2>
<h3 class="relative group flex items-center">
	<a rel="nofollow" href="#dataset-curators" class="block pr-1.5 text-lg md:absolute md:p-1.5 md:opacity-0 md:group-hover:opacity-100 md:right-full" id="dataset-curators">
		<span class="header-link"><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" class="text-gray-500 hover:text-black dark:hover:text-gray-200 w-4"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Dataset Curators
	</span>
</h3>
<p>MiniPile is a subset of the Pile, curated by Jean Kaddour. The Pile was created by Leo Gao, Stella Biderman, Sid Black, Laurence Golding, Travis Hoppe, Charles Foster, Jason Phang, Horace He, Anish Thite, Noa Nabeshima, Shawn Presser, Connor Leahy.</p>
<h3 class="relative group flex items-center">
	<a rel="nofollow" href="#licensing-information" class="block pr-1.5 text-lg md:absolute md:p-1.5 md:opacity-0 md:group-hover:opacity-100 md:right-full" id="licensing-information">
		<span class="header-link"><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" class="text-gray-500 hover:text-black dark:hover:text-gray-200 w-4"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Licensing Information
	</span>
</h3>
<p>Since MiniPile is a subset of the Pile, the same MIT License holds.</p>
<h3 class="relative group flex items-center">
	<a rel="nofollow" href="#citation-information" class="block pr-1.5 text-lg md:absolute md:p-1.5 md:opacity-0 md:group-hover:opacity-100 md:right-full" id="citation-information">
		<span class="header-link"><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" class="text-gray-500 hover:text-black dark:hover:text-gray-200 w-4"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Citation Information
	</span>
</h3>
<pre><code>@article{kaddour2023minipile,
  title={The MiniPile Challenge for Data-Efficient Language Models},
  author={Kaddour, Jean},
  journal={arXiv preprint arXiv:2304.08442},
  year={2023}
}

@article{gao2020pile,
  title={The {P}ile: An 800{GB} dataset of diverse text for language modeling},
  author={Gao, Leo and Biderman, Stella and Black, Sid and Golding, Laurence and Hoppe, Travis and Foster, Charles and Phang, Jason and He, Horace and Thite, Anish and Nabeshima, Noa and others},
  journal={arXiv preprint arXiv:2101.00027},
  year={2020}
}
</code></pre>
<!-- HTML_TAG_END --></div>
</div></section>
			
			<section class="pt-6 border-gray-100 md:pb-24 md:pl-6 md:w-64 lg:w-80 xl:w-96 flex-none order-first md:order-none md:border-l pt-3! md:pt-6!"><dl class="flex items-baseline justify-between"><dt class="text-sm text-gray-500">Downloads last month</dt><div class="mx-4 flex-1 border-b border-dotted"></div><dd class="font-semibold">2,697</dd></dl>
				
				<div class="divider-column-vertical"></div>
				<div class="grid grid-cols-2 gap-x-2 md:flex md:flex-row md:flex-wrap"><div class="SVELTE_HYDRATER contents" data-target="DatasetAndModelActionsDropdown" data-props="{&quot;classNames&quot;:&quot;order-last&quot;,&quot;discussionsDisabled&quot;:false,&quot;repo&quot;:{&quot;type&quot;:&quot;dataset&quot;,&quot;name&quot;:&quot;JeanKaddour/minipile&quot;},&quot;canWrite&quot;:false,&quot;canDisable&quot;:false,&quot;repoIsPrivate&quot;:false,&quot;repoIsGated&quot;:false,&quot;repoIsDisabled&quot;:false,&quot;repoIsAdminFlaggedNFAA&quot;:false,&quot;repoHasBlockedOids&quot;:false}"><div class="order-last"><div class="relative ">
	<button class="btn px-1.5 py-1.5 " type="button">
		
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="p-0.5" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><circle cx="16" cy="7" r="3" fill="currentColor"></circle><circle cx="16" cy="16" r="3" fill="currentColor"></circle><circle cx="16" cy="25" r="3" fill="currentColor"></circle></svg>
		
		</button>
	
	
	</div></div>













</div>
					<div class="SVELTE_HYDRATER contents" data-target="DatasetLibrary" data-props="{&quot;classNames&quot;:&quot;md:w-full xl:w-auto xl:flex-none&quot;,&quot;libraries&quot;:[{&quot;language&quot;:&quot;python&quot;,&quot;library&quot;:&quot;datasets&quot;,&quot;function&quot;:&quot;load_dataset&quot;,&quot;loading_codes&quot;:[{&quot;config_name&quot;:&quot;default&quot;,&quot;arguments&quot;:{},&quot;code&quot;:&quot;from datasets import load_dataset\n\nds = load_dataset(\&quot;JeanKaddour/minipile\&quot;)&quot;}]},{&quot;language&quot;:&quot;python&quot;,&quot;library&quot;:&quot;dask&quot;,&quot;function&quot;:&quot;dd.read_parquet&quot;,&quot;loading_codes&quot;:[{&quot;config_name&quot;:&quot;default&quot;,&quot;arguments&quot;:{&quot;splits&quot;:{&quot;train&quot;:&quot;data/train-*-of-*.parquet&quot;,&quot;validation&quot;:&quot;data/validation-00000-of-00001-a2192e61a091cecb.parquet&quot;,&quot;test&quot;:&quot;data/test-00000-of-00001-010a6231c4b54d31.parquet&quot;}},&quot;code&quot;:&quot;import dask.dataframe as dd\n\nsplits = {'train': 'data/train-*-of-*.parquet', 'validation': 'data/validation-00000-of-00001-a2192e61a091cecb.parquet', 'test': 'data/test-00000-of-00001-010a6231c4b54d31.parquet'}\ndf = dd.read_parquet(\&quot;hf://datasets/JeanKaddour/minipile/\&quot; + splits[\&quot;train\&quot;])&quot;}]},{&quot;language&quot;:&quot;python&quot;,&quot;library&quot;:&quot;mlcroissant&quot;,&quot;function&quot;:&quot;Dataset&quot;,&quot;loading_codes&quot;:[{&quot;config_name&quot;:&quot;default&quot;,&quot;arguments&quot;:{&quot;record_set&quot;:&quot;default&quot;,&quot;partial&quot;:false},&quot;code&quot;:&quot;from mlcroissant import Dataset\n\nds = Dataset(jsonld=\&quot;https://huggingface.co/api/datasets/JeanKaddour/minipile/croissant\&quot;)\nrecords = ds.records(\&quot;default\&quot;)&quot;}]},{&quot;language&quot;:&quot;python&quot;,&quot;library&quot;:&quot;polars&quot;,&quot;function&quot;:&quot;pl.read_parquet&quot;,&quot;loading_codes&quot;:[{&quot;config_name&quot;:&quot;default&quot;,&quot;arguments&quot;:{&quot;splits&quot;:{&quot;train&quot;:&quot;data/train-*-of-*.parquet&quot;,&quot;validation&quot;:&quot;data/validation-00000-of-00001-a2192e61a091cecb.parquet&quot;,&quot;test&quot;:&quot;data/test-00000-of-00001-010a6231c4b54d31.parquet&quot;}},&quot;code&quot;:&quot;import polars as pl\n\nsplits = {'train': 'data/train-*-of-*.parquet', 'validation': 'data/validation-00000-of-00001-a2192e61a091cecb.parquet', 'test': 'data/test-00000-of-00001-010a6231c4b54d31.parquet'}\ndf = pl.read_parquet('hf://datasets/JeanKaddour/minipile/' + splits['train'])\n&quot;}]}]}"><div class="relative md:w-full xl:w-auto xl:flex-none">
	<button class="from-gray-800! to-black! max-xl:mb-2 text-white! gap-1! border-gray-800! dark:border-gray-900!  btn w-full cursor-pointer text-sm" type="button">
		<svg class="mr-1.5 mr-0.5! " xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" style="transform: rotate(360deg);"><path d="M31 16l-7 7l-1.41-1.41L28.17 16l-5.58-5.59L24 9l7 7z" fill="currentColor"></path><path d="M1 16l7-7l1.41 1.41L3.83 16l5.58 5.59L8 23l-7-7z" fill="currentColor"></path><path d="M12.419 25.484L17.639 6l1.932.518L14.35 26z" fill="currentColor"></path></svg>
			Use this dataset
		<svg class="-mr-1 text-gray-500" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M16.293 9.293L12 13.586L7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z" fill="currentColor"></path></svg></button>
	
	
	</div>

</div>
					
					<a class="btn xl:flex-none! mb-2 text-sm md:w-full md:last:w-auto md:last:flex-auto xl:w-auto" href="https://paperswithcode.com/dataset/minipile" target="_blank"><svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 512 512"><path stroke="#21cbce" fill="#21cbce" d="M88 128h48v256H88zM232 128h48v256h-48zM160 144h48v224h-48zM304 144h48v224h-48zM376 128h48v256h-48z"></path><path stroke="#21cbce" fill="#21cbce" d="M104 104V56H16v400h88v-48H64V104zM408 56v48h40v304h-40v48h88V56z"></path></svg>
							Papers with Code
						</a></div>
				<div class="divider-column-vertical"></div>
					<div class="flex flex-col flex-wrap xl:flex-row"><a class="bg-linear-to-r dark:via-none group mb-1.5 flex max-w-full flex-col overflow-hidden rounded-lg border border-gray-100 from-white via-white to-white px-2 py-1 hover:from-gray-50 dark:from-gray-900 dark:to-gray-925 dark:hover:to-gray-900 md:mr-1.5 pointer-events-none" rel="nofollow" target="_blank"><div class="truncate text-xs text-gray-400">Size of downloaded dataset files:</div>
		<div class="truncate text-sm ">
			<!-- HTML_TAG_START -->3.18 GB<!-- HTML_TAG_END --></div></a><a class="bg-linear-to-r dark:via-none group mb-1.5 flex max-w-full flex-col overflow-hidden rounded-lg border border-gray-100 from-white via-white to-white px-2 py-1 hover:from-gray-50 dark:from-gray-900 dark:to-gray-925 dark:hover:to-gray-900 md:mr-1.5 " href="/datasets/JeanKaddour/minipile/tree/refs%2Fconvert%2Fparquet/" rel="nofollow" target="_blank"><div class="truncate text-xs text-gray-400">Size of the auto-converted Parquet files:</div>
		<div class="truncate text-sm group-hover:underline">
			<!-- HTML_TAG_START -->3.18 GB<!-- HTML_TAG_END --></div></a><a class="bg-linear-to-r dark:via-none group mb-1.5 flex max-w-full flex-col overflow-hidden rounded-lg border border-gray-100 from-white via-white to-white px-2 py-1 hover:from-gray-50 dark:from-gray-900 dark:to-gray-925 dark:hover:to-gray-900 md:mr-1.5 pointer-events-none" rel="nofollow" target="_blank"><div class="truncate text-xs text-gray-400">Number of rows:</div>
		<div class="truncate text-sm ">
			<!-- HTML_TAG_START -->1,010,500<!-- HTML_TAG_END --></div></a></div>
				
				
				<div class="divider-column-vertical"></div>
					<h2 class="text-smd mb-5 flex items-baseline overflow-hidden whitespace-nowrap font-semibold text-gray-800"><svg class="mr-1.5 text-sm inline self-center flex-none text-gray-400" style="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path class="uim-quaternary" d="M20.23 7.24L12 12L3.77 7.24a1.98 1.98 0 0 1 .7-.71L11 2.76c.62-.35 1.38-.35 2 0l6.53 3.77c.29.173.531.418.7.71z" opacity=".25" fill="currentColor"></path><path class="uim-tertiary" d="M12 12v9.5a2.09 2.09 0 0 1-.91-.21L4.5 17.48a2.003 2.003 0 0 1-1-1.73v-7.5a2.06 2.06 0 0 1 .27-1.01L12 12z" opacity=".5" fill="currentColor"></path><path class="uim-primary" d="M20.5 8.25v7.5a2.003 2.003 0 0 1-1 1.73l-6.62 3.82c-.275.13-.576.198-.88.2V12l8.23-4.76c.175.308.268.656.27 1.01z" fill="currentColor"></path></svg>
						Models trained or fine-tuned on
						<span class="ml-1 truncate font-mono text-[0.87rem] font-medium">JeanKaddour/minipile</span></h2>

					<div class="space-y-3"><div class=""><article class="overview-card-wrapper group/repo  "><a class="flex items-center justify-between gap-4 p-2" href="/BEE-spoke-data/mega-ar-126m-4k"><div class="w-full truncate"><header class="flex items-center mb-1" title="BEE-spoke-data/mega-ar-126m-4k"><img alt="" class="w-3 h-3 rounded-xs mr-1.5 flex-none flex-none" src="https://cdn-avatars.huggingface.co/v1/production/uploads/60bccec062080d33f875cd0c/FDQwEj3IBUG_fa377Ej1U.jpeg" crossorigin="anonymous">
				<h4 class="text-md truncate font-mono text-black dark:group-hover/repo:text-yellow-500 group-hover/repo:text-indigo-600 text-sm">BEE-spoke-data/mega-ar-126m-4k</h4>
				
				</header>
			<div class="mr-1 flex items-center overflow-hidden whitespace-nowrap text-sm leading-tight text-gray-400"><svg class="mr-1.5 text-[.8rem] flex-none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 18 18"><path d="M16.2607 8.08202L14.468 6.28928C14.3063 6.12804 14.0873 6.03749 13.859 6.03749C13.6307 6.03749 13.4117 6.12804 13.25 6.28928L5.6375 13.904V16.9125H8.64607L16.2607 9.30002C16.422 9.13836 16.5125 8.91935 16.5125 8.69102C16.5125 8.4627 16.422 8.24369 16.2607 8.08202V8.08202ZM8.1953 15.825H6.725V14.3547L11.858 9.22118L13.3288 10.6915L8.1953 15.825ZM14.0982 9.92262L12.6279 8.45232L13.8606 7.21964L15.3309 8.68994L14.0982 9.92262Z"></path><path d="M6.18125 9.84373H7.26875V6.03748H8.9V4.94998H4.55V6.03748H6.18125V9.84373Z"></path><path d="M4.55 11.475H2.375V2.775H11.075V4.95H12.1625V2.775C12.1625 2.48658 12.0479 2.20997 11.844 2.00602C11.64 1.80208 11.3634 1.6875 11.075 1.6875H2.375C2.08658 1.6875 1.80997 1.80208 1.60602 2.00602C1.40207 2.20997 1.2875 2.48658 1.2875 2.775V11.475C1.2875 11.7634 1.40207 12.04 1.60602 12.244C1.80997 12.4479 2.08658 12.5625 2.375 12.5625H4.55V11.475Z"></path></svg>
			Text Generation
			<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
	
				<span class="truncate">Updated
					<time datetime="2024-01-28T03:02:27" title="Sun, 28 Jan 2024 03:02:27 GMT">Jan 28, 2024</time></span>
				
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
					<svg class="flex-none w-3 text-gray-400 mr-0.5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"></path></svg>
					5.11k
				
	
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
					<svg class="flex-none w-3 text-gray-400 mr-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" fill="currentColor"><path d="M22.45,6a5.47,5.47,0,0,1,3.91,1.64,5.7,5.7,0,0,1,0,8L16,26.13,5.64,15.64a5.7,5.7,0,0,1,0-8,5.48,5.48,0,0,1,7.82,0L16,10.24l2.53-2.58A5.44,5.44,0,0,1,22.45,6m0-2a7.47,7.47,0,0,0-5.34,2.24L16,7.36,14.89,6.24a7.49,7.49,0,0,0-10.68,0,7.72,7.72,0,0,0,0,10.82L16,29,27.79,17.06a7.72,7.72,0,0,0,0-10.82A7.49,7.49,0,0,0,22.45,4Z"></path></svg>
					4

				</div></div>
		
	</a></article>
							</div><div class=""><article class="overview-card-wrapper group/repo  "><a class="flex items-center justify-between gap-4 p-2" href="/BEE-spoke-data/smol_llama-220M-GQA"><div class="w-full truncate"><header class="flex items-center mb-1" title="BEE-spoke-data/smol_llama-220M-GQA"><img alt="" class="w-3 h-3 rounded-xs mr-1.5 flex-none flex-none" src="https://cdn-avatars.huggingface.co/v1/production/uploads/60bccec062080d33f875cd0c/FDQwEj3IBUG_fa377Ej1U.jpeg" crossorigin="anonymous">
				<h4 class="text-md truncate font-mono text-black dark:group-hover/repo:text-yellow-500 group-hover/repo:text-indigo-600 text-sm">BEE-spoke-data/smol_llama-220M-GQA</h4>
				
				</header>
			<div class="mr-1 flex items-center overflow-hidden whitespace-nowrap text-sm leading-tight text-gray-400"><svg class="mr-1.5 text-[.8rem] flex-none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 18 18"><path d="M16.2607 8.08202L14.468 6.28928C14.3063 6.12804 14.0873 6.03749 13.859 6.03749C13.6307 6.03749 13.4117 6.12804 13.25 6.28928L5.6375 13.904V16.9125H8.64607L16.2607 9.30002C16.422 9.13836 16.5125 8.91935 16.5125 8.69102C16.5125 8.4627 16.422 8.24369 16.2607 8.08202V8.08202ZM8.1953 15.825H6.725V14.3547L11.858 9.22118L13.3288 10.6915L8.1953 15.825ZM14.0982 9.92262L12.6279 8.45232L13.8606 7.21964L15.3309 8.68994L14.0982 9.92262Z"></path><path d="M6.18125 9.84373H7.26875V6.03748H8.9V4.94998H4.55V6.03748H6.18125V9.84373Z"></path><path d="M4.55 11.475H2.375V2.775H11.075V4.95H12.1625V2.775C12.1625 2.48658 12.0479 2.20997 11.844 2.00602C11.64 1.80208 11.3634 1.6875 11.075 1.6875H2.375C2.08658 1.6875 1.80997 1.80208 1.60602 2.00602C1.40207 2.20997 1.2875 2.48658 1.2875 2.775V11.475C1.2875 11.7634 1.40207 12.04 1.60602 12.244C1.80997 12.4479 2.08658 12.5625 2.375 12.5625H4.55V11.475Z"></path></svg>
			Text Generation
			<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
	
				<span class="truncate">Updated
					<time datetime="2024-06-28T22:03:34" title="Fri, 28 Jun 2024 22:03:34 GMT">Jun 28, 2024</time></span>
				
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
					<svg class="flex-none w-3 text-gray-400 mr-0.5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"></path></svg>
					4.96k
				
	
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
					<svg class="flex-none w-3 text-gray-400 mr-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" fill="currentColor"><path d="M22.45,6a5.47,5.47,0,0,1,3.91,1.64,5.7,5.7,0,0,1,0,8L16,26.13,5.64,15.64a5.7,5.7,0,0,1,0-8,5.48,5.48,0,0,1,7.82,0L16,10.24l2.53-2.58A5.44,5.44,0,0,1,22.45,6m0-2a7.47,7.47,0,0,0-5.34,2.24L16,7.36,14.89,6.24a7.49,7.49,0,0,0-10.68,0,7.72,7.72,0,0,0,0,10.82L16,29,27.79,17.06a7.72,7.72,0,0,0,0-10.82A7.49,7.49,0,0,0,22.45,4Z"></path></svg>
					12

				</div></div>
		
	</a></article>
							</div><div class=""><article class="overview-card-wrapper group/repo  "><a class="flex items-center justify-between gap-4 p-2" href="/BEE-spoke-data/smol_llama-101M-GQA"><div class="w-full truncate"><header class="flex items-center mb-1" title="BEE-spoke-data/smol_llama-101M-GQA"><img alt="" class="w-3 h-3 rounded-xs mr-1.5 flex-none flex-none" src="https://cdn-avatars.huggingface.co/v1/production/uploads/60bccec062080d33f875cd0c/FDQwEj3IBUG_fa377Ej1U.jpeg" crossorigin="anonymous">
				<h4 class="text-md truncate font-mono text-black dark:group-hover/repo:text-yellow-500 group-hover/repo:text-indigo-600 text-sm">BEE-spoke-data/smol_llama-101M-GQA</h4>
				
				</header>
			<div class="mr-1 flex items-center overflow-hidden whitespace-nowrap text-sm leading-tight text-gray-400"><svg class="mr-1.5 text-[.8rem] flex-none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 18 18"><path d="M16.2607 8.08202L14.468 6.28928C14.3063 6.12804 14.0873 6.03749 13.859 6.03749C13.6307 6.03749 13.4117 6.12804 13.25 6.28928L5.6375 13.904V16.9125H8.64607L16.2607 9.30002C16.422 9.13836 16.5125 8.91935 16.5125 8.69102C16.5125 8.4627 16.422 8.24369 16.2607 8.08202V8.08202ZM8.1953 15.825H6.725V14.3547L11.858 9.22118L13.3288 10.6915L8.1953 15.825ZM14.0982 9.92262L12.6279 8.45232L13.8606 7.21964L15.3309 8.68994L14.0982 9.92262Z"></path><path d="M6.18125 9.84373H7.26875V6.03748H8.9V4.94998H4.55V6.03748H6.18125V9.84373Z"></path><path d="M4.55 11.475H2.375V2.775H11.075V4.95H12.1625V2.775C12.1625 2.48658 12.0479 2.20997 11.844 2.00602C11.64 1.80208 11.3634 1.6875 11.075 1.6875H2.375C2.08658 1.6875 1.80997 1.80208 1.60602 2.00602C1.40207 2.20997 1.2875 2.48658 1.2875 2.775V11.475C1.2875 11.7634 1.40207 12.04 1.60602 12.244C1.80997 12.4479 2.08658 12.5625 2.375 12.5625H4.55V11.475Z"></path></svg>
			Text Generation
			<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
	
				<span class="truncate">Updated
					<time datetime="2023-12-25T06:36:35" title="Mon, 25 Dec 2023 06:36:35 GMT">Dec 25, 2023</time></span>
				
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
					<svg class="flex-none w-3 text-gray-400 mr-0.5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"></path></svg>
					4.87k
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
			<span class="-mx-[2px] flex-none" title="Inference Providers available"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" class="text-orange-300 dark:text-gray-400 " width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M11 15H6l7-14v8h5l-7 14v-8z" fill="currentColor"></path></svg></span>
	
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
					<svg class="flex-none w-3 text-gray-400 mr-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" fill="currentColor"><path d="M22.45,6a5.47,5.47,0,0,1,3.91,1.64,5.7,5.7,0,0,1,0,8L16,26.13,5.64,15.64a5.7,5.7,0,0,1,0-8,5.48,5.48,0,0,1,7.82,0L16,10.24l2.53-2.58A5.44,5.44,0,0,1,22.45,6m0-2a7.47,7.47,0,0,0-5.34,2.24L16,7.36,14.89,6.24a7.49,7.49,0,0,0-10.68,0,7.72,7.72,0,0,0,0,10.82L16,29,27.79,17.06a7.72,7.72,0,0,0,0-10.82A7.49,7.49,0,0,0,22.45,4Z"></path></svg>
					28

				</div></div>
		
	</a></article>
							</div><div class=""><article class="overview-card-wrapper group/repo  "><a class="flex items-center justify-between gap-4 p-2" href="/stabilityai/stablelm-base-alpha-7b-v2"><div class="w-full truncate"><header class="flex items-center mb-1" title="stabilityai/stablelm-base-alpha-7b-v2"><img alt="" class="w-3 h-3 rounded-xs mr-1.5 flex-none flex-none" src="https://cdn-avatars.huggingface.co/v1/production/uploads/643feeb67bc3fbde1385cc25/7vmYr2XwVcPtkLzac_jxQ.png" crossorigin="anonymous">
				<h4 class="text-md truncate font-mono text-black dark:group-hover/repo:text-yellow-500 group-hover/repo:text-indigo-600 text-sm">stabilityai/stablelm-base-alpha-7b-v2</h4>
				
				</header>
			<div class="mr-1 flex items-center overflow-hidden whitespace-nowrap text-sm leading-tight text-gray-400"><svg class="mr-1.5 text-[.8rem] flex-none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 18 18"><path d="M16.2607 8.08202L14.468 6.28928C14.3063 6.12804 14.0873 6.03749 13.859 6.03749C13.6307 6.03749 13.4117 6.12804 13.25 6.28928L5.6375 13.904V16.9125H8.64607L16.2607 9.30002C16.422 9.13836 16.5125 8.91935 16.5125 8.69102C16.5125 8.4627 16.422 8.24369 16.2607 8.08202V8.08202ZM8.1953 15.825H6.725V14.3547L11.858 9.22118L13.3288 10.6915L8.1953 15.825ZM14.0982 9.92262L12.6279 8.45232L13.8606 7.21964L15.3309 8.68994L14.0982 9.92262Z"></path><path d="M6.18125 9.84373H7.26875V6.03748H8.9V4.94998H4.55V6.03748H6.18125V9.84373Z"></path><path d="M4.55 11.475H2.375V2.775H11.075V4.95H12.1625V2.775C12.1625 2.48658 12.0479 2.20997 11.844 2.00602C11.64 1.80208 11.3634 1.6875 11.075 1.6875H2.375C2.08658 1.6875 1.80997 1.80208 1.60602 2.00602C1.40207 2.20997 1.2875 2.48658 1.2875 2.775V11.475C1.2875 11.7634 1.40207 12.04 1.60602 12.244C1.80997 12.4479 2.08658 12.5625 2.375 12.5625H4.55V11.475Z"></path></svg>
			Text Generation
			<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
	
				<span class="truncate">Updated
					<time datetime="2023-09-11T20:48:53" title="Mon, 11 Sep 2023 20:48:53 GMT">Sep 11, 2023</time></span>
				
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
					<svg class="flex-none w-3 text-gray-400 mr-0.5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"></path></svg>
					3.56k
				
	
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
					<svg class="flex-none w-3 text-gray-400 mr-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" fill="currentColor"><path d="M22.45,6a5.47,5.47,0,0,1,3.91,1.64,5.7,5.7,0,0,1,0,8L16,26.13,5.64,15.64a5.7,5.7,0,0,1,0-8,5.48,5.48,0,0,1,7.82,0L16,10.24l2.53-2.58A5.44,5.44,0,0,1,22.45,6m0-2a7.47,7.47,0,0,0-5.34,2.24L16,7.36,14.89,6.24a7.49,7.49,0,0,0-10.68,0,7.72,7.72,0,0,0,0,10.82L16,29,27.79,17.06a7.72,7.72,0,0,0,0-10.82A7.49,7.49,0,0,0,22.45,4Z"></path></svg>
					46

				</div></div>
		
	</a></article>
							</div><div class="hidden md:block"><article class="overview-card-wrapper group/repo  "><a class="flex items-center justify-between gap-4 p-2" href="/Locutusque/TinyMistral-248M"><div class="w-full truncate"><header class="flex items-center mb-1" title="Locutusque/TinyMistral-248M"><img alt="" class="w-3 h-3 rounded-full mr-1.5 flex-none flex-none" src="https://cdn-avatars.huggingface.co/v1/production/uploads/noauth/YeFyz1AZVcCRsyNHHtwJG.jpeg" crossorigin="anonymous">
				<h4 class="text-md truncate font-mono text-black dark:group-hover/repo:text-yellow-500 group-hover/repo:text-indigo-600 text-sm">Locutusque/TinyMistral-248M</h4>
				
				</header>
			<div class="mr-1 flex items-center overflow-hidden whitespace-nowrap text-sm leading-tight text-gray-400"><svg class="mr-1.5 text-[.8rem] flex-none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 18 18"><path d="M16.2607 8.08202L14.468 6.28928C14.3063 6.12804 14.0873 6.03749 13.859 6.03749C13.6307 6.03749 13.4117 6.12804 13.25 6.28928L5.6375 13.904V16.9125H8.64607L16.2607 9.30002C16.422 9.13836 16.5125 8.91935 16.5125 8.69102C16.5125 8.4627 16.422 8.24369 16.2607 8.08202V8.08202ZM8.1953 15.825H6.725V14.3547L11.858 9.22118L13.3288 10.6915L8.1953 15.825ZM14.0982 9.92262L12.6279 8.45232L13.8606 7.21964L15.3309 8.68994L14.0982 9.92262Z"></path><path d="M6.18125 9.84373H7.26875V6.03748H8.9V4.94998H4.55V6.03748H6.18125V9.84373Z"></path><path d="M4.55 11.475H2.375V2.775H11.075V4.95H12.1625V2.775C12.1625 2.48658 12.0479 2.20997 11.844 2.00602C11.64 1.80208 11.3634 1.6875 11.075 1.6875H2.375C2.08658 1.6875 1.80997 1.80208 1.60602 2.00602C1.40207 2.20997 1.2875 2.48658 1.2875 2.775V11.475C1.2875 11.7634 1.40207 12.04 1.60602 12.244C1.80997 12.4479 2.08658 12.5625 2.375 12.5625H4.55V11.475Z"></path></svg>
			Text Generation
			<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
	
				<span class="truncate">Updated
					<time datetime="2024-05-09T13:48:43" title="Thu, 09 May 2024 13:48:43 GMT">May 9, 2024</time></span>
				
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
					<svg class="flex-none w-3 text-gray-400 mr-0.5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"></path></svg>
					2.13k
				
	
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
					<svg class="flex-none w-3 text-gray-400 mr-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" fill="currentColor"><path d="M22.45,6a5.47,5.47,0,0,1,3.91,1.64,5.7,5.7,0,0,1,0,8L16,26.13,5.64,15.64a5.7,5.7,0,0,1,0-8,5.48,5.48,0,0,1,7.82,0L16,10.24l2.53-2.58A5.44,5.44,0,0,1,22.45,6m0-2a7.47,7.47,0,0,0-5.34,2.24L16,7.36,14.89,6.24a7.49,7.49,0,0,0-10.68,0,7.72,7.72,0,0,0,0,10.82L16,29,27.79,17.06a7.72,7.72,0,0,0,0-10.82A7.49,7.49,0,0,0,22.45,4Z"></path></svg>
					43

				</div></div>
		
	</a></article>
							</div><div class="hidden md:block"><article class="overview-card-wrapper group/repo  "><a class="flex items-center justify-between gap-4 p-2" href="/euclaise/gpt-neox-122m-minipile-digits"><div class="w-full truncate"><header class="flex items-center mb-1" title="euclaise/gpt-neox-122m-minipile-digits"><img alt="" class="w-3 h-3 rounded-full mr-1.5 flex-none flex-none" src="https://cdn-avatars.huggingface.co/v1/production/uploads/64137e2150358a805203cbac/w9RQx8Q07UvgFyIZ3ce_k.jpeg" crossorigin="anonymous">
				<h4 class="text-md truncate font-mono text-black dark:group-hover/repo:text-yellow-500 group-hover/repo:text-indigo-600 text-sm">euclaise/gpt-neox-122m-minipile-digits</h4>
				
				</header>
			<div class="mr-1 flex items-center overflow-hidden whitespace-nowrap text-sm leading-tight text-gray-400"><svg class="mr-1.5 text-[.8rem] flex-none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 18 18"><path d="M16.2607 8.08202L14.468 6.28928C14.3063 6.12804 14.0873 6.03749 13.859 6.03749C13.6307 6.03749 13.4117 6.12804 13.25 6.28928L5.6375 13.904V16.9125H8.64607L16.2607 9.30002C16.422 9.13836 16.5125 8.91935 16.5125 8.69102C16.5125 8.4627 16.422 8.24369 16.2607 8.08202V8.08202ZM8.1953 15.825H6.725V14.3547L11.858 9.22118L13.3288 10.6915L8.1953 15.825ZM14.0982 9.92262L12.6279 8.45232L13.8606 7.21964L15.3309 8.68994L14.0982 9.92262Z"></path><path d="M6.18125 9.84373H7.26875V6.03748H8.9V4.94998H4.55V6.03748H6.18125V9.84373Z"></path><path d="M4.55 11.475H2.375V2.775H11.075V4.95H12.1625V2.775C12.1625 2.48658 12.0479 2.20997 11.844 2.00602C11.64 1.80208 11.3634 1.6875 11.075 1.6875H2.375C2.08658 1.6875 1.80997 1.80208 1.60602 2.00602C1.40207 2.20997 1.2875 2.48658 1.2875 2.775V11.475C1.2875 11.7634 1.40207 12.04 1.60602 12.244C1.80997 12.4479 2.08658 12.5625 2.375 12.5625H4.55V11.475Z"></path></svg>
			Text Generation
			<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
	
				<span class="truncate">Updated
					<time datetime="2023-12-14T23:46:55" title="Thu, 14 Dec 2023 23:46:55 GMT">Dec 14, 2023</time></span>
				
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
					<svg class="flex-none w-3 text-gray-400 mr-0.5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"></path></svg>
					2.07k
				
	
				<span class="px-1.5 text-gray-300 dark:text-gray-500">• </span>
					<svg class="flex-none w-3 text-gray-400 mr-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" fill="currentColor"><path d="M22.45,6a5.47,5.47,0,0,1,3.91,1.64,5.7,5.7,0,0,1,0,8L16,26.13,5.64,15.64a5.7,5.7,0,0,1,0-8,5.48,5.48,0,0,1,7.82,0L16,10.24l2.53-2.58A5.44,5.44,0,0,1,22.45,6m0-2a7.47,7.47,0,0,0-5.34,2.24L16,7.36,14.89,6.24a7.49,7.49,0,0,0-10.68,0,7.72,7.72,0,0,0,0,10.82L16,29,27.79,17.06a7.72,7.72,0,0,0,0-10.82A7.49,7.49,0,0,0,22.45,4Z"></path></svg>
					2

				</div></div>
		
	</a></article>
							</div>
						<a class="flex items-center pt-1 text-sm text-gray-500 underline hover:text-gray-700" href="/models?dataset=dataset:JeanKaddour/minipile">Browse 82 models trained on this dataset
							</a></div>
				

				
				<div class="divider-column-vertical md:hidden"></div></section></div></main>

	<footer class="b-12 mb-2 flex border-t border-gray-100 md:h-14"><nav class="container relative flex flex-col justify-between space-y-2 py-6 text-gray-500 max-md:*:self-start md:flex-row md:items-center md:space-y-0 md:py-0 md:text-sm"><div class="SVELTE_HYDRATER contents" data-target="ThemeSwitcher" data-props="{&quot;theme&quot;:&quot;system&quot;,&quot;isLoggedIn&quot;:false,&quot;menuClassNames&quot;:&quot;md:-top-24&quot;,&quot;classNames&quot;:&quot;max-md:mb-5 max-md:*:self-start&quot;}">
<div class="relative inline-block max-md:mb-5 max-md:*:self-start">
	<button class="rounded-full border border-gray-100 pl-2 py-1 pr-2.5  flex items-center text-sm text-gray-500 bg-white hover:bg-purple-50 hover:border-purple-200 dark:hover:bg-gray-800 dark:hover:border-gray-950 dark:border-gray-800 " type="button">
		<svg class="mr-1.5 text-gray-500" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M29 25H3a1 1 0 1 0 0 2h26a1 1 0 1 0 0-2Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M6 22.5h20a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v13.5a2 2 0 0 0 2 2ZM7 7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H7Z" fill="currentColor"></path><path d="M6 8a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8Z" fill="currentColor" fill-opacity=".4"></path><path d="M29 25H3a1 1 0 1 0 0 2h26a1 1 0 1 0 0-2Z" fill="currentColor"></path></svg>
			System theme
		</button>
	
	
	</div></div>
		<div class="font-semibold text-black md:hidden">Company</div>
		<a class="hover:underline" href="/terms-of-service">TOS</a>
		<a class="hover:underline" href="/privacy">Privacy</a>
		<a class="hover:underline" href="/huggingface">About</a>
		<a class="hover:underline" href="https://apply.workable.com/huggingface/">Jobs</a>
		<a href="/" class="max-md:mb-4! max-md:mt-8! group flex-none max-md:order-last"><svg class="h-7 w-7 transition-transform group-hover:-translate-y-px" viewBox="0 0 95 88" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M47.2119 76.5C66.4037 76.5 81.9619 60.9419 81.9619 41.75C81.9619 22.5581 66.4037 7 47.2119 7C28.02 7 12.4619 22.5581 12.4619 41.75C12.4619 60.9419 28.02 76.5 47.2119 76.5Z" fill="#FFD21E"></path><path d="M81.9619 41.75C81.9619 22.5581 66.4037 7 47.2119 7C28.02 7 12.4619 22.5581 12.4619 41.75C12.4619 60.9419 28.02 76.5 47.2119 76.5C66.4037 76.5 81.9619 60.9419 81.9619 41.75ZM8.46185 41.75C8.46185 20.349 25.8108 3 47.2119 3C68.6129 3 85.9619 20.349 85.9619 41.75C85.9619 63.151 68.6129 80.5 47.2119 80.5C25.8108 80.5 8.46185 63.151 8.46185 41.75Z" fill="#FF9D0B"></path><path d="M58.5024 32.2915C59.7768 32.7415 60.2839 35.3615 61.5713 34.6769C64.0095 33.3805 64.9351 30.353 63.6387 27.9148C62.3423 25.4767 59.3148 24.5511 56.8766 25.8475C54.4384 27.1439 53.5128 30.1714 54.8092 32.6096C55.4211 33.7604 57.3632 31.8892 58.5024 32.2915Z" fill="#3A3B45"></path><path d="M34.9454 32.2915C33.671 32.7415 33.164 35.3615 31.8766 34.6769C29.4384 33.3805 28.5128 30.353 29.8092 27.9148C31.1056 25.4767 34.1331 24.5511 36.5713 25.8475C39.0095 27.1439 39.9351 30.1714 38.6387 32.6096C38.0268 33.7604 36.0846 31.8892 34.9454 32.2915Z" fill="#3A3B45"></path><path d="M46.9619 56.289C56.7903 56.289 59.9619 47.5261 59.9619 43.0262C59.9619 40.6875 58.3898 41.4236 55.8718 42.6702C53.5449 43.8222 50.4102 45.4101 46.9619 45.4101C39.7822 45.4101 33.9619 38.5263 33.9619 43.0262C33.9619 47.5261 37.1334 56.289 46.9619 56.289Z" fill="#3A3B45"></path><mask id="mask0" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="33" y="41" width="27" height="16"><path d="M46.9619 56.289C56.7903 56.289 59.9619 47.5261 59.9619 43.0262C59.9619 40.6875 58.3898 41.4236 55.8718 42.6702C53.5449 43.8222 50.4102 45.4101 46.9619 45.4101C39.7822 45.4101 33.9619 38.5263 33.9619 43.0262C33.9619 47.5261 37.1334 56.289 46.9619 56.289Z" fill="white"></path></mask><g mask="url(#mask0)"><path d="M47.2119 66.5C52.0018 66.5 55.8848 62.617 55.8848 57.8271C55.8848 54.0962 53.5291 50.9156 50.224 49.6915C50.1023 49.6464 49.9794 49.604 49.8553 49.5643C49.0219 49.2979 48.1337 52.1623 47.2119 52.1623C46.3506 52.1623 45.5186 49.2797 44.7332 49.5135C41.151 50.5799 38.5389 53.8984 38.5389 57.8271C38.5389 62.617 42.4219 66.5 47.2119 66.5Z" fill="#F94040"></path></g><path d="M70.7119 37C72.5068 37 73.9619 35.5449 73.9619 33.75C73.9619 31.9551 72.5068 30.5 70.7119 30.5C68.9169 30.5 67.4619 31.9551 67.4619 33.75C67.4619 35.5449 68.9169 37 70.7119 37Z" fill="#FF9D0B"></path><path d="M24.2119 37C26.0068 37 27.4619 35.5449 27.4619 33.75C27.4619 31.9551 26.0068 30.5 24.2119 30.5C22.4169 30.5 20.9619 31.9551 20.9619 33.75C20.9619 35.5449 22.4169 37 24.2119 37Z" fill="#FF9D0B"></path><path class="origin-bottom-right transition-transform group-hover:-rotate-6" d="M17.5238 48C15.9048 48 14.4578 48.665 13.4488 49.871C12.8248 50.618 12.1728 51.822 12.1198 53.625C11.4408 53.43 10.7878 53.321 10.1778 53.321C8.6278 53.321 7.2278 53.915 6.2378 54.994C4.9658 56.379 4.4008 58.081 4.6468 59.784C4.7638 60.595 5.0348 61.322 5.4398 61.995C4.5858 62.686 3.9568 63.648 3.6528 64.805C3.4148 65.712 3.1708 67.601 4.4448 69.547C4.3638 69.674 4.2878 69.806 4.2168 69.941C3.4508 71.395 3.4018 73.038 4.0778 74.568C5.1028 76.887 7.6498 78.714 12.5958 80.675C15.6728 81.895 18.4878 82.675 18.5128 82.682C22.5808 83.737 26.2598 84.273 29.4448 84.273C35.2988 84.273 39.4898 82.48 41.9018 78.944C45.7838 73.25 45.2288 68.042 40.2058 63.022C37.4258 60.244 35.5778 56.148 35.1928 55.249C34.4168 52.587 32.3648 49.628 28.9538 49.628H28.9528C28.6658 49.628 28.3758 49.651 28.0898 49.696C26.5958 49.931 25.2898 50.791 24.3568 52.085C23.3498 50.833 22.3718 49.837 21.4868 49.275C20.1528 48.429 18.8198 48 17.5238 48ZM17.5238 52C18.0338 52 18.6568 52.217 19.3438 52.653C21.4768 54.006 25.5928 61.081 27.0998 63.833C27.6048 64.755 28.4678 65.145 29.2448 65.145C30.7868 65.145 31.9908 63.612 29.3858 61.664C25.4688 58.733 26.8428 53.942 28.7128 53.647C28.7948 53.634 28.8758 53.628 28.9538 53.628C30.6538 53.628 31.4038 56.558 31.4038 56.558C31.4038 56.558 33.6018 62.078 37.3778 65.851C41.1538 69.625 41.3488 72.654 38.5968 76.69C36.7198 79.442 33.1268 80.273 29.4448 80.273C25.6258 80.273 21.7108 79.379 19.5168 78.81C19.4088 78.782 6.0658 75.013 7.7558 71.805C8.0398 71.266 8.5078 71.05 9.0968 71.05C11.4768 71.05 15.8058 74.592 17.6668 74.592C18.0828 74.592 18.3758 74.415 18.4958 73.983C19.2888 71.138 6.4388 69.942 7.5218 65.821C7.7128 65.092 8.2308 64.796 8.9588 64.797C12.1038 64.797 19.1598 70.328 20.6388 70.328C20.7518 70.328 20.8328 70.295 20.8768 70.225C21.6178 69.029 21.2118 68.194 15.9888 65.033C10.7658 61.871 7.0998 59.969 9.1848 57.699C9.4248 57.437 9.7648 57.321 10.1778 57.321C13.3488 57.322 20.8408 64.14 20.8408 64.14C20.8408 64.14 22.8628 66.243 24.0858 66.243C24.3668 66.243 24.6058 66.132 24.7678 65.858C25.6348 64.396 16.7148 57.636 16.2118 54.847C15.8708 52.957 16.4508 52 17.5238 52Z" fill="#FF9D0B"></path><path class="origin-bottom-right transition-transform group-hover:-rotate-6" d="M38.5967 76.6898C41.3487 72.6538 41.1537 69.6248 37.3777 65.8508C33.6017 62.0778 31.4037 56.5578 31.4037 56.5578C31.4037 56.5578 30.5827 53.3518 28.7127 53.6468C26.8427 53.9418 25.4697 58.7328 29.3867 61.6638C33.3037 64.5938 28.6067 66.5848 27.0997 63.8328C25.5927 61.0808 21.4777 54.0058 19.3437 52.6528C17.2107 51.2998 15.7087 52.0578 16.2117 54.8468C16.7147 57.6358 25.6357 64.3958 24.7677 65.8588C23.8997 67.3208 20.8407 64.1398 20.8407 64.1398C20.8407 64.1398 11.2687 55.4288 9.18465 57.6988C7.10065 59.9688 10.7657 61.8708 15.9887 65.0328C21.2127 68.1938 21.6177 69.0288 20.8767 70.2248C20.1347 71.4208 8.60465 61.6998 7.52165 65.8208C6.43965 69.9418 19.2887 71.1378 18.4957 73.9828C17.7027 76.8288 9.44465 68.5978 7.75565 71.8048C6.06565 75.0128 19.4087 78.7818 19.5167 78.8098C23.8267 79.9278 34.7727 82.2968 38.5967 76.6898Z" fill="#FFD21E"></path><path class="origin-bottom-left transition-transform group-hover:rotate-6" d="M77.3999 48C79.0189 48 80.4659 48.665 81.4749 49.871C82.0989 50.618 82.7509 51.822 82.8039 53.625C83.4829 53.43 84.1359 53.321 84.7459 53.321C86.2959 53.321 87.6959 53.915 88.6859 54.994C89.9579 56.379 90.5229 58.081 90.2769 59.784C90.1599 60.595 89.8889 61.322 89.4839 61.995C90.3379 62.686 90.9669 63.648 91.2709 64.805C91.5089 65.712 91.7529 67.601 90.4789 69.547C90.5599 69.674 90.6359 69.806 90.7069 69.941C91.4729 71.395 91.5219 73.038 90.8459 74.568C89.8209 76.887 87.2739 78.714 82.3279 80.675C79.2509 81.895 76.4359 82.675 76.4109 82.682C72.3429 83.737 68.6639 84.273 65.4789 84.273C59.6249 84.273 55.4339 82.48 53.0219 78.944C49.1399 73.25 49.6949 68.042 54.7179 63.022C57.4979 60.244 59.3459 56.148 59.7309 55.249C60.5069 52.587 62.5589 49.628 65.9699 49.628H65.9709C66.2579 49.628 66.5479 49.651 66.8339 49.696C68.3279 49.931 69.6339 50.791 70.5669 52.085C71.5739 50.833 72.5519 49.837 73.4369 49.275C74.7709 48.429 76.1039 48 77.3999 48ZM77.3999 52C76.8899 52 76.2669 52.217 75.5799 52.653C73.4469 54.006 69.3309 61.081 67.8239 63.833C67.3189 64.755 66.4559 65.145 65.6789 65.145C64.1369 65.145 62.9329 63.612 65.5379 61.664C69.4549 58.733 68.0809 53.942 66.2109 53.647C66.1289 53.634 66.0479 53.628 65.9699 53.628C64.2699 53.628 63.5199 56.558 63.5199 56.558C63.5199 56.558 61.3219 62.078 57.5459 65.851C53.7699 69.625 53.5749 72.654 56.3269 76.69C58.2039 79.442 61.7969 80.273 65.4789 80.273C69.2979 80.273 73.2129 79.379 75.4069 78.81C75.5149 78.782 88.8579 75.013 87.1679 71.805C86.8839 71.266 86.4159 71.05 85.8269 71.05C83.4469 71.05 79.1179 74.592 77.2569 74.592C76.8409 74.592 76.5479 74.415 76.4279 73.983C75.6349 71.138 88.4849 69.942 87.4019 65.821C87.2109 65.092 86.6929 64.796 85.9649 64.797C82.8199 64.797 75.7639 70.328 74.2849 70.328C74.1719 70.328 74.0909 70.295 74.0469 70.225C73.3059 69.029 73.7119 68.194 78.9349 65.033C84.1579 61.871 87.8239 59.969 85.7389 57.699C85.4989 57.437 85.1589 57.321 84.7459 57.321C81.5749 57.322 74.0829 64.14 74.0829 64.14C74.0829 64.14 72.0609 66.243 70.8379 66.243C70.5569 66.243 70.3179 66.132 70.1559 65.858C69.2889 64.396 78.2089 57.636 78.7119 54.847C79.0529 52.957 78.4729 52 77.3999 52Z" fill="#FF9D0B"></path><path class="origin-bottom-left transition-transform group-hover:rotate-6" d="M56.3271 76.6898C53.5751 72.6538 53.7701 69.6248 57.5461 65.8508C61.3221 62.0778 63.5201 56.5578 63.5201 56.5578C63.5201 56.5578 64.3411 53.3518 66.2111 53.6468C68.0811 53.9418 69.4541 58.7328 65.5371 61.6638C61.6201 64.5938 66.3171 66.5848 67.8241 63.8328C69.3311 61.0808 73.4461 54.0058 75.5801 52.6528C77.7131 51.2998 79.2151 52.0578 78.7121 54.8468C78.2091 57.6358 69.2881 64.3958 70.1561 65.8588C71.0241 67.3208 74.0831 64.1398 74.0831 64.1398C74.0831 64.1398 83.6551 55.4288 85.7391 57.6988C87.8231 59.9688 84.1581 61.8708 78.9351 65.0328C73.7111 68.1938 73.3061 69.0288 74.0471 70.2248C74.7891 71.4208 86.3191 61.6998 87.4021 65.8208C88.4841 69.9418 75.6351 71.1378 76.4281 73.9828C77.2211 76.8288 85.4791 68.5978 87.1681 71.8048C88.8581 75.0128 75.5151 78.7818 75.4071 78.8098C71.0971 79.9278 60.1511 82.2968 56.3271 76.6898Z" fill="#FFD21E"></path></svg></a>
		<div class="max-md:mt-8! font-semibold text-black md:hidden">Website</div>

		<a class="hover:underline" href="/models">Models</a>
		<a class="hover:underline" href="/datasets">Datasets</a>
		<a class="hover:underline" href="/spaces">Spaces</a>
		<a class="hover:underline" href="/pricing">Pricing</a>
		<a class="hover:underline" href="/docs">Docs</a></nav></footer></div>

		<script>
			import("\/front\/build\/kube-68d7aa0\/index.js");
			window.moonSha = "kube-68d7aa0\/";
			window.__hf_deferred = {};
		</script>

		<!-- Stripe -->
		<script>
			if (["hf.co", "huggingface.co"].includes(window.location.hostname)) {
				const script = document.createElement("script");
				script.src = "https://js.stripe.com/v3/";
				script.async = true;
				document.head.appendChild(script);
			}
		</script>
	</body>
</html>
